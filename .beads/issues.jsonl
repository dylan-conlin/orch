{"id":"orch-cli-06j","title":"Fix verification to not require WORKSPACE.md (check .kb instead)","description":"","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-05T12:39:09.530096-08:00","updated_at":"2025-12-05T12:45:45.404473-08:00","closed_at":"2025-12-05T12:45:45.404473-08:00","close_reason":"Fixed: verification now checks .kb/ first, skips WORKSPACE.md requirement"}
{"id":"orch-cli-0b2","title":"Update skill docs that still reference WORKSPACE.md","description":"Documentation cleanup. Several skills still reference WORKSPACE.md in metadata/docs:\n- ~/.claude/skills/*/SKILL.md files have deliverables mentioning WORKSPACE.md path\n- orchestrator skill says 'Spawn creates: Workspace at .orch/workspace/{name}/WORKSPACE.md'\n- Various utility skills reference WORKSPACE.md locations\n\nThese should be updated to reflect beads-first architecture (beads is source of truth, not WORKSPACE.md).\n\nSource: .kb/investigations/2025-12-05-investigate-where-workspace-files-still.md (Finding 5)","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-05T13:36:36.774176-08:00","updated_at":"2025-12-05T13:36:36.774176-08:00","dependencies":[{"issue_id":"orch-cli-0b2","depends_on_id":"orch-cli-dgy","type":"parent-child","created_at":"2025-12-07T22:26:16.194894-08:00","created_by":"daemon"}]}
{"id":"orch-cli-0ii","title":"Implement tail command support for OpenCode backend","description":"","notes":"workspace: .orch/workspace/inv-impl-tail-command-support-02dec","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-01T10:24:50.81262-08:00","updated_at":"2025-12-02T11:15:19.288513-08:00","closed_at":"2025-12-02T11:15:19.288513-08:00","close_reason":"Resolved via orch complete"}
{"id":"orch-cli-0kk","title":"Standardize on orch-knowledge name (replace meta-orchestration references)","description":"## Context\nAgent confusion: `~/meta-orchestration` is a symlink to `~/orch-knowledge`, but documentation uses both names inconsistently. Agents don't know which is canonical.\n\n## Scope\n- Update ~50 references in orch-cli from `meta-orchestration` to `orch-knowledge`\n- Keep symlink for backwards compatibility\n- Add note in docs: 'Legacy symlink ~/meta-orchestration may exist'\n\n## Files to update\n- src/orch/cli.py (2 refs)\n- src/orch/init.py (3 refs)\n- src/orch/spawn.py (2 refs)\n- src/orch/spawn_prompt.py (1 ref)\n- src/orch/config.py (2 refs)\n- src/orch/help.py (~15 refs)\n- tests/*.py (many refs - update or leave as test fixtures)\n- .orch/CLAUDE.md (1 ref)\n- skills/orchestrator/SKILL.md (2 refs)\n\n## Acceptance Criteria\n- [ ] All user-facing references use orch-knowledge\n- [ ] Tests still pass\n- [ ] Symlink documented as legacy alias","notes":"workspace: .orch/workspace/feat-standardize-orch-02dec","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-02T14:43:32.895575-08:00","updated_at":"2025-12-03T12:34:50.266736-08:00","closed_at":"2025-12-03T12:34:50.266736-08:00","close_reason":"Resolved via orch complete","comments":[{"id":7,"issue_id":"orch-cli-0kk","author":"dylanconlin","text":"Phase: Planning - Finding all meta-orchestration references in codebase","created_at":"2025-12-02T22:44:51Z"},{"id":8,"issue_id":"orch-cli-0kk","author":"dylanconlin","text":"Phase: Validation - All changes complete. Tests: 47 fail (baseline was 51 fail, 4 tests fixed). Ready for commit.","created_at":"2025-12-02T22:50:46Z"},{"id":10,"issue_id":"orch-cli-0kk","author":"dylanconlin","text":"Phase: Complete - All changes committed (4390c4e). 26 files updated, tests improved (4 tests fixed). Ready for merge.","created_at":"2025-12-02T22:51:27Z"}]}
{"id":"orch-cli-11o","title":"Add bd health command for backlog health summary","description":"","notes":"Part of Strategic Orchestrator Pattern (decision: 2025-12-04-strategic-orchestrator-pattern.md). Command should run: bd stats \u0026\u0026 bd ready \u0026\u0026 bd blocked. Used at session start for backlog health check.","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-04T11:40:32.199357-08:00","updated_at":"2025-12-04T11:40:44.953185-08:00"}
{"id":"orch-cli-1b5","title":"P1: Make meta-orchestration boilerplate conditional","description":"From audit: .orch/investigations/simple/2025-12-04-audit-spawn-context-quality.md\n\n## Problem\n45 lines of meta-orchestration warnings in EVERY spawn context, even for projects like price-watch that will never edit meta-orchestration templates.\n\n## Solution\nIn spawn_prompt.py, only include meta-orchestration boilerplate when project_dir contains 'meta-orchestration' or 'orch-cli':\n\n```python\nif 'meta-orchestration' in str(config.project_dir) or 'orch-cli' in str(config.project_dir):\n    # Include meta-orchestration template system warnings\n```\n\n## Impact\nRemoves 45 lines of irrelevant content from non-meta projects","notes":"workspace: .orch/workspace/feat-make-meta-orchestration-04dec","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-04T15:55:02.800518-08:00","updated_at":"2025-12-04T16:18:44.523408-08:00","closed_at":"2025-12-04T16:18:44.523408-08:00","close_reason":"Resolved via orch complete","comments":[{"id":76,"issue_id":"orch-cli-1b5","author":"dylanconlin","text":"Phase: Planning - Analyzing spawn_prompt.py to make meta-orchestration boilerplate conditional","created_at":"2025-12-05T00:03:17Z"},{"id":80,"issue_id":"orch-cli-1b5","author":"dylanconlin","text":"Phase: Implementing - Writing failing test for conditional meta-orchestration boilerplate","created_at":"2025-12-05T00:04:05Z"},{"id":83,"issue_id":"orch-cli-1b5","author":"dylanconlin","text":"Phase: Complete - Implemented conditional meta-orchestration boilerplate. The ~45 lines of META-ORCHESTRATION TEMPLATE SYSTEM warnings are now only included for orch-cli and orch-knowledge projects. Tests added and passing.","created_at":"2025-12-05T00:07:05Z"}]}
{"id":"orch-cli-1kq","title":"Fix: orch spawn --issue fails with project registry mismatch","description":"BUG: `orch spawn --issue \u003cid\u003e` fails even when in an orch project directory.\n\nREPRODUCTION:\n1. cd /Users/dylanconlin/Documents/personal/orch-cli\n2. orch projects scan  # finds orch-cli\n3. orch spawn research --issue orch-cli-vny\n4. Error: Project 'orch-cli' not found (from --project)\n\nOBSERVED:\n- `orch projects scan` finds and caches orch-cli\n- But `orch spawn --issue` says project not found\n- Available projects list shows different projects (orch-knowledge, price-watch, etc.)\n\nEXPECTED:\n- Should spawn successfully since we're in the orch-cli directory\n\nLIKELY CAUSE:\n- Two different project registries/caches being used\n- Or --issue flag triggers different project lookup logic than auto-detect","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-02T10:32:36.318002-08:00","updated_at":"2025-12-02T10:39:40.856372-08:00","closed_at":"2025-12-02T10:39:40.856372-08:00","close_reason":"Fixed: pass project_dir to spawn_with_skill to skip re-resolution when auto-detected"}
{"id":"orch-cli-1u8","title":"Add load_kb_context() for spawn prompt enrichment","description":"Add kb search integration to spawn_prompt.py, mirroring existing load_kn_context() pattern.\n\n**What it does:**\n- Extract keywords from task description\n- Search kb for related investigations/decisions\n- Return scored summaries with paths (not full content)\n- Add 'PRIOR INVESTIGATIONS (from kb)' section to spawn prompt\n\n**Why:**\n- kn context only surfaces operational knowledge (quick decisions, constraints)\n- kb contains deeper investigations and formal decisions\n- Enables 'reading between the lines' - agents get prior work without orchestrator remembering\n\n**Reference:** .kb/investigations/2025-12-07-orchestrator-prompt-amplification-how-orchestrator.md","notes":"workspace: .orch/workspace/feat-add-load-context-spawn-08dec","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-07T23:15:43.262281-08:00","updated_at":"2025-12-08T18:39:25.614256-08:00","closed_at":"2025-12-08T18:39:25.614256-08:00","close_reason":"Resolved via orch complete","dependencies":[{"issue_id":"orch-cli-1u8","depends_on_id":"orch-cli-y59","type":"parent-child","created_at":"2025-12-07T23:15:56.903675-08:00","created_by":"daemon"}],"comments":[{"id":200,"issue_id":"orch-cli-1u8","author":"dylanconlin","text":"agent_metadata: {\"agent_id\": \"feat-add-load-context-spawn-08dec\", \"window_id\": \"@508\", \"skill\": \"feature-impl\", \"project_dir\": \"/Users/dylanconlin/Documents/personal/orch-cli\"}","created_at":"2025-12-09T02:33:21Z"},{"id":201,"issue_id":"orch-cli-1u8","author":"dylanconlin","text":"Phase: Planning - Reading codebase to understand load_kn_context() pattern","created_at":"2025-12-09T02:33:38Z"},{"id":202,"issue_id":"orch-cli-1u8","author":"dylanconlin","text":"investigation_path: /Users/dylanconlin/Documents/personal/orch-cli/.kb/investigations/2025-12-08-inv-add-load-context-spawn-prompt.md","created_at":"2025-12-09T02:34:22Z"},{"id":211,"issue_id":"orch-cli-1u8","author":"dylanconlin","text":"Phase: Complete - Added load_kb_context() function to spawn_prompt.py that surfaces relevant kb investigations/decisions in spawn prompts. Includes 12 unit tests + 3 integration tests (all passing). Committed and pushed.","created_at":"2025-12-09T02:39:10Z"}]}
{"id":"orch-cli-2fz","title":"E2E test: verify beads-first workflow","description":"Quick test to verify:\n- spawn creates SPAWN_CONTEXT.md but NOT WORKSPACE.md\n- agent can use bd comment for phase tracking\n- orch check shows phase from beads comments\n- orch complete verifies Phase: Complete in comments","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-02T15:25:02.565357-08:00","updated_at":"2025-12-02T15:27:51.879179-08:00","closed_at":"2025-12-02T15:27:51.879179-08:00","close_reason":"E2E test completed. 2/4 passed. Found gap: orch commands require registry entry. Recommendation: support --issue flag for beads-only workflow.","comments":[{"id":16,"issue_id":"orch-cli-2fz","author":"dylanconlin","text":"Phase: Planning - Verifying beads-first workflow. Registered as ChartreuseBear.","created_at":"2025-12-02T23:25:42Z"},{"id":17,"issue_id":"orch-cli-2fz","author":"dylanconlin","text":"Phase: Implementing - Test results documented. Findings:\n1. ‚úÖ spawn creates SPAWN_CONTEXT.md but NOT WORKSPACE.md - CONFIRMED\n2. ‚úÖ bd comment for phase tracking works - CONFIRMED  \n3. ‚ùå orch check shows phase from beads - NOT WORKING (agent not in registry)\n4. üîÑ orch complete verifies Phase: Complete - CANNOT TEST (depends on 3)","created_at":"2025-12-02T23:26:46Z"},{"id":18,"issue_id":"orch-cli-2fz","author":"dylanconlin","text":"FINDINGS - E2E Test Results:\n\n**Test Case 1: spawn creates SPAWN_CONTEXT.md but NOT WORKSPACE.md**\n‚úÖ PASS - Workspace directory contains only SPAWN_CONTEXT.md (56KB)\n\n**Test Case 2: agent can use bd comment for phase tracking**\n‚úÖ PASS - Comments successfully added and visible via 'bd comments --json'\n\n**Test Case 3: orch check shows phase from beads comments**\n‚ùå FAIL - orch check requires agent in registry, but agent not registered\nRoot cause: Agent started manually (tmux window 'base'), not via 'orch spawn --issue'\nCode path exists (monitor.py:127-135) but requires beads_id in registry\n\n**Test Case 4: orch complete verifies Phase: Complete**\n‚è≠Ô∏è SKIPPED - Depends on test case 3 (agent registration)\n\n**Architectural Gap Identified:**\nBeads-first workflow assumes agents registered in registry with beads_id field.\nManual agent starts (or agents without registry entry) cannot use orch check/complete.\n\n**Recommendation:**\nConsider allowing orch check/complete to work with just beads issue ID\nwithout requiring agent in registry (enables simpler beads-first workflow)","created_at":"2025-12-02T23:27:22Z"},{"id":19,"issue_id":"orch-cli-2fz","author":"dylanconlin","text":"Phase: Complete - E2E test completed. 2/4 test cases passed, 1 failed (expected - architectural gap), 1 skipped. See detailed findings in previous comment.","created_at":"2025-12-02T23:27:29Z"}]}
{"id":"orch-cli-2j0","title":"Update skills/docs to use kb instead of orch create-*","description":"Find all references to orch create-investigation and orch create-decision in skills and docs, update to kb create investigation/decision.","notes":"workspace: .orch/workspace/feat-update-skills-docs-use-03dec","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-03T15:39:24.690405-08:00","updated_at":"2025-12-03T16:03:56.609359-08:00","closed_at":"2025-12-03T16:03:56.609359-08:00","close_reason":"Resolved via orch complete","dependencies":[{"issue_id":"orch-cli-2j0","depends_on_id":"orch-cli-cfh","type":"blocks","created_at":"2025-12-03T15:40:24.905505-08:00","created_by":"daemon"}],"comments":[{"id":43,"issue_id":"orch-cli-2j0","author":"dylanconlin","text":"Phase: Planning - Searching for all orch create-* references in skills and docs","created_at":"2025-12-03T23:57:38Z"},{"id":44,"issue_id":"orch-cli-2j0","author":"dylanconlin","text":"QUESTION: Found references in both orch-cli (spawn_prompt.py, workspace_commands.py) AND ~/.claude/skills (managed by orch-knowledge). Skills updates require orch-knowledge repo. Should I: (A) Update only orch-cli files here, (B) Update both (skills directly), or (C) Create separate beads issue for orch-knowledge skills?","created_at":"2025-12-03T23:58:32Z"},{"id":45,"issue_id":"orch-cli-2j0","author":"dylanconlin","text":"Phase: Validation - Updated spawn_prompt.py to use 'kb create investigation'. Commit: 82f9d89. Tests passing. Note: Skills at ~/.claude/skills still reference old command but are managed by orch-knowledge repo (separate task needed).","created_at":"2025-12-04T00:00:37Z"},{"id":46,"issue_id":"orch-cli-2j0","author":"dylanconlin","text":"Phase: Complete - Updated spawn_prompt.py to use 'kb create investigation' (commit 82f9d89). Tests passing. Remaining: Skills in ~/.claude/skills reference old command but are managed by orch-knowledge repo - recommend creating separate beads issue for orch-knowledge.","created_at":"2025-12-04T00:01:11Z"}]}
{"id":"orch-cli-30j","title":"Remove legacy WORKSPACE.md instructions from spawn_prompt.py","description":"spawn_prompt.py still includes WORKSPACE.md creation instructions when requires_workspace=true, even though beads is now source of truth for progress tracking.\n\n**Current state:**\n- spawn.py correctly doesn't create WORKSPACE.md (lines 1154, 1563, 2045 say 'beads is source of truth')\n- But spawn_prompt.py still tells agents to create and update WORKSPACE.md\n\n**Target state:**\n- Remove/update workspace instructions in spawn_prompt.py\n- Agents should only use bd comment for progress tracking\n- WORKSPACE.md creation should be optional/eliminated\n\n**Discovered by:** orch-knowledge meta-orchestration-do0 investigation","notes":"workspace: .orch/workspace/feat-remove-legacy-workspace-04dec","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-03T21:51:45.635472-08:00","updated_at":"2025-12-04T11:13:31.942283-08:00","closed_at":"2025-12-04T11:13:31.942283-08:00","close_reason":"Resolved via orch complete","comments":[{"id":55,"issue_id":"orch-cli-30j","author":"dylanconlin","text":"Phase: Planning - Analyzing spawn_prompt.py to identify WORKSPACE.md instructions to remove","created_at":"2025-12-04T19:06:37Z"},{"id":56,"issue_id":"orch-cli-30j","author":"dylanconlin","text":"Phase: Implementing - Starting TDD. Identified 9 areas in spawn_prompt.py to update. Key changes: remove WORKSPACE.md coordination instructions, make bd comment the sole progress tracking method.","created_at":"2025-12-04T19:07:44Z"},{"id":57,"issue_id":"orch-cli-30j","author":"dylanconlin","text":"Phase: Complete - Removed legacy WORKSPACE.md instructions from spawn_prompt.py. Now beads (bd comment) is the sole source of truth for progress tracking. Changes: fallback_template() updated, coordination instructions simplified, COORDINATION ARTIFACT POPULATION section removed, STATUS UPDATES uses beads, verification guidance uses beads. Tests: 146 spawn-related tests pass.","created_at":"2025-12-04T19:12:16Z"}]}
{"id":"orch-cli-3cs","title":"Fix Task tool vs orch spawn confusion in orchestrator skill","description":"","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-02T16:34:45.330239-08:00","updated_at":"2025-12-02T16:34:52.930473-08:00","closed_at":"2025-12-02T16:34:52.930473-08:00","close_reason":"Fixed: Added explicit disambiguation section to orchestrator skill (~/.claude/skills/policy/orchestrator/SKILL.md). New section shows table comparing Task tool subagents vs orch spawn skills, the exact failure pattern, and a simple lookup rule. Prevents orchestrators from using Task tool with skill names like systematic-debugging that only work via orch spawn."}
{"id":"orch-cli-3kr","title":"orch spawn --issue should set status to in_progress","description":"## Enhancement\nWhen spawning from a beads issue, `orch spawn --issue \u003cid\u003e` should automatically run `bd update \u003cid\u003e --status=in_progress`.\n\n## Current behavior\n- Issue stays `open` while agent is working\n- `orch complete` sets status to `closed`\n\n## Proposed\n- `orch spawn --issue` ‚Üí `in_progress`\n- `orch complete` ‚Üí `closed` (already works)\n\nThis completes the lifecycle: open ‚Üí in_progress ‚Üí closed","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-02T12:38:13.210254-08:00","updated_at":"2025-12-02T12:39:51.419156-08:00","closed_at":"2025-12-02T12:39:51.419156-08:00","close_reason":"Implemented in d21af43"}
{"id":"orch-cli-42s","title":"Cross-repo spawns should commit workspace back to spawning repo","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-30T15:48:03.367798-08:00","updated_at":"2025-11-30T16:31:57.923427-08:00","closed_at":"2025-11-30T16:31:57.923427-08:00","close_reason":"Fixed in acb0f9b - sync cross-repo workspace back to origin on completion"}
{"id":"orch-cli-439","title":"orch spawn heredoc/stdin context not incorporated into SPAWN_CONTEXT","description":"When passing additional context via heredoc to orch spawn, the content is not incorporated into SPAWN_CONTEXT.md.\n\n**Reproduction:**\n```bash\norch spawn investigation \"task name\" \u003c\u003c 'CONTEXT'\n## Investigation Question\nDetailed context here...\nCONTEXT\n```\n\n**Expected:** Heredoc content appears in SPAWN_CONTEXT.md (perhaps in a CONTEXT section)\n\n**Actual:** SPAWN_CONTEXT.md line 21 shows `CONTEXT: [See task description]` - placeholder not filled. Agent doesn't receive the detailed context.\n\n**Impact:** Agents spawn without critical context (file paths, specific questions, investigation goals). Orchestrators think they provided context but agents are flying blind.\n\n**Possible fixes:**\n1. Read stdin in spawn.py and inject into SPAWN_CONTEXT template\n2. Add explicit --context or --context-file flag\n3. Both (stdin for quick inline, --context-file for longer content)","notes":"workspace: .orch/workspace/feat-orch-spawn-heredoc-stdin-05dec","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-05T16:56:45.260904-08:00","updated_at":"2025-12-05T17:05:42.904538-08:00","closed_at":"2025-12-05T17:05:42.904538-08:00","close_reason":"Resolved via orch complete","labels":["P1,spawn,ux-bug"],"comments":[{"id":108,"issue_id":"orch-cli-439","author":"dylanconlin","text":"Phase: Planning - Reading spawn.py and spawn_prompt.py to understand current context handling","created_at":"2025-12-06T00:58:35Z"},{"id":109,"issue_id":"orch-cli-439","author":"dylanconlin","text":"Phase: Implementing - Root cause identified: stdin ignored without --from-stdin flag, and --from-stdin replaces entire prompt. Fix: auto-detect piped stdin and add to additional_context","created_at":"2025-12-06T00:59:09Z"},{"id":110,"issue_id":"orch-cli-439","author":"dylanconlin","text":"Phase: Validation - All tests passing. Fix implemented: stdin_context parameter added, --from-stdin now adds to ADDITIONAL CONTEXT instead of replacing prompt, auto-detect piped stdin","created_at":"2025-12-06T01:05:01Z"},{"id":111,"issue_id":"orch-cli-439","author":"dylanconlin","text":"Phase: Complete - Implemented stdin_context to incorporate heredoc/piped content into SPAWN_CONTEXT.md ADDITIONAL CONTEXT section. 7 new tests, all passing.","created_at":"2025-12-06T01:05:35Z"}]}
{"id":"orch-cli-4j6","title":"Investigate when orch complete can be removed","description":"**Context:** Beads is becoming single source of truth for agent lifecycle. `orch complete` may be redundant.\n\n**Questions to answer:**\n1. What does `orch complete` currently do that beads doesn't?\n2. What hooks/automation would need to exist in beads to replace it?\n3. What's the migration path - can we deprecate incrementally?\n4. Are there edge cases where `orch complete` is still needed?\n\n**Related:** orch-cli-dgy (Simplify orch-cli epic), orch-cli-nan (delete lifecycle modules)","notes":"workspace: .orch/workspace/inv-when-orch-complete-08dec","status":"in_progress","priority":2,"issue_type":"task","created_at":"2025-12-08T19:23:29.830817-08:00","updated_at":"2025-12-08T19:23:38.716896-08:00","comments":[{"id":224,"issue_id":"orch-cli-4j6","author":"dylanconlin","text":"agent_metadata: {\"agent_id\": \"inv-when-orch-complete-08dec\", \"window_id\": \"@519\", \"skill\": \"investigation\", \"project_dir\": \"/Users/dylanconlin/Documents/personal/orch-cli\"}","created_at":"2025-12-09T03:23:38Z"},{"id":225,"issue_id":"orch-cli-4j6","author":"dylanconlin","text":"Phase: Planning - Analyzing orch complete functionality and beads comparison","created_at":"2025-12-09T03:23:51Z"},{"id":226,"issue_id":"orch-cli-4j6","author":"dylanconlin","text":"investigation_path: /Users/dylanconlin/Documents/personal/orch-cli/.kb/investigations/2025-12-08-inv-investigate-when-orch-complete-removed.md","created_at":"2025-12-09T03:24:39Z"},{"id":227,"issue_id":"orch-cli-4j6","author":"dylanconlin","text":"Phase: Complete - Investigation complete: orch complete performs 8 functions (verification, investigation surfacing, git ops, tmux cleanup, registry updates, cross-repo sync, discovery capture, stash restoration). Recommends incremental deprecation: remove registry dependency first (already in progress), then add bd verify, then move investigation surfacing, then deprecate orch complete. 85% confidence.","created_at":"2025-12-09T03:26:26Z"}]}
{"id":"orch-cli-57n","title":"Fix investigation path mismatch - store actual filename in registry via beads comment","description":"Root cause: Three-layer path mismatch between skill frontmatter (.orch/investigations/simple/), spawn prompt (.kb/investigations/{type}/), and kb actual output (.kb/investigations/).\n\nImplementation (Option C from investigation):\n1. Update spawn prompt to instruct agents: after kb create, capture the output path\n2. Add guidance to report path via bd comment \u003cid\u003e 'investigation_path: /path/to/file.md'\n3. Update orch complete to parse beads comments for investigation_path: prefix\n4. Store extracted path in registry as primary_artifact\n5. Verification continues to work via existing primary_artifact check\n\nSee: .kb/investigations/2025-12-06-orch-complete-verification-filename-mismatch.md","notes":"workspace: .orch/workspace/feat-fix-inv-path-mismatch-06dec","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-06T18:28:43.922715-08:00","updated_at":"2025-12-06T19:03:22.095697-08:00","closed_at":"2025-12-06T19:03:22.095697-08:00","close_reason":"Resolved via orch complete","comments":[{"id":123,"issue_id":"orch-cli-57n","author":"dylanconlin","text":"Phase: Planning - Reviewing investigation findings and identifying implementation targets","created_at":"2025-12-07T02:29:27Z"},{"id":124,"issue_id":"orch-cli-57n","author":"dylanconlin","text":"Phase: Implementing - Starting TDD cycle for investigation path extraction","created_at":"2025-12-07T02:30:15Z"},{"id":125,"issue_id":"orch-cli-57n","author":"dylanconlin","text":"investigation_path: /Users/dylanconlin/Documents/personal/orch-cli/.kb/investigations/2025-12-06-orch-complete-verification-filename-mismatch.md","created_at":"2025-12-07T02:35:49Z"},{"id":126,"issue_id":"orch-cli-57n","author":"dylanconlin","text":"Phase: Complete - Implemented investigation path extraction via beads comments. Three commits: (1) beads_integration.get_investigation_path_from_comments(), (2) complete.py extracts path and updates registry, (3) spawn_prompt.py instructs agents to report path. All 94 related tests pass.","created_at":"2025-12-07T02:35:56Z"}]}
{"id":"orch-cli-5o2","title":"Pass --agent flag to Claude Code in ClaudeBackend","description":"Update ClaudeBackend.build_command() to pass --agent {skill}-worker when agent file exists. Minor change to backends/claude.py.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-05T22:52:02.05705-08:00","updated_at":"2025-12-05T22:52:02.05705-08:00","dependencies":[{"issue_id":"orch-cli-5o2","depends_on_id":"orch-cli-71q","type":"blocks","created_at":"2025-12-08T18:38:39.059014-08:00","created_by":"daemon"}]}
{"id":"orch-cli-5st","title":"fix: prevent spawn from switching workers client if orchestrator context changed","description":"When spawning agents, the workers client switch would happen even if the user had already switched to a different orchestrator context. Added check_orchestrator_context parameter to prevent this race condition.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-08T14:08:29.43354-08:00","updated_at":"2025-12-08T14:08:40.209778-08:00","closed_at":"2025-12-08T14:08:40.209778-08:00","close_reason":"Fixed: spawn now checks if orchestrator is still in the same project before switching workers client"}
{"id":"orch-cli-6t3","title":"orch abandon: add -y flag for non-interactive use","description":"**Problem:** orch abandon requires interactive confirmation, making batch cleanup difficult.\n\n**Current behavior:** Must use `yes y | orch abandon \u003cid\u003e` workaround.\n\n**Expected:** `orch abandon -y \u003cid\u003e` skips confirmation.\n\n**Evidence:** Session post-mortem 2025-12-07 - had to abandon 6 stale agents one by one with workaround.","notes":"workspace: .orch/workspace/feat-orch-abandon-add-flag-08dec","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-07T22:13:58.121836-08:00","updated_at":"2025-12-08T08:14:07.297357-08:00","closed_at":"2025-12-08T08:14:07.297357-08:00","close_reason":"Resolved via orch complete","comments":[{"id":184,"issue_id":"orch-cli-6t3","author":"dylanconlin","text":"agent_metadata: {\"agent_id\": \"feat-orch-abandon-add-flag-08dec\", \"window_id\": \"@430\", \"skill\": \"feature-impl\", \"project_dir\": \"/Users/dylanconlin/Documents/personal/orch-cli\"}","created_at":"2025-12-08T16:00:15Z"},{"id":186,"issue_id":"orch-cli-6t3","author":"dylanconlin","text":"Phase: Planning - Analyzing orch abandon command structure to add -y flag","created_at":"2025-12-08T16:00:34Z"},{"id":189,"issue_id":"orch-cli-6t3","author":"dylanconlin","text":"Phase: Implementing - Writing failing test for -y flag","created_at":"2025-12-08T16:01:29Z"},{"id":191,"issue_id":"orch-cli-6t3","author":"dylanconlin","text":"Phase: Complete - Added -y/--yes flag to orch abandon for non-interactive use. Kept --force as alias for backward compatibility. Tests passing.","created_at":"2025-12-08T16:04:36Z"}]}
{"id":"orch-cli-6tr","title":"Investigate removing .orch/workspace/ directory","description":"Now that beads handles progress tracking, the workspace directory may be redundant.\n\n**Current use:**\n- SPAWN_CONTEXT.md (spawn prompt for agent)\n- WORKSPACE.md (removed - now beads)\n\n**Options to evaluate:**\n1. Keep minimal workspace - just for SPAWN_CONTEXT.md\n2. Inline spawn context to beads issue description/attachment\n3. Use temp file for SPAWN_CONTEXT.md\n\n**Questions:**\n- Where should SPAWN_CONTEXT.md live if not in workspace?\n- Is agent isolation still valuable?\n- What breaks if we remove workspace dir?\n\n**Discovered from:** orch-cli-30j post-mortem","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-04T11:16:46.059077-08:00","updated_at":"2025-12-04T11:16:46.059077-08:00","dependencies":[{"issue_id":"orch-cli-6tr","depends_on_id":"orch-cli-dgy","type":"parent-child","created_at":"2025-12-07T22:26:16.154244-08:00","created_by":"daemon"}],"comments":[{"id":88,"issue_id":"orch-cli-6tr","author":"dylanconlin","text":"Phase: Planning - Investigating WORKSPACE.md file creation across orch-cli, orch-knowledge, and kb-cli","created_at":"2025-12-05T20:30:44Z"},{"id":89,"issue_id":"orch-cli-6tr","author":"dylanconlin","text":"Phase: Complete - Investigation found that WORKSPACE.md files are NO LONGER being created after commit fbec053 (Dec 4). Existing files are from pre-Dec 4 spawns when spawn_prompt.py still instructed agents to create them. No urgent changes needed - fix is already in place. Low-priority cleanup: remove dead create_workspace() function, update skill docs.","created_at":"2025-12-05T20:35:56Z"}]}
{"id":"orch-cli-71q","title":"Generate .claude/agents/ files at spawn time from skill metadata","description":"Add generate_agent_file() function in spawn.py. Creates agent file with tool restrictions and model from skill frontmatter. Agent file provides restrictions, SPAWN_CONTEXT.md provides procedural guidance.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-05T22:52:01.924252-08:00","updated_at":"2025-12-05T22:52:01.924252-08:00","dependencies":[{"issue_id":"orch-cli-71q","depends_on_id":"orch-cli-98u","type":"blocks","created_at":"2025-12-08T18:38:39.033371-08:00","created_by":"daemon"}]}
{"id":"orch-cli-766","title":"Remove ~/.orch/templates/WORKSPACE.md template","description":"Template cleanup. The WORKSPACE.md template at ~/.orch/templates/WORKSPACE.md is no longer used - beads is now source of truth for agent state. Can be removed to avoid confusion.\n\nSource: .kb/investigations/2025-12-05-investigate-where-workspace-files-still.md","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-05T13:36:37.92888-08:00","updated_at":"2025-12-05T13:36:37.92888-08:00","dependencies":[{"issue_id":"orch-cli-766","depends_on_id":"orch-cli-dgy","type":"parent-child","created_at":"2025-12-07T22:26:16.174347-08:00","created_by":"daemon"}]}
{"id":"orch-cli-81h","title":"Add reverse lint: show affected skills when CLI commands change","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-30T15:47:58.848861-08:00","updated_at":"2025-11-30T16:31:59.56239-08:00","closed_at":"2025-11-30T16:31:59.56239-08:00","close_reason":"Fixed in 6aaf654 - reverse lint shows affected skills when CLI commands change"}
{"id":"orch-cli-8yz","title":"Pass beads labels to SPAWN_CONTEXT","description":"Add labels field to BeadsIssue dataclass and include in SPAWN_CONTEXT metadata section when using --issue flag. Enables cross-repo routing (e.g., 'target:orch-cli' label signals work belongs in different repo) and categorization for agents.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-05T16:47:19.503195-08:00","updated_at":"2025-12-05T16:47:19.503195-08:00","labels":["P2,beads-integration"],"dependencies":[{"issue_id":"orch-cli-8yz","depends_on_id":"orch-cli-y59","type":"parent-child","created_at":"2025-12-07T22:26:29.451509-08:00","created_by":"daemon"}]}
{"id":"orch-cli-916","title":"Fix duplicate prefixes in tmux window names (inv-inv, debug-debug)","description":"Tmux window names show duplicate prefixes like 'inv-inv-tmux-ghostty-config' and 'debug-debug-sendcutsend'. The skill prefix (inv, debug, feat) is being added twice - once in the workspace name generation and once in the window naming. Should be 'inv-tmux-ghostty-config' not 'inv-inv-tmux-ghostty-config'.","notes":"workspace: .orch/workspace/debug-fix-duplicate-prefixes-05dec","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-05T12:53:24.485377-08:00","updated_at":"2025-12-05T22:49:41.14541-08:00","closed_at":"2025-12-05T22:49:41.14541-08:00","close_reason":"Closed","comments":[{"id":90,"issue_id":"orch-cli-916","author":"dylanconlin","text":"Phase: Planning - Investigating duplicate prefix issue in tmux window names","created_at":"2025-12-05T20:55:15Z"},{"id":91,"issue_id":"orch-cli-916","author":"dylanconlin","text":"Phase: Implementing - Root cause identified: ABBREVIATIONS and SKILL_PREFIXES both produce same values (investigate‚Üíinv, investigation‚Üíinv), causing duplicate when concatenated. Fix: filter words matching skill prefix before concatenation.","created_at":"2025-12-05T20:57:19Z"},{"id":92,"issue_id":"orch-cli-916","author":"dylanconlin","text":"Self-review passed - ready for completion. Changes: workspace_naming.py fix (4 lines), regression test added, investigation documented.","created_at":"2025-12-05T20:58:42Z"},{"id":93,"issue_id":"orch-cli-916","author":"dylanconlin","text":"Phase: Complete - Fixed duplicate prefix issue in workspace names. Root cause: ABBREVIATIONS and SKILL_PREFIXES both produce same values (investigate‚Üíinv, investigation‚Üíinv), causing collision. Fix: filter words matching skill prefix before concatenation. Tests passing, commit 58ccb1e.","created_at":"2025-12-05T20:59:05Z"},{"id":94,"issue_id":"orch-cli-916","author":"dylanconlin","text":"Phase: Implementing - Adding project name and beads ID to tmux window names, dropping 'worker:' prefix and date suffix","created_at":"2025-12-05T21:06:15Z"},{"id":95,"issue_id":"orch-cli-916","author":"dylanconlin","text":"Phase: Complete - Two features implemented: (1) Fixed duplicate prefix bug (58ccb1e), (2) Improved window names with project context and beads ID (5f708ed). New format: 'üîç orch-cli: 916: fix-prefixes' instead of 'üîç worker: debug-fix-duplicate-prefixes-05dec'. All 22 tests passing.","created_at":"2025-12-05T21:08:39Z"}]}
{"id":"orch-cli-96j","title":"Update beads_integration.py to write agent metadata as JSON to notes field","description":"Write phase, skill, agent_id, updated_at, investigation_path as JSON to notes field instead of comments. Enables real-time UI updates via WebSocket.","notes":"workspace: .orch/workspace/feat-update-beads-integration-06dec","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:21:14.8857-08:00","updated_at":"2025-12-06T23:48:53.04622-08:00","closed_at":"2025-12-06T23:48:53.04622-08:00","close_reason":"Resolved via orch complete","comments":[{"id":159,"issue_id":"orch-cli-96j","author":"dylanconlin","text":"agent_metadata: {\"agent_id\": \"feat-update-beads-integration-06dec\", \"window_id\": \"@324\", \"skill\": \"feature-impl\", \"project_dir\": \"/Users/dylanconlin/Documents/personal/orch-cli\"}","created_at":"2025-12-07T07:22:00Z"},{"id":160,"issue_id":"orch-cli-96j","author":"dylanconlin","text":"Phase: Planning - Reading codebase to understand beads_integration.py structure","created_at":"2025-12-07T07:22:19Z"},{"id":161,"issue_id":"orch-cli-96j","author":"dylanconlin","text":"investigation_path: /Users/dylanconlin/Documents/personal/orch-cli/.kb/investigations/2025-12-06-update-beads-integration-write-agent.md","created_at":"2025-12-07T07:22:53Z"},{"id":162,"issue_id":"orch-cli-96j","author":"dylanconlin","text":"Phase: Implementing - Writing failing tests for notes-based metadata storage","created_at":"2025-12-07T07:23:40Z"},{"id":163,"issue_id":"orch-cli-96j","author":"dylanconlin","text":"Phase: Complete - Added 5 new methods to BeadsIntegration for notes-based agent metadata storage: update_agent_notes(), get_agent_notes(), get_phase_from_notes(), get_investigation_path_from_notes(), update_phase(). All 77 beads-related tests pass. Enables real-time UI updates via WebSocket.","created_at":"2025-12-07T07:27:18Z"}]}
{"id":"orch-cli-97y","title":"Remove dead create_workspace() function from workspace.py","description":"Dead code cleanup. The create_workspace() function in workspace.py (line ~959) still creates WORKSPACE.md files when called, but nothing calls this function anymore - beads is now source of truth. Safe to remove.\n\nSource: .kb/investigations/2025-12-05-investigate-where-workspace-files-still.md (Finding 4)","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-05T13:36:35.207815-08:00","updated_at":"2025-12-06T23:55:06.024377-08:00","closed_at":"2025-12-06T23:55:06.024377-08:00","close_reason":"Already done: create_workspace() removed during spawn.py consolidation (2f44db2)"}
{"id":"orch-cli-98u","title":"Add allowed_tools/disallowed_tools/default_model to skill frontmatter schema","description":"Extend SkillMetadata in skill_discovery.py to support tool restrictions. Skills can then specify which tools they need in SKILL.md frontmatter. Part of --agent flag integration.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-05T22:52:01.796655-08:00","updated_at":"2025-12-05T22:52:01.796655-08:00"}
{"id":"orch-cli-999","title":"Review and update orch init - creates outdated file structure","description":"orch init creates outdated file structure that no longer matches current patterns.\n\n**Observed:**\n- Creates .orch/CLAUDE.md (skeleton with template markers)\n- References non-existent 'orch build-orchestrator-context' command\n- May have other outdated patterns\n\n**Expected:**\n- Review current orch init behavior against actual usage patterns\n- Update to match how projects are actually structured now\n- Remove references to deprecated commands/patterns\n\n**Triggered by:** Initializing orch-cli itself and noticing the mismatch","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-30T15:57:32.291574-08:00","updated_at":"2025-11-30T16:13:07.007576-08:00","closed_at":"2025-11-30T16:13:07.007576-08:00","close_reason":"Fixed in 5db06a7 - removed deprecated build-orchestrator-context reference, added graceful template handling"}
{"id":"orch-cli-9sv","title":"Optional: Port simplified orch to Go","description":"After simplification to ~5K lines, optionally port to Go.\n\n**Benefits:**\n- 40ms startup (vs Python cold start)\n- Single binary distribution\n- Homebrew install\n\n**Prerequisite:** Simplified orch validated for 2-4 weeks","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-07T22:14:26.116529-08:00","updated_at":"2025-12-07T22:14:26.116529-08:00","dependencies":[{"issue_id":"orch-cli-9sv","depends_on_id":"orch-cli-dgy","type":"parent-child","created_at":"2025-12-07T22:26:16.215078-08:00","created_by":"daemon"}]}
{"id":"orch-cli-ao0","title":"Unify path conventions to .kb/","description":"Remove all .orch/ references in code. Skills, spawn, verification all use .kb/ consistently. Fix template variables to use {date}-{slug}.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-07T22:36:08.717923-08:00","updated_at":"2025-12-07T22:36:08.717923-08:00","dependencies":[{"issue_id":"orch-cli-ao0","depends_on_id":"orch-cli-dgy","type":"parent-child","created_at":"2025-12-07T22:36:14.653767-08:00","created_by":"daemon"}]}
{"id":"orch-cli-ate","title":"orch spawn --project should accept paths, not just registered names","description":"**Bug:** `orch spawn --project ~/Documents/personal/kb-cli` fails even though the path exists.\n\n**Expected:** Accept either:\n1. Registered project name (current behavior)\n2. Valid filesystem path to a directory\n\n**Use case:** Cross-repo spawning to projects that aren't registered with orch.","notes":"workspace: .orch/workspace/feat-orch-spawn-project-08dec","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-07T22:13:58.386195-08:00","updated_at":"2025-12-08T18:29:32.243435-08:00","closed_at":"2025-12-08T18:29:32.243435-08:00","close_reason":"Already implemented in commits 30ec289, 5726b2c","comments":[{"id":192,"issue_id":"orch-cli-ate","author":"dylanconlin","text":"agent_metadata: {\"agent_id\": \"feat-orch-spawn-project-08dec\", \"window_id\": \"@440\", \"skill\": \"feature-impl\", \"project_dir\": \"/Users/dylanconlin/Documents/personal/orch-cli\"}","created_at":"2025-12-08T16:15:40Z"},{"id":193,"issue_id":"orch-cli-ate","author":"dylanconlin","text":"Phase: Planning - Analyzing --project flag implementation in spawn_commands.py and spawn.py","created_at":"2025-12-08T16:16:01Z"},{"id":194,"issue_id":"orch-cli-ate","author":"dylanconlin","text":"Phase: Implementing - Writing failing test for path acceptance in get_project_dir","created_at":"2025-12-08T16:16:44Z"},{"id":195,"issue_id":"orch-cli-ate","author":"dylanconlin","text":"Phase: Validation - All 17 tests passing. Implementation allows --project to accept filesystem paths directly.","created_at":"2025-12-08T16:19:09Z"},{"id":196,"issue_id":"orch-cli-ate","author":"dylanconlin","text":"Phase: Complete - get_project_dir() now accepts filesystem paths directly. 4 new tests added, all 17 tests passing. Commits: 5726b2c (tests), 30ec289 (implementation).","created_at":"2025-12-08T16:19:26Z"},{"id":197,"issue_id":"orch-cli-ate","author":"dylanconlin","text":"Phase: Planning - Starting investigation into spawn context switch prevention feature","created_at":"2025-12-08T22:10:08Z"},{"id":198,"issue_id":"orch-cli-ate","author":"dylanconlin","text":"investigation_path: /Users/dylanconlin/Documents/personal/orch-cli/.kb/investigations/2025-12-08-inv-test-spawn-context-switch-prevention.md","created_at":"2025-12-08T22:10:19Z"},{"id":199,"issue_id":"orch-cli-ate","author":"dylanconlin","text":"Phase: Complete - Verified spawn context switch prevention feature works correctly. Added 6 new unit tests covering all scenarios: context mismatch (skip switch), context match (proceed), context unavailable (proceed), and flag disabled. All 28 tests pass. Investigation confirms feature properly prevents race conditions when user switches orchestrator context after spawning.","created_at":"2025-12-08T22:12:37Z"}]}
{"id":"orch-cli-avs","title":"orch complete closes issues without verifying work was done","description":"## Problem\n\n`orch complete` closed beads issues even when:\n1. No WORKSPACE.md was created (agent never tracked work)\n2. No commits were made\n3. Actual implementation work was never done\n\n## Evidence\n\nIn price-watch project (2025-12-04):\n- pw-5mi, pw-v92, pw-cf8 all closed via `orch complete`\n- All 3 workspaces had only SPAWN_CONTEXT.md (no WORKSPACE.md)\n- Zero commits related to the work\n- Actual configs still use base parts (work never done)\n\n## Expected Behavior\n\n`orch complete` should fail or warn if:\n1. WORKSPACE.md doesn't exist (agent never started tracking)\n2. No commits since spawn time\n3. Phase is not 'Complete' in WORKSPACE.md\n\n## Current Behavior\n\n`orch complete` closes the beads issue based solely on agent-id existing in registry, without verifying deliverables.\n\n## Impact\n\nWork gets lost - issues appear done but aren't. Discovered during post-session audit when 5 configs still needed updates despite 3 'completed' issues.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-04T15:28:05.075002-08:00","updated_at":"2025-12-05T12:26:05.726433-08:00","closed_at":"2025-12-05T12:26:05.726433-08:00","close_reason":"Fixed: verify_agent_work() now runs before closing beads issues in async mode"}
{"id":"orch-cli-awj","title":"Per-project workers sessions with pinned servers window","description":"","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-07T10:46:17.214945-08:00","updated_at":"2025-12-07T22:38:42.200901-08:00","closed_at":"2025-12-07T22:38:42.200901-08:00","close_reason":"Implemented: per-project workers-{project}.yml configs with pinned servers window","comments":[{"id":169,"issue_id":"orch-cli-awj","author":"dylanconlin","text":"Phase: Planning - Exploring spawn.py and tmux integration for per-project workers sessions","created_at":"2025-12-07T18:46:23Z"},{"id":170,"issue_id":"orch-cli-awj","author":"dylanconlin","text":"Phase: Implementation - Starting TDD cycle. Pre-impl exploration: reading existing tests and spawn_in_tmux flow","created_at":"2025-12-07T18:47:00Z"},{"id":171,"issue_id":"orch-cli-awj","author":"dylanconlin","text":"Phase: Validation - Implementation complete. All 57 core spawn tests pass. TDD cycle complete (19 new tests + 38 existing tests).","created_at":"2025-12-07T18:53:10Z"},{"id":172,"issue_id":"orch-cli-awj","author":"dylanconlin","text":"Phase: Complete - Implemented per-project workers sessions with pinned servers window. Created tmuxinator.py module, updated spawn_in_tmux() to use per-project sessions, 19 new tests + 38 existing tests pass. Commit b89e9b9.","created_at":"2025-12-07T18:53:44Z"},{"id":173,"issue_id":"orch-cli-awj","author":"dylanconlin","text":"Phase: Planning - debugging switch_workers_client switches wrong tmux client","created_at":"2025-12-07T19:05:49Z"},{"id":174,"issue_id":"orch-cli-awj","author":"dylanconlin","text":"investigation_path: /Users/dylanconlin/Documents/personal/orch-cli/.kb/investigations/simple/2025-12-07-switch-workers-client-switches-wrong.md","created_at":"2025-12-07T19:05:56Z"},{"id":175,"issue_id":"orch-cli-awj","author":"dylanconlin","text":"Self-review passed:\n- Root cause addressed: Yes - exclude current client prevents orchestrator self-selection\n- No debug code left: Yes - no console.log/print/debugger statements\n- No temporary workarounds: Yes - clean implementation\n- Regression test exists: Yes - test_switch_workers_client_excludes_current_client\n- Investigation documented: Yes - .kb/investigations/simple/2025-12-07-switch-workers-client-switches-wrong.md\n- Pattern scope verified: Only 2 instances of startswith('workers'), both fixed\n- No discovered work items - fix was self-contained","created_at":"2025-12-07T19:17:08Z"},{"id":176,"issue_id":"orch-cli-awj","author":"dylanconlin","text":"Phase: Complete - Root cause: switch_workers_client() selected first workers* client without excluding current client (orchestrator), causing orchestrator to switch instead of workers. Fix: Exclude current client TTY from selection. Tests passing, 4 new tests added.","created_at":"2025-12-07T19:17:15Z"}]}
{"id":"orch-cli-b05","title":"orch spawn: auto-initialize .orch/ in repos without setup","description":"When running orch spawn in a repo without .orch/, automatically initialize it instead of failing.\n\nSmart initialization should:\n- Create minimal .orch/ structure\n- Maybe prompt for project name/type\n- Handle beads init if needed\n- Get user productive immediately\n\nCurrent behavior: fails with unhelpful error when .orch/ missing\nDesired: seamless first-time setup","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-08T13:03:30.138676-08:00","updated_at":"2025-12-08T13:03:30.138676-08:00"}
{"id":"orch-cli-b3w","title":"orch complete fails for ad-hoc spawns without WORKSPACE.md","description":"When agents are spawned ad-hoc (without --issue), there's no beads_id. Verification currently requires either WORKSPACE.md OR beads_id to verify completion. Since WORKSPACE.md is no longer created (Dec 4 fix), ad-hoc spawns can't complete even when commits exist. Fix: Allow completion when commits exist since spawn time, regardless of beads_id.","notes":"workspace: .orch/workspace/feat-orch-complete-fails-0402-05dec","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-05T16:06:43.345237-08:00","updated_at":"2025-12-06T23:53:30.70041-08:00","closed_at":"2025-12-06T23:53:30.70041-08:00","close_reason":"Verified fixed: completion now checks deliverables instead of WORKSPACE.md","comments":[{"id":102,"issue_id":"orch-cli-b3w","author":"dylanconlin","text":"Phase: Planning - Investigating orch complete failure for ad-hoc spawns without WORKSPACE.md","created_at":"2025-12-06T00:07:49Z"},{"id":103,"issue_id":"orch-cli-b3w","author":"dylanconlin","text":"Phase: Implementation - Writing failing test for ad-hoc spawn completion verification","created_at":"2025-12-06T00:08:28Z"},{"id":104,"issue_id":"orch-cli-b3w","author":"dylanconlin","text":"Phase: Planning - Fixing orch complete failure for ad-hoc spawns without WORKSPACE.md","created_at":"2025-12-06T00:11:31Z"},{"id":105,"issue_id":"orch-cli-b3w","author":"dylanconlin","text":"Phase: Implementing - Adding commit-based verification for ad-hoc spawns without WORKSPACE.md","created_at":"2025-12-06T00:12:26Z"},{"id":106,"issue_id":"orch-cli-b3w","author":"dylanconlin","text":"Phase: Validation - Implementation complete, running full test suite","created_at":"2025-12-06T00:12:55Z"},{"id":107,"issue_id":"orch-cli-b3w","author":"dylanconlin","text":"Phase: Complete - Fix implemented and validated. All test_complete.py tests passing (21/21). Ad-hoc spawns can now complete when commits exist since spawn time, even without WORKSPACE.md or beads_id. Commit: ec25814","created_at":"2025-12-06T00:14:23Z"},{"id":131,"issue_id":"orch-cli-b3w","author":"dylanconlin","text":"Phase: Planning - Investigating orch check/complete false positive for missing WORKSPACE.md (beads tracks lifecycle now)","created_at":"2025-12-07T03:03:08Z"},{"id":134,"issue_id":"orch-cli-b3w","author":"dylanconlin","text":"investigation_path: /Users/dylanconlin/Documents/personal/orch-cli/.kb/investigations/2025-12-06-orch-check-false-positive-workspace.md","created_at":"2025-12-07T03:04:27Z"},{"id":136,"issue_id":"orch-cli-b3w","author":"dylanconlin","text":"Phase: Complete - Root cause: patterns.py unconditionally validated WORKSPACE.md. Fix: Modified monitor.py:269 to skip workspace checks when agent has beads_id. Investigation complete with 90% confidence. All monitoring tests pass (43/43).","created_at":"2025-12-07T03:08:55Z"}]}
{"id":"orch-cli-b4x","title":"Update skills to use beads comments instead of WORKSPACE.md","description":"## Context\nPhase 2+3 removed WORKSPACE.md creation from spawn, but skill guidance still tells agents to update workspace files.\n\n## Gap\n- spawn.py no longer creates WORKSPACE.md ‚úì\n- orch check/complete read from beads ‚úì\n- Skills still reference WORKSPACE.md and tell agents to update it ‚úó\n\n## Affected Skills (10+)\n- feature-impl\n- architect\n- investigation\n- codebase-audit\n- systematic-debugging\n- and others\n\n## Scope\n- Update all spawnable skills to use `bd comment \u003cid\u003e` for progress\n- Remove WORKSPACE.md references from skill templates\n- Skills should guide agents to report phase transitions via beads\n\n## Source Location\nSkills source: ~/orch-knowledge/skills/src/\nBuild command: `orch build skills`","notes":"workspace: .orch/workspace/feat-update-skills-use-beads-02dec","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-02T16:22:26.78418-08:00","updated_at":"2025-12-03T08:13:31.240179-08:00","closed_at":"2025-12-03T08:13:31.240179-08:00","close_reason":"Resolved via orch complete","comments":[{"id":25,"issue_id":"orch-cli-b4x","author":"dylanconlin","text":"Phase: Planning - LilacLake starting work. Analyzing skill source structure in orch-knowledge.","created_at":"2025-12-03T00:27:59Z"},{"id":26,"issue_id":"orch-cli-b4x","author":"dylanconlin","text":"Phase: Implementing - Analyzed 7 skills. Changes: Remove workspace deliverables, add bd comment guidance for progress tracking. Starting with feature-impl template.","created_at":"2025-12-03T00:29:08Z"},{"id":27,"issue_id":"orch-cli-b4x","author":"dylanconlin","text":"Phase: Complete - All 7 spawnable skills updated to use bd comment for progress tracking. Removed WORKSPACE.md as required deliverable. Changes committed to orch-knowledge repo (85ab7e6).","created_at":"2025-12-03T00:40:41Z"}]}
{"id":"orch-cli-bau","title":"Set up Homebrew tap for kb-cli","description":"Create homebrew tap for easy kb-cli installation: brew install dylanconlin/tap/kb","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-03T15:39:26.400051-08:00","updated_at":"2025-12-03T15:41:19.443603-08:00","closed_at":"2025-12-03T15:41:19.443603-08:00","close_reason":"Not needed - keeping local","dependencies":[{"issue_id":"orch-cli-bau","depends_on_id":"orch-cli-jnm","type":"blocks","created_at":"2025-12-03T15:40:26.19231-08:00","created_by":"daemon"}]}
{"id":"orch-cli-bha","title":"Agents complete work but skip completion protocol (no WORKSPACE.md, no Phase: Complete)","description":"## Problem\nAgents finish their actual work (commits, tests pass) but don't follow completion protocol:\n- ‚ùå Never create WORKSPACE.md\n- ‚ùå Never mark Phase: Complete\n- ‚ùå Sit idle at prompt instead of exiting\n\nThis leaves agents in limbo - work is done but orch system can't detect completion properly.\n\n## Example\nfeat-simplify-coll-run-04dec:\n- ‚úÖ Committed work (607a142 - simplified 3 collection run configs)\n- ‚úÖ Tests passed\n- ‚ùå No WORKSPACE.md created\n- ‚ùå No Phase: Complete\n- ‚ùå Still at prompt (12% context left)\n\n## Root Cause Candidates\n1. Skill instructions not prominent enough about workspace/phase requirements\n2. Agent context exhaustion before reaching completion steps\n3. Missing enforcement in spawn context\n4. Agent confused about when to create WORKSPACE.md vs just work\n\n## Impact\n- Manual intervention required to detect and clean up\n- orch complete can't auto-verify\n- Work gets stuck in limbo state","notes":"workspace: .orch/workspace/feat-agents-complete-wor-2922-04dec","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-04T14:06:44.961496-08:00","updated_at":"2025-12-04T15:31:36.801683-08:00","closed_at":"2025-12-04T15:31:36.801683-08:00","close_reason":"Resolved via orch complete","comments":[{"id":66,"issue_id":"orch-cli-bha","author":"dylanconlin","text":"Phase: Planning - Investigating why agents skip completion protocol","created_at":"2025-12-04T22:07:17Z"},{"id":67,"issue_id":"orch-cli-bha","author":"dylanconlin","text":"Phase: Planning - Investigating why agents skip completion protocol (no WORKSPACE.md, no Phase: Complete)","created_at":"2025-12-04T22:07:57Z"},{"id":68,"issue_id":"orch-cli-bha","author":"dylanconlin","text":"Phase: Implementing - Investigation complete. Root cause: completion instructions buried 2000+ lines into SPAWN_CONTEXT. Fix: Add prominent SESSION COMPLETE PROTOCOL block early in spawn prompt (mirrors FIRST 3 ACTIONS pattern).","created_at":"2025-12-04T22:09:58Z"},{"id":69,"issue_id":"orch-cli-bha","author":"dylanconlin","text":"Phase: Complete - Added prominent SESSION COMPLETE PROTOCOL block to spawn_prompt.py. Now appears immediately after FIRST 3 ACTIONS block so agents read completion instructions early. All tests pass (8/8). Commit: bd17962","created_at":"2025-12-04T22:13:44Z"}]}
{"id":"orch-cli-bl2","title":"orch spawn --issue should refuse closed issues","description":"**Problem:** Can spawn agents for already-closed beads issues, wasting time.\n\n**Current behavior:** `orch spawn --issue ok-2vb` proceeds even if ok-2vb is closed.\n\n**Expected:** Refuse with clear message: 'Issue ok-2vb is already closed. Use --force to spawn anyway.'\n\n**Evidence:** Session post-mortem 2025-12-07 - attempted spawn for closed issue.","notes":"workspace: .orch/workspace/feat-orch-spawn-issue-refuse-08dec","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-07T22:13:58.254271-08:00","updated_at":"2025-12-08T08:14:10.276711-08:00","closed_at":"2025-12-08T08:14:10.276711-08:00","close_reason":"Resolved via orch complete","dependencies":[{"issue_id":"orch-cli-bl2","depends_on_id":"orch-cli-y59","type":"parent-child","created_at":"2025-12-07T22:26:29.390473-08:00","created_by":"daemon"}],"comments":[{"id":185,"issue_id":"orch-cli-bl2","author":"dylanconlin","text":"agent_metadata: {\"agent_id\": \"feat-orch-spawn-issue-refuse-08dec\", \"window_id\": \"@431\", \"skill\": \"feature-impl\", \"project_dir\": \"/Users/dylanconlin/Documents/personal/orch-cli\"}","created_at":"2025-12-08T16:00:20Z"},{"id":187,"issue_id":"orch-cli-bl2","author":"dylanconlin","text":"Phase: Planning - Analyzing spawn command issue handling","created_at":"2025-12-08T16:00:39Z"},{"id":188,"issue_id":"orch-cli-bl2","author":"dylanconlin","text":"Phase: Implementation (TDD) - Writing failing test for closed issue rejection","created_at":"2025-12-08T16:01:10Z"},{"id":190,"issue_id":"orch-cli-bl2","author":"dylanconlin","text":"Phase: Complete - Added --force flag to allow spawning closed issues. Implementation: spawn_commands.py (lines 94, 197-201). Tests: 4 new tests in TestSpawnClosedIssueRefusal, 3 existing tests updated.","created_at":"2025-12-08T16:04:24Z"}]}
{"id":"orch-cli-btv","title":"Add Request‚ÜíBeads‚ÜíSpawn decision tree to orchestrator skill","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-02T16:42:07.91462-08:00","updated_at":"2025-12-02T16:42:14.772276-08:00","closed_at":"2025-12-02T16:42:14.772276-08:00","close_reason":"Added 'Request ‚Üí Beads ‚Üí Spawn' section to orchestrator skill. Provides decision tree for when user makes ad-hoc requests: 1) check for existing beads issue, 2) assess if substantial work, 3) create issue if needed before spawning. Includes quick reference table for common request types."}
{"id":"orch-cli-bve","title":"Phase 3: Update orch commands to read from beads","description":"## Context\nFrom investigation: .orch/investigations/design/2025-12-01-orch-cli-role-in-agent-ecosystem.md\n\nFinal phase: orch commands read/write beads instead of workspace files.\n\n## Scope\n- `orch status` reads from `bd list` instead of parsing workspace files\n- `orch complete` runs `bd close` with summary\n- `orch check` shows beads issue details\n\n## Acceptance Criteria\n- [ ] `orch status` shows agent state from beads\n- [ ] `orch complete` closes associated beads issue\n- [ ] `orch check` displays beads issue content\n- [ ] No workspace file parsing in monitoring_commands.py","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-01T11:59:25.356067-08:00","updated_at":"2025-12-02T15:21:56.266939-08:00","closed_at":"2025-12-02T15:21:56.266939-08:00","close_reason":"Implemented in commit f021e74","dependencies":[{"issue_id":"orch-cli-bve","depends_on_id":"orch-cli-csx","type":"blocks","created_at":"2025-12-01T11:59:31.373565-08:00","created_by":"daemon"}],"comments":[{"id":15,"issue_id":"orch-cli-bve","author":"dylanconlin","text":"Phase: Complete - Added beads-based phase tracking: get_phase_from_comments(), has_phase_complete(). orch complete now verifies Phase: Complete before closing. All 34 beads tests passing.","created_at":"2025-12-02T23:21:56Z"}]}
{"id":"orch-cli-cdu","title":"Remove WORKSPACE.md - use beads comments as only agent state","description":"","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-06T20:19:22.754223-08:00","updated_at":"2025-12-06T23:51:33.724263-08:00","closed_at":"2025-12-06T23:51:33.724263-08:00","close_reason":"Completed: d55de9a, a94f6a6 - WORKSPACE.md eliminated, beads is source of truth","comments":[{"id":138,"issue_id":"orch-cli-cdu","author":"dylanconlin","text":"Phase: Planning - Exploring codebase to identify all WORKSPACE.md usages","created_at":"2025-12-07T04:19:29Z"},{"id":141,"issue_id":"orch-cli-cdu","author":"dylanconlin","text":"Phase: Implementing - Analysis complete. Found 18 files with WORKSPACE.md references. Key changes: workspace.py (parsing removal), verification.py (beads-first), monitoring_commands.py (beads for phase), registry.py (beads for state), spawn_prompt.py (instructions cleanup). Most files already have comments indicating beads is source of truth.","created_at":"2025-12-07T04:20:21Z"},{"id":143,"issue_id":"orch-cli-cdu","author":"dylanconlin","text":"Phase: Validating - Core changes complete: verification.py (beads-first), monitor.py (removed WORKSPACE.md parsing), monitoring_commands.py (removed WORKSPACE.md refs from check/resume). Tests: 1009 passed, some pre-existing failures unrelated to my changes.","created_at":"2025-12-07T04:29:44Z"},{"id":144,"issue_id":"orch-cli-cdu","author":"dylanconlin","text":"Phase: Complete - Removed WORKSPACE.md dependency from core verification and monitoring paths. Beads comments are now the primary source of truth for agent state.","created_at":"2025-12-07T04:30:43Z"},{"id":145,"issue_id":"orch-cli-cdu","author":"dylanconlin","text":"Phase: Planning - Investigating all WORKSPACE.md references in codebase","created_at":"2025-12-07T04:38:49Z"},{"id":146,"issue_id":"orch-cli-cdu","author":"dylanconlin","text":"investigation_path: /Users/dylanconlin/Documents/personal/orch-cli/.kb/investigations/2025-12-06-eliminate-workspace-entirely-from-orch.md","created_at":"2025-12-07T04:39:41Z"},{"id":147,"issue_id":"orch-cli-cdu","author":"dylanconlin","text":"Phase: Investigation - Identified all WORKSPACE.md references, starting implementation","created_at":"2025-12-07T04:39:42Z"},{"id":148,"issue_id":"orch-cli-cdu","author":"dylanconlin","text":"Phase: Implementing - Starting WORKSPACE.md removal from workspace.py","created_at":"2025-12-07T04:40:59Z"},{"id":149,"issue_id":"orch-cli-cdu","author":"dylanconlin","text":"Phase: Validating - All direct tests passing (41 tests), checking for import errors","created_at":"2025-12-07T04:50:49Z"},{"id":150,"issue_id":"orch-cli-cdu","author":"dylanconlin","text":"Phase: Complete - WORKSPACE.md eliminated, 41 tests passing, decision recorded","created_at":"2025-12-07T04:51:53Z"}]}
{"id":"orch-cli-cfh","title":"Deprecate orch knowledge commands in favor of kb","description":"Remove or deprecate: orch create-investigation, orch create-decision, orch search. Add deprecation warnings pointing to kb equivalents.","notes":"workspace: .orch/workspace/feat-deprecate-orch-knowledge-03dec","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-03T15:39:23.729737-08:00","updated_at":"2025-12-03T15:55:38.544374-08:00","closed_at":"2025-12-03T15:55:38.544374-08:00","close_reason":"Resolved via orch complete","dependencies":[{"issue_id":"orch-cli-cfh","depends_on_id":"orch-cli-jnm","type":"blocks","created_at":"2025-12-03T15:40:23.723769-08:00","created_by":"daemon"}],"comments":[{"id":39,"issue_id":"orch-cli-cfh","author":"dylanconlin","text":"Phase: Planning - Workspace created, beginning investigation of commands to deprecate","created_at":"2025-12-03T23:42:51Z"},{"id":40,"issue_id":"orch-cli-cfh","author":"dylanconlin","text":"Phase: Implementing (TDD) - Adding deprecation warnings to orch create-investigation, create-decision, and search commands pointing to kb equivalents","created_at":"2025-12-03T23:43:49Z"},{"id":41,"issue_id":"orch-cli-cfh","author":"dylanconlin","text":"Phase: Validation - Deprecation warnings implemented, all 7 new tests + 62 related tests passing. Commands still work, just show warnings.","created_at":"2025-12-03T23:45:33Z"},{"id":42,"issue_id":"orch-cli-cfh","author":"dylanconlin","text":"Phase: Complete - All deprecation warnings implemented and tested. Commands show yellow warning pointing to kb CLI equivalent + install instructions. 7 new tests + 69 related tests passing. Commit: 1f5a817","created_at":"2025-12-03T23:47:16Z"}]}
{"id":"orch-cli-cny","title":"Audit SPAWN_CONTEXT.md quality from price-watch workers (Dec 2-4)","description":"Audit the SPAWN_CONTEXT.md files from workers spawned Monday (Dec 2) through today (Dec 4) in the price-watch project.\n\n## Project Location\n/Users/dylanconlin/Documents/work/SendCutSend/scs-special-projects/price-watch\n\n## Audit Questions\n- Are we including too much info? (bloat, cognitive overload)\n- Just enough? (right level of context)\n- Are there outdated instructions that should be removed?\n- What's working well vs causing confusion?\n\n## Deliverables\n- List of SPAWN_CONTEXT.md files audited (with dates/agents)\n- Findings: what's excessive, what's missing, what's outdated\n- Recommendations for spawn_prompt.py / template improvements\n\n## Note\nThis is meta-work about orch system effectiveness. Findings feed back into orch-cli spawn prompt generation.","notes":"workspace: .orch/workspace/feat-audit-spawn-context-04dec","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-04T15:46:24.568279-08:00","updated_at":"2025-12-04T15:54:14.975917-08:00","closed_at":"2025-12-04T15:54:14.975917-08:00","close_reason":"Duplicate - audit already completed, see .orch/investigations/simple/2025-12-04-audit-spawn-context-quality.md","comments":[{"id":73,"issue_id":"orch-cli-cny","author":"dylanconlin","text":"Phase: Planning - Auditing SPAWN_CONTEXT.md files from price-watch workers Dec 2-4","created_at":"2025-12-04T23:47:18Z"},{"id":74,"issue_id":"orch-cli-cny","author":"dylanconlin","text":"Phase: Complete - Investigation produced findings: SPAWN_CONTEXT.md files are 4x bloated for feature-impl (1600+ lines when 400 needed). Main issues: (1) meta-orchestration boilerplate in all contexts, (2) all skill phases embedded regardless of config, (3) unfilled placeholders. Recommendations: P0=filter skill phases, P1=conditional meta-orch boilerplate, P2=remove placeholders, P3=scope-aware Agent Mail.","created_at":"2025-12-04T23:49:52Z"}]}
{"id":"orch-cli-csx","title":"Phase 2: Remove workspace file creation from spawn","description":"## Context\nFrom investigation: .orch/investigations/design/2025-12-01-orch-cli-role-in-agent-ecosystem.md\n\nAfter beads-first spawning is default, remove workspace file creation.\n\n## Scope\n- Stop creating WORKSPACE.md in spawn.py\n- SPAWN_CONTEXT.md can still exist (injected into agent, ephemeral)\n- Or move SPAWN_CONTEXT into beads issue description\n\n## Acceptance Criteria\n- [ ] spawn.py no longer creates .orch/workspace/{name}/WORKSPACE.md\n- [ ] Agents can still function without workspace file\n- [ ] All execution state flows through beads","notes":"workspace: .orch/workspace/feat-phase-remove-workspace-02dec\nCombined with orch-cli-bve (Phase 3) per Dylan's direction","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-01T11:59:24.259814-08:00","updated_at":"2025-12-03T12:34:53.268552-08:00","closed_at":"2025-12-03T12:34:53.268552-08:00","close_reason":"Resolved via orch complete","dependencies":[{"issue_id":"orch-cli-csx","depends_on_id":"orch-cli-iv6","type":"blocks","created_at":"2025-12-01T11:59:31.351404-08:00","created_by":"daemon"}],"comments":[{"id":9,"issue_id":"orch-cli-csx","author":"dylanconlin","text":"Phase: Planning - Agent GreenHill analyzing spawn.py for workspace creation code","created_at":"2025-12-02T22:51:08Z"},{"id":11,"issue_id":"orch-cli-csx","author":"dylanconlin","text":"Phase: Implementing - Removing create_workspace() calls from spawn.py","created_at":"2025-12-02T22:51:59Z"},{"id":12,"issue_id":"orch-cli-csx","author":"dylanconlin","text":"Phase: Complete - Removed create_workspace() calls from spawn.py. All tests pass.","created_at":"2025-12-02T22:57:45Z"},{"id":13,"issue_id":"orch-cli-csx","author":"dylanconlin","text":"SCOPE EXPANSION: Now includes Phase 3 (orch-cli-bve) - Update orch commands to read from beads","created_at":"2025-12-02T23:13:57Z"},{"id":14,"issue_id":"orch-cli-csx","author":"dylanconlin","text":"Phase: Complete - WORKSPACE.md creation removed from spawn.py. All calls replaced with mkdir. E2E tests updated.","created_at":"2025-12-02T23:21:49Z"}]}
{"id":"orch-cli-cux","title":"Auto-detect stale agents: Phase Unknown + no activity \u003e4h","description":"**Problem:** Agents with 'Phase: Unknown' from previous sessions clutter orch status.\n\n**Solution:** Detect stale agents based on:\n- Phase: Unknown (never set phase)\n- No tmux window activity for \u003e4 hours\n- Spawned \u003e24 hours ago\n\nMark these as 'stale' in status output.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-07T22:26:04.168962-08:00","updated_at":"2025-12-07T22:26:04.168962-08:00"}
{"id":"orch-cli-dal","title":"orch spawn --project fails for current directory project","description":"Running 'orch spawn -i \"task\" --project orch-cli' from within orch-cli directory fails with 'Project orch-cli not found'. But auto-detection works ('Auto-detected project: orch-cli'). The --project flag should work for the current directory's project name.","notes":"workspace: .orch/workspace/feat-orch-spawn-project-fails-03dec","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-03T21:32:52.337206-08:00","updated_at":"2025-12-06T23:52:55.832582-08:00","closed_at":"2025-12-06T23:52:55.832582-08:00","close_reason":"Verified fixed: --project flag now works for current directory projects","comments":[{"id":48,"issue_id":"orch-cli-dal","author":"dylanconlin","text":"Phase: Planning - Setting up workspace, investigating --project flag handling","created_at":"2025-12-04T05:34:25Z"},{"id":50,"issue_id":"orch-cli-dal","author":"dylanconlin","text":"Phase: Implementing - Root cause identified: get_project_dir() doesn't have fallback for cwd like detect_project_from_cwd() does. Writing failing test first.","created_at":"2025-12-04T05:35:22Z"},{"id":52,"issue_id":"orch-cli-dal","author":"dylanconlin","text":"Phase: Validation - Implementation complete. 4 new tests added, all 143 spawn tests pass. Beginning self-review.","created_at":"2025-12-04T05:37:58Z"},{"id":53,"issue_id":"orch-cli-dal","author":"dylanconlin","text":"Phase: Complete - Fixed get_project_dir() to fall back to cwd when project name matches directory name with .orch/.\n\nCommits:\n- 16484a2 test: add failing tests for get_project_dir() cwd fallback\n- 1b024a9 feat: add cwd fallback to get_project_dir() for unlisted projects\n\nTests: 143 spawn tests passing (4 new tests for this fix)","created_at":"2025-12-04T05:38:57Z"}]}
{"id":"orch-cli-dgy","title":"Epic: Simplify orch-cli from 20K to ~5K lines","description":"Architectural simplification of orch-cli. Beads becomes single source of truth for agent lifecycle.\n\n## Goal\nReduce to ~5K essential lines (spawn mechanics only). Delete lifecycle/state modules that duplicate beads.\n\n## What to DELETE (~7K lines):\n- registry.py (agent state ‚Üí beads tracks this)\n- complete.py (‚Üí beads auto-close on Phase: Complete)\n- monitoring_commands.py (‚Üí bd show, bd list)\n- beads_integration.py (wrapper unnecessary)\n- monitor.py, history.py, cleanup_daemon.py, verification.py\n- roadmap.py, roadmap_*.py (replaced by beads)\n\n## What to KEEP (~5K lines):\n- spawn.py, spawn_prompt.py (skill embedding, SPAWN_CONTEXT)\n- skill_discovery.py (skill loading)\n- tmux_utils.py, send.py, tail.py (agent interaction)\n\n## Success Criteria\n- orch-cli under 5K lines\n- No 'Phase: Unknown' stale agents\n- Single source of truth (beads) for agent state\n\n## Reference\n- .kb/investigations/2025-12-07-path-deep-dive-beads-lifecycle.md\n- .kb/investigations/design/2025-12-07-minimal-orch-cli-after-beads.md","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-07T22:14:15.118289-08:00","updated_at":"2025-12-07T22:14:15.118289-08:00"}
{"id":"orch-cli-djf","title":"Implement kb CLI commands (TDD)","description":"","notes":"workspace: .orch/workspace/feat-impl-cli-commands-tdd-03dec","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-03T15:19:59.17821-08:00","updated_at":"2025-12-03T15:33:28.526318-08:00","closed_at":"2025-12-03T15:33:28.526318-08:00","close_reason":"Resolved via orch complete","comments":[{"id":35,"issue_id":"orch-cli-djf","author":"dylanconlin","text":"Phase: Planning - Read design doc. QUESTION: Design recommends standalone Go kb-cli repo, but spawned in Python orch-cli. Should I: (A) Add Python kb commands to orch-cli temporarily, (B) Create separate Go kb-cli repo, or (C) Other approach?","created_at":"2025-12-03T23:21:59Z"},{"id":36,"issue_id":"orch-cli-djf","author":"dylanconlin","text":"Clarification received: Go standalone repo. Planning kb-cli implementation following design document.","created_at":"2025-12-03T23:25:37Z"},{"id":37,"issue_id":"orch-cli-djf","author":"dylanconlin","text":"Phase: Implementing - Creating Go project structure at ~/Documents/personal/kb-cli","created_at":"2025-12-03T23:26:11Z"},{"id":38,"issue_id":"orch-cli-djf","author":"dylanconlin","text":"Phase: Complete - kb-cli Go repo created at ~/Documents/personal/kb-cli with 16 passing tests. Commands: kb create, kb list, kb search, kb templates. TDD approach, follows design doc recommendations.","created_at":"2025-12-03T23:31:57Z"}]}
{"id":"orch-cli-e12","title":"Validate simplified orch with real work (2-4 weeks)","description":"After simplification, use simplified orch for real work to validate:\n- All essential features work\n- No missing capabilities\n- Document minimal feature set\n\nThis is the validation gate before optional Go port.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-07T22:26:04.296429-08:00","updated_at":"2025-12-07T22:26:04.296429-08:00","dependencies":[{"issue_id":"orch-cli-e12","depends_on_id":"orch-cli-dgy","type":"parent-child","created_at":"2025-12-07T22:26:16.235324-08:00","created_by":"daemon"}]}
{"id":"orch-cli-eae","title":"Migrate artifact paths from .orch/ to .kb/ with fallback","description":"Migrate from .orch/investigations/ and .orch/decisions/ to .kb/ as canonical location.\n\nRequirements:\n1. .kb/ is the NEW canonical location for investigations and decisions\n2. Support both paths - check .kb/ first, fall back to .orch/ for legacy\n3. Update spawn_prompt.py to tell agents to create files in .kb/\n4. Update complete.py verification to check .kb/ first, then .orch/\n5. Update tests to use new paths\n6. Leave .orch/workspace/ alone (still in use for spawn prompts)\n\nFiles to change:\n- src/orch/complete.py (lines 162-166, 250-251)\n- src/orch/spawn_prompt.py (lines 261, 695, 914)\n- tests/test_backlog_resolution.py (~20 refs)\n- tests/test_skill_discovery.py (4 refs)\n- tests/test_context_ref_loading.py (5 refs)\n- tests/test_spawn_preview.py (2 refs)\n- tests/test_spawn_tmux.py (1 ref)","notes":"workspace: .orch/workspace/feat-migrate-artifact-paths-05dec","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-05T13:31:04.522123-08:00","updated_at":"2025-12-05T13:48:28.832721-08:00","closed_at":"2025-12-05T13:48:28.832721-08:00","close_reason":"Resolved via orch complete","comments":[{"id":96,"issue_id":"orch-cli-eae","author":"dylanconlin","text":"Phase: Planning - Analyzing codebase for .orch/ to .kb/ artifact path migration","created_at":"2025-12-05T21:32:29Z"},{"id":97,"issue_id":"orch-cli-eae","author":"dylanconlin","text":"Phase: Implementing - Starting TDD cycle. Plan: 1) Update complete.py (is_investigation_ref + find_investigation_file), 2) Update spawn_prompt.py (3 locations), 3) Update tests. Note: verification.py already has .kb/ fallback support.","created_at":"2025-12-05T21:33:17Z"},{"id":98,"issue_id":"orch-cli-eae","author":"dylanconlin","text":"Phase: Complete - Migrated artifact paths from .orch/ to .kb/ with fallback. Changes: complete.py (is_investigation_ref, find_investigation_file, surface_investigation_recommendations), spawn_prompt.py (2 locations). Added 12 new tests for .kb/ path support. All 66 related tests pass.","created_at":"2025-12-05T21:37:39Z"}]}
{"id":"orch-cli-fyp","title":"Show convergence status in orch status for parent issues","description":"Add discovered_from_children field to BeadsIssue dataclass. When agent was spawned from a parent issue, show convergence status in orch status output. Format: 'Issue ok-xyz has 2/5 children complete'. Helps orchestrators track multi-issue initiatives without manual bd tree calls.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-05T16:47:24.229981-08:00","updated_at":"2025-12-05T16:47:24.229981-08:00","labels":["P3,beads-integration"],"dependencies":[{"issue_id":"orch-cli-fyp","depends_on_id":"orch-cli-y59","type":"parent-child","created_at":"2025-12-07T22:26:29.431636-08:00","created_by":"daemon"}]}
{"id":"orch-cli-g1b","title":"Unify path conventions to .kb/ - remove .orch artifact references","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-06T20:19:09.254455-08:00","updated_at":"2025-12-06T23:51:34.723429-08:00","closed_at":"2025-12-06T23:51:34.723429-08:00","close_reason":"Completed: b762b45 - path conventions unified to .kb/","comments":[{"id":137,"issue_id":"orch-cli-g1b","author":"dylanconlin","text":"Phase: Planning - Exploring codebase for .orch artifact references to migrate to .kb/","created_at":"2025-12-07T04:19:15Z"},{"id":139,"issue_id":"orch-cli-g1b","author":"dylanconlin","text":"investigation_path: /Users/dylanconlin/Documents/personal/orch-cli/.kb/investigations/2025-12-06-unify-path-conventions-remove-orch.md","created_at":"2025-12-07T04:19:40Z"},{"id":140,"issue_id":"orch-cli-g1b","author":"dylanconlin","text":"Phase: Implementing - Updating path conventions to .kb/, removing .orch artifact references","created_at":"2025-12-07T04:20:17Z"},{"id":142,"issue_id":"orch-cli-g1b","author":"dylanconlin","text":"Phase: Complete - Updated DEFAULT_DELIVERABLES (empty path, beads tracking), synthesis.py decision paths (.kb/), and 8 test files. 52/52 core tests passing.","created_at":"2025-12-07T04:29:21Z"}]}
{"id":"orch-cli-gmy","title":"Remove /exit from worker spawn prompt instructions","description":"Workers cannot execute /exit - it's a slash command that requires prompt-level input, but workers can only output text. The instruction 'Run: /exit' in spawn prompts is architecturally impossible. See investigation: .kb/investigations/2025-12-05-investigate-worker-shutdown-exit-process.md\n\nImplementation:\n1. Update spawn_prompt.py:617-634 to remove /exit instruction\n2. Update SESSION COMPLETE PROTOCOL to clarify orchestrator handles closure\n3. Update tests/test_spawn_prompt.py - remove /exit assertions\n4. Search for other /exit references in skill templates","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-05T13:16:37.169695-08:00","updated_at":"2025-12-05T13:16:46.605332-08:00"}
{"id":"orch-cli-h7s","title":"Investigate SCS pricing system - variables, calculation logic, tuning options","description":"Investigate how SendCutSend calculates prices. Need to understand:\n- What variables affect pricing\n- Where pricing logic lives in the codebase\n- What parameters can be tweaked/tuned\n- How different materials/processes affect cost\n\nContext: sendcutsend repo at ~/Documents/work/SendCutSend/sendcutsend (no .orch setup - use Task tool for exploration)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T12:29:50.108404-08:00","updated_at":"2025-12-08T13:03:28.830272-08:00","closed_at":"2025-12-08T13:03:28.830272-08:00","close_reason":"Wrong interpretation - was for auto-init feature, not SCS pricing"}
{"id":"orch-cli-ibc","title":"P3: Make Agent Mail section scope-aware","description":"From audit: .orch/investigations/simple/2025-12-04-audit-spawn-context-quality.md\n\n## Problem\nAgent Mail section (35 lines) added to ALL contexts, even for quick debugging tasks or simple investigations that complete in \u003c1 hour without needing coordination.\n\n## Solution\nOnly include Agent Mail section when:\n- Session scope is Medium or Large\n- Task involves multi-agent coordination\n- Explicitly requested via flag\n\n## Impact\nReduces overhead for simple tasks, cleaner context for short-lived agents","notes":"workspace: .orch/workspace/feat-make-agent-mail-section-04dec","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-04T15:55:04.520258-08:00","updated_at":"2025-12-04T16:18:48.470451-08:00","closed_at":"2025-12-04T16:18:48.470451-08:00","close_reason":"Resolved via orch complete","comments":[{"id":78,"issue_id":"orch-cli-ibc","author":"dylanconlin","text":"Phase: Planning - Analyzing spawn_prompt.py to make Agent Mail section scope-aware","created_at":"2025-12-05T00:03:33Z"},{"id":82,"issue_id":"orch-cli-ibc","author":"dylanconlin","text":"Phase: Implementing - Adding --agent-mail flag to spawn command and conditionally including Agent Mail section based on scope/flag","created_at":"2025-12-05T00:06:06Z"},{"id":86,"issue_id":"orch-cli-ibc","author":"dylanconlin","text":"Phase: Complete - Implemented scope-aware Agent Mail section. Added --agent-mail flag and auto-include for 3+ phases. 6 tests pass.","created_at":"2025-12-05T00:10:48Z"}]}
{"id":"orch-cli-iej","title":"orch status incorrectly shows agents as completed immediately after spawn","description":"## Bug\nWhen spawning agents with `orch spawn`, the status output immediately shows them as 'COMPLETED THIS SESSION' even though they're actively running in their tmux window.\n\n## Observed Behavior\n1. Run `orch spawn feature-impl 'task' --issue pw-kzg`\n2. Spawn output shows success\n3. Status section at bottom shows:\n   ```\n   ‚úÖ COMPLETED THIS SESSION (1)\n     feat-scraper-action-3950-08dec - '...' (just now)\n   ```\n4. But agent IS actually running in workers-price-watch:5\n\n## Expected Behavior\nAgent should show under 'WORKING' section until it actually completes.\n\n## Impact\n- Misleading status makes orchestrator think agent finished instantly\n- Led to incorrectly running `orch complete` on active agents\n- Closed beads issues prematurely\n\n## Reproduction\nObserved in price-watch project spawning pw-kzg feature-impl agents.\n\n## Transcript\nFull orchestrator session transcript showing the issue:\n`/Users/dylanconlin/Documents/work/SendCutSend/scs-special-projects/price-watch/orchestrator-transcript-for-orch-cli-iej.txt`","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-08T13:44:48.760021-08:00","updated_at":"2025-12-08T13:59:50.592857-08:00","closed_at":"2025-12-08T13:59:50.592857-08:00","close_reason":"Fixed - tested and verified agents now show as WORKING after spawn"}
{"id":"orch-cli-inj","title":"Reduce spawn commit check friction: skip for open/in_progress issues, suppress warning with -y","description":"**Problem:**\nCommit check finds commits that *created* a beads issue, not just completion commits. Causes 6+ tool calls to spawn one agent.\n\n**Root cause (from investigation):**\n1. git log --grep finds ANY commit mentioning issue ID\n2. -y flag only skips prompt, not warning output\n\n**Fix (from investigation):**\n1. Skip commit check entirely if issue.status is 'open' or 'in_progress'\n2. Move warning output inside 'if not yes:' block\n\n**Files to change:**\n- src/orch/spawn_commands.py (lines ~198-215)\n\n**Success criteria:**\n- Spawning from open/in_progress issue shows no warning\n- -y flag produces no warning output\n- Closed issues still show warning (catches mistakes)\n\n**Reference:** orch-knowledge/.kb/investigations/design/2025-12-07-orch-spawn-commit-check-friction.md","notes":"workspace: .orch/workspace/feat-reduce-spawn-commit-07dec","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-07T16:10:03.536428-08:00","updated_at":"2025-12-07T16:32:15.680575-08:00","closed_at":"2025-12-07T16:32:15.680575-08:00","close_reason":"Resolved via orch complete","comments":[{"id":177,"issue_id":"orch-cli-inj","author":"dylanconlin","text":"agent_metadata: {\"agent_id\": \"feat-reduce-spawn-commit-07dec\", \"window_id\": \"@384\", \"skill\": \"feature-impl\", \"project_dir\": \"/Users/dylanconlin/Documents/personal/orch-cli\"}","created_at":"2025-12-08T00:10:12Z"},{"id":178,"issue_id":"orch-cli-inj","author":"dylanconlin","text":"Phase: Planning - Reading spawn_commands.py to understand commit check logic","created_at":"2025-12-08T00:10:31Z"},{"id":179,"issue_id":"orch-cli-inj","author":"dylanconlin","text":"Phase: Implementing - Writing tests for commit check status filtering and -y flag warning suppression","created_at":"2025-12-08T00:11:14Z"},{"id":180,"issue_id":"orch-cli-inj","author":"dylanconlin","text":"Phase: Validation - All tests passing. Implementation complete.","created_at":"2025-12-08T00:14:55Z"},{"id":181,"issue_id":"orch-cli-inj","author":"dylanconlin","text":"Phase: Complete - Implemented fix for spawn commit check friction: skip check for open/in_progress issues, suppress warning output with -y flag. All 5 new tests passing.","created_at":"2025-12-08T00:15:17Z"},{"id":182,"issue_id":"orch-cli-inj","author":"dylanconlin","text":"Phase: Implementation - Reading spawn_commands.py to implement status-based skip + -y suppression","created_at":"2025-12-08T00:25:37Z"},{"id":183,"issue_id":"orch-cli-inj","author":"dylanconlin","text":"Phase: Complete - Fix already implemented in commit 0a473f3. Status-based skip for open/in_progress issues working, -y flag suppresses all warning output. All 5 tests pass.","created_at":"2025-12-08T00:26:13Z"}]}
{"id":"orch-cli-iv6","title":"Phase 1: Make beads-first spawning the default","description":"## Context\nFrom investigation: .orch/investigations/design/2025-12-01-orch-cli-role-in-agent-ecosystem.md\n\nWorkspaces duplicate beads functionality. Converging workspace state into beads issues.\n\n## Scope\n- `orch spawn --issue bd-xxx` already works\n- Make it the default/primary path\n- Update agent guidance to write progress to beads comments instead of workspace\n\n## Acceptance Criteria\n- [ ] Spawning from beads issue is documented as preferred approach\n- [ ] Agent skill guidance updated to use `bd comment` for progress\n- [ ] SPAWN_CONTEXT template updated to reference beads issue","notes":"workspace: .orch/workspace/feat-phase-make-beads-first-02dec","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-01T11:59:13.391732-08:00","updated_at":"2025-12-03T12:34:41.078146-08:00","closed_at":"2025-12-03T12:34:41.078146-08:00","close_reason":"Resolved via orch complete","comments":[{"id":1,"issue_id":"orch-cli-iv6","author":"dylanconlin","text":"Phase: Implementing - spawn_prompt.py updated with BEADS PROGRESS TRACKING section. feature-impl skill template updated with Progress Tracking (Beads-First) section. All spawn tests passing.","created_at":"2025-12-02T20:17:34Z"},{"id":2,"issue_id":"orch-cli-iv6","author":"dylanconlin","text":"Phase: Complete - All acceptance criteria met. Commits: orch-cli@62e89a9 (spawn_prompt.py), meta-orchestration@45cc53e (feature-impl skill)","created_at":"2025-12-02T20:18:32Z"}]}
{"id":"orch-cli-j6o","title":"orch spawn: 'interactive' should be recognized as -i alias","description":"Running 'orch spawn interactive \"task\"' fails with 'Skill interactive not found'. Users expect 'interactive' to work like '-i' flag. Either add as skill alias or improve error message to suggest '-i'.","notes":"workspace: .orch/workspace/feat-orch-spawn-interactive-03dec","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-03T21:32:50.45037-08:00","updated_at":"2025-12-03T21:39:40.93458-08:00","closed_at":"2025-12-03T21:39:40.93458-08:00","close_reason":"Implemented 'interactive' as alias for -i flag in orch spawn. Users can now run 'orch spawn interactive task'. Commit 4fac01a.","comments":[{"id":47,"issue_id":"orch-cli-j6o","author":"dylanconlin","text":"Phase: Planning - RedLake starting work. Investigating spawn command structure.","created_at":"2025-12-04T05:34:22Z"},{"id":49,"issue_id":"orch-cli-j6o","author":"dylanconlin","text":"Phase: Implementing - Found skill lookup at spawn.py:1926-1928. Solution: treat 'interactive' as alias for -i flag in spawn_commands.py. TDD approach.","created_at":"2025-12-04T05:35:00Z"},{"id":51,"issue_id":"orch-cli-j6o","author":"dylanconlin","text":"Phase: Validation - Implementation complete. Added Mode 3b to spawn_commands.py to handle 'interactive' as alias. 8 new tests passing. Running validation.","created_at":"2025-12-04T05:37:49Z"},{"id":54,"issue_id":"orch-cli-j6o","author":"dylanconlin","text":"Phase: Complete - Commit 4fac01a. Added 'interactive' alias for -i flag. 8 new tests passing.","created_at":"2025-12-04T05:39:07Z"}]}
{"id":"orch-cli-jg8","title":"Test: verify beads-only tracking works","description":"","notes":"workspace: .orch/workspace/feat-test-verify-beads-only-04dec","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-04T11:13:57.00235-08:00","updated_at":"2025-12-04T11:45:17.500666-08:00","closed_at":"2025-12-04T11:45:17.500666-08:00","close_reason":"Resolved via orch complete","comments":[{"id":58,"issue_id":"orch-cli-jg8","author":"dylanconlin","text":"Phase: Planning - Understanding task scope for beads-only tracking verification","created_at":"2025-12-04T19:14:22Z"},{"id":59,"issue_id":"orch-cli-jg8","author":"dylanconlin","text":"Planning: Analyzing existing beads tests - found test_beads_integration.py and test_complete_beads_close.py","created_at":"2025-12-04T19:14:47Z"},{"id":60,"issue_id":"orch-cli-jg8","author":"dylanconlin","text":"Phase: Implementing - Tests pass (34/34). Identified gap: update_issue_status method has no test coverage","created_at":"2025-12-04T19:15:20Z"},{"id":61,"issue_id":"orch-cli-jg8","author":"dylanconlin","text":"Phase: Validation - Tests committed. Running final validation.","created_at":"2025-12-04T19:17:05Z"},{"id":62,"issue_id":"orch-cli-jg8","author":"dylanconlin","text":"Phase: Complete - Added 4 tests for update_issue_status method. All 38 beads tests pass. Commit: 7301501","created_at":"2025-12-04T19:17:23Z"}]}
{"id":"orch-cli-jjb","title":"P0: Filter skill phases to only configured ones in spawn prompt","description":"From audit: .orch/investigations/simple/2025-12-04-audit-spawn-context-quality.md\n\n## Problem\nfeature-impl embeds ALL 8 phases (~1490 lines) even when only 2 are configured via --phases.\n51% of skill content is for phases the agent won't use.\n\n## Solution\nIn spawn_prompt.py, after loading skill content, filter to only include configured phases:\n\n```python\ndef filter_skill_phases(skill_content: str, phases: List[str]) -\u003e str:\n    # Parse SKILL-TEMPLATE markers\n    # Keep only sections matching configured phases\n    # Return filtered content\n```\n\n## Impact\nReduces feature-impl contexts from 1600+ lines to ~600 lines (62% reduction)","notes":"workspace: .orch/workspace/feat-filter-skill-phases-only-04dec","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-04T15:55:01.296281-08:00","updated_at":"2025-12-04T16:18:42.423288-08:00","closed_at":"2025-12-04T16:18:42.423288-08:00","close_reason":"Resolved via orch complete","comments":[{"id":75,"issue_id":"orch-cli-jjb","author":"dylanconlin","text":"Phase: Planning - Analyzing spawn_prompt.py for skill phase filtering implementation","created_at":"2025-12-05T00:03:12Z"},{"id":79,"issue_id":"orch-cli-jjb","author":"dylanconlin","text":"Phase: Implementing - Starting TDD cycle for filter_skill_phases function. Markers found: investigation, clarifying-questions, design, implementation-tdd, implementation-direct, validation, self-review, integration","created_at":"2025-12-05T00:03:55Z"},{"id":84,"issue_id":"orch-cli-jjb","author":"dylanconlin","text":"Phase: Validation - Tests passing. Implementation complete: 65.7% context reduction achieved (1418‚Üí486 lines)","created_at":"2025-12-05T00:08:11Z"},{"id":85,"issue_id":"orch-cli-jjb","author":"dylanconlin","text":"Phase: Complete - Implemented filter_skill_phases() to reduce feature-impl contexts from 1418 to 486 lines (65.7% reduction). All 25 tests passing. Commits: 1ed7b51 (implementation), b6d9352 (tests)","created_at":"2025-12-05T00:09:49Z"}]}
{"id":"orch-cli-jnm","title":"Push kb-cli to GitHub","description":"Create GitHub repo and push kb-cli. Run: cd ~/Documents/personal/kb-cli \u0026\u0026 gh repo create kb-cli --public --push","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-03T15:39:22.937836-08:00","updated_at":"2025-12-03T15:41:19.41675-08:00","closed_at":"2025-12-03T15:41:19.41675-08:00","close_reason":"Keeping local for now"}
{"id":"orch-cli-k90","title":"Add blocker warning to orch spawn --issue","description":"When spawning from a beads issue, check dependencies field and warn if open blockers exist. Non-blocking warning - orchestrator can proceed anyway. Example: '‚ö†Ô∏è This issue has 2 open blockers: ok-abc, ok-def'. Requires expanding BeadsIssue dataclass to include dependencies field.","notes":"workspace: .orch/workspace/feat-add-blocker-warning-orch-08dec","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-05T16:47:14.460596-08:00","updated_at":"2025-12-08T18:42:42.862822-08:00","closed_at":"2025-12-08T18:42:42.862822-08:00","close_reason":"Resolved via orch complete","labels":["P1,beads-integration"],"dependencies":[{"issue_id":"orch-cli-k90","depends_on_id":"orch-cli-y59","type":"parent-child","created_at":"2025-12-07T22:26:29.410795-08:00","created_by":"daemon"}],"comments":[{"id":203,"issue_id":"orch-cli-k90","author":"dylanconlin","text":"agent_metadata: {\"agent_id\": \"feat-add-blocker-warning-orch-08dec\", \"window_id\": \"@509\", \"skill\": \"feature-impl\", \"project_dir\": \"/Users/dylanconlin/Documents/personal/orch-cli\"}","created_at":"2025-12-09T02:36:07Z"},{"id":204,"issue_id":"orch-cli-k90","author":"dylanconlin","text":"Phase: Planning - Reading spawn_commands.py and beads_integration.py to understand current issue handling","created_at":"2025-12-09T02:36:28Z"},{"id":206,"issue_id":"orch-cli-k90","author":"dylanconlin","text":"Phase: Implementing - Starting TDD cycle. Dependencies have 'blocks' type and 'status' field. Will add BeadsDependency dataclass and warning logic.","created_at":"2025-12-09T02:37:08Z"},{"id":207,"issue_id":"orch-cli-k90","author":"dylanconlin","text":"investigation_path: /Users/dylanconlin/Documents/personal/orch-cli/.kb/investigations/2025-12-08-inv-add-blocker-warning-orch-spawn.md","created_at":"2025-12-09T02:37:15Z"},{"id":212,"issue_id":"orch-cli-k90","author":"dylanconlin","text":"Phase: Complete - Implemented blocker warning for orch spawn --issue. Added BeadsDependency dataclass, get_open_blockers() method, warning display. 12 new tests, all 69 tests passing. Committed 6be2af6.","created_at":"2025-12-09T02:41:28Z"}]}
{"id":"orch-cli-l7w","title":"Install missing beads git hooks (pre-push, post-checkout)","description":"Currently only pre-commit and post-merge hooks are installed. Missing:\n- pre-push: Prevents pushing stale JSONL\n- post-checkout: Imports JSONL after branch switches\n\nFix: Run 'bd hooks install' to install all four hooks.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-03T08:20:50.47503-08:00","updated_at":"2025-12-03T08:23:50.615718-08:00","closed_at":"2025-12-03T08:23:50.615718-08:00","close_reason":"Decided not to install - existing hooks (pre-commit, post-merge) cover common cases. Session close protocol handles the rest."}
{"id":"orch-cli-mac","title":"orch work: start work on beads issue","description":"**Context:** Decision from 2025-12-07 lifecycle investigation. Beads team rejected `bd work`, so adding `orch work` instead.\n\n**Implementation:**\n```bash\norch work ok-xyz              # Start work, infer skill from issue type\norch work ok-xyz -s architect # Override skill\norch work                     # Interactive picker from bd ready\n```\n\n**Skill inference:**\n- bug ‚Üí systematic-debugging\n- feature ‚Üí feature-impl\n- task ‚Üí investigation\n- epic ‚Üí architect\n\n**Reference:** .kb/investigations/design/2025-12-07-work-implementation-strategy-beads-team.md","notes":"workspace: .orch/workspace/feat-orch-work-start-work-08dec","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-07T22:14:14.993366-08:00","updated_at":"2025-12-08T18:59:45.409746-08:00","closed_at":"2025-12-08T18:59:45.409746-08:00","close_reason":"Resolved via orch complete","dependencies":[{"issue_id":"orch-cli-mac","depends_on_id":"orch-cli-y59","type":"parent-child","created_at":"2025-12-07T22:26:29.369794-08:00","created_by":"daemon"}],"comments":[{"id":213,"issue_id":"orch-cli-mac","author":"dylanconlin","text":"agent_metadata: {\"agent_id\": \"feat-orch-work-start-work-08dec\", \"window_id\": \"@512\", \"skill\": \"feature-impl\", \"project_dir\": \"/Users/dylanconlin/Documents/personal/orch-cli\"}","created_at":"2025-12-09T02:46:49Z"},{"id":215,"issue_id":"orch-cli-mac","author":"dylanconlin","text":"Phase: Planning - Reading codebase context for orch work command implementation","created_at":"2025-12-09T02:47:07Z"},{"id":216,"issue_id":"orch-cli-mac","author":"dylanconlin","text":"Phase: Implementing - Starting TDD cycle for orch work command. Pre-impl exploration complete: need to modify beads_integration.py, spawn_commands.py, add tests in test_work_command.py","created_at":"2025-12-09T02:48:01Z"},{"id":217,"issue_id":"orch-cli-mac","author":"dylanconlin","text":"Phase: Validation - All tests pass. Implementation complete:\\n- orch work \u003cissue-id\u003e - Start work with inferred skill\\n- orch work \u003cissue-id\u003e -s \u003cskill\u003e - Override skill\\n- orch work - Interactive picker from bd ready\\n\\nSkill inference: bug‚Üísystematic-debugging, feature‚Üífeature-impl, task‚Üíinvestigation, epic‚Üíarchitect","created_at":"2025-12-09T02:53:19Z"},{"id":218,"issue_id":"orch-cli-mac","author":"dylanconlin","text":"Phase: Complete - orch work command fully implemented and tested. 97 tests pass. Ready for code review and commit.","created_at":"2025-12-09T02:53:24Z"}]}
{"id":"orch-cli-mtm","title":"Add bd stale command for detecting old issues","description":"","notes":"Part of Strategic Orchestrator Pattern (decision: 2025-12-04-strategic-orchestrator-pattern.md). Detect issues open longer than N days (default 14?). Helps orchestrator identify stale work during session start backlog review.","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-04T11:40:34.428891-08:00","updated_at":"2025-12-04T11:40:47.8258-08:00"}
{"id":"orch-cli-n2e","title":"orch clean --stale: clean agents stuck from previous day","description":"**Problem:** No easy way to bulk-clean agents that are clearly stuck (Phase: Unknown, from previous day).\n\n**Solution:** Add `orch clean --stale` flag that cleans agents matching:\n- Phase: Unknown\n- Spawned \u003e24 hours ago\n- OR: No commits since spawn + \u003e4 hours old\n\nShould auto-abandon then clean in one step.","notes":"workspace: .orch/workspace/feat-orch-clean-stale-clean-08dec","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-07T22:13:58.517253-08:00","updated_at":"2025-12-08T18:59:45.257706-08:00","closed_at":"2025-12-08T18:59:45.257706-08:00","close_reason":"Resolved via orch complete","comments":[{"id":205,"issue_id":"orch-cli-n2e","author":"dylanconlin","text":"agent_metadata: {\"agent_id\": \"feat-orch-clean-stale-clean-08dec\", \"window_id\": \"@510\", \"skill\": \"feature-impl\", \"project_dir\": \"/Users/dylanconlin/Documents/personal/orch-cli\"}","created_at":"2025-12-09T02:36:58Z"},{"id":208,"issue_id":"orch-cli-n2e","author":"dylanconlin","text":"Phase: Planning - Analyzing existing orch clean command and registry structure to implement --stale flag","created_at":"2025-12-09T02:37:17Z"},{"id":209,"issue_id":"orch-cli-n2e","author":"dylanconlin","text":"investigation_path: /Users/dylanconlin/Documents/personal/orch-cli/.kb/investigations/2025-12-08-inv-orch-clean-stale-clean-agents.md","created_at":"2025-12-09T02:37:33Z"},{"id":210,"issue_id":"orch-cli-n2e","author":"dylanconlin","text":"Phase: Implementing - TDD approach: writing failing tests first","created_at":"2025-12-09T02:38:12Z"},{"id":214,"issue_id":"orch-cli-n2e","author":"dylanconlin","text":"Phase: Complete - Implemented --stale flag for orch clean. Feature auto-abandons and cleans agents that are stuck (Phase: Unknown \u003e24h or no commits \u003e4h). All 25 clean tests pass.","created_at":"2025-12-09T02:47:05Z"}]}
{"id":"orch-cli-n9m","title":"orch complete: parse 'Areas needing investigation' section and prompt for follow-up issues","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-06T18:42:19.38174-08:00","updated_at":"2025-12-06T23:51:36.184668-08:00","closed_at":"2025-12-06T23:51:36.184668-08:00","close_reason":"Completed: ac491c0 - parse Areas needing investigation implemented","comments":[{"id":127,"issue_id":"orch-cli-n9m","author":"dylanconlin","text":"Phase: Planning - Reading complete_commands.py to understand current parsing logic","created_at":"2025-12-07T02:42:26Z"},{"id":128,"issue_id":"orch-cli-n9m","author":"dylanconlin","text":"investigation_path: /Users/dylanconlin/Documents/personal/orch-cli/.kb/investigations/2025-12-06-orch-complete-parse-areas-needing.md","created_at":"2025-12-07T02:43:00Z"},{"id":129,"issue_id":"orch-cli-n9m","author":"dylanconlin","text":"Phase: Implementation - Writing failing tests for extract_areas_needing_investigation()","created_at":"2025-12-07T02:43:35Z"},{"id":130,"issue_id":"orch-cli-n9m","author":"dylanconlin","text":"Phase: Complete - Implemented extract_areas_needing_investigation() and surface_areas_needing_investigation() functions. 13 new tests pass. Integrated into both sync/async complete paths. Defense-in-depth pattern now surfaces follow-up work items from investigation files.","created_at":"2025-12-07T02:46:31Z"},{"id":132,"issue_id":"orch-cli-n9m","author":"dylanconlin","text":"Phase: Investigation - Reading orch complete implementation to understand current parsing and identify where to add 'Areas needing investigation' parsing","created_at":"2025-12-07T03:03:24Z"},{"id":133,"issue_id":"orch-cli-n9m","author":"dylanconlin","text":"investigation_path: /Users/dylanconlin/Documents/personal/orch-cli/.kb/investigations/2025-12-06-orch-complete-parse-areas-needing.md","created_at":"2025-12-07T03:03:32Z"},{"id":135,"issue_id":"orch-cli-n9m","author":"dylanconlin","text":"Phase: Complete - Implementation complete with 13 passing tests. Functions extract_areas_needing_investigation() and surface_areas_needing_investigation() integrated into both sync and async complete flows. Investigation file documents findings and implementation approach.","created_at":"2025-12-07T03:04:59Z"}]}
{"id":"orch-cli-nan","title":"Delete lifecycle modules: registry.py, complete.py, monitoring_commands.py","description":"Delete modules that duplicate beads capabilities (~7K lines):\n\n- registry.py (26KB) ‚Üí bd list --agents\n- complete.py (44KB) ‚Üí bd close + auto-hook\n- monitoring_commands.py (54KB) ‚Üí bd show, bd list --status\n- beads_integration.py (19KB) ‚Üí unnecessary wrapper\n- monitor.py, history.py, cleanup_daemon.py, verification.py\n\n**Prerequisite:** Phase: Complete auto-close hook working in beads","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-07T22:14:25.862035-08:00","updated_at":"2025-12-07T22:14:25.862035-08:00","dependencies":[{"issue_id":"orch-cli-nan","depends_on_id":"orch-cli-dgy","type":"parent-child","created_at":"2025-12-07T22:26:16.113774-08:00","created_by":"daemon"}]}
{"id":"orch-cli-nvl","title":"orch check/complete should support --issue flag for beads-only workflow","description":"## Context\nE2E test (orch-cli-2fz) revealed that orch check/complete require agent in registry.\nIf spawn times out or agent starts manually, these commands don't work.\n\n## Scope\n- Add --issue flag to orch check to inspect beads issue directly\n- Add --issue flag to orch complete to close beads issue without registry lookup\n- Enables simpler beads-first workflow without registry dependency\n\n## Acceptance Criteria\n- [ ] orch check --issue \u003cbeads-id\u003e shows issue details + phase from comments\n- [ ] orch complete --issue \u003cbeads-id\u003e closes issue after verifying Phase: Complete\n- [ ] Works even when agent not in registry","notes":"workspace: .orch/workspace/feat-orch-check-complete-02dec","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-02T15:27:52.989872-08:00","updated_at":"2025-12-03T12:34:55.751847-08:00","closed_at":"2025-12-03T12:34:55.751847-08:00","close_reason":"Resolved via orch complete","comments":[{"id":20,"issue_id":"orch-cli-nvl","author":"dylanconlin","text":"Phase: Planning - Analyzing existing orch check/complete implementation to understand registry dependencies","created_at":"2025-12-02T23:29:19Z"},{"id":21,"issue_id":"orch-cli-nvl","author":"dylanconlin","text":"Phase: Implementing - Starting TDD cycle for --issue flag on check/complete commands","created_at":"2025-12-02T23:30:15Z"},{"id":22,"issue_id":"orch-cli-nvl","author":"dylanconlin","text":"Phase: Validating - All 48 related tests pass (14 new tests, 34 existing), verifying no regressions","created_at":"2025-12-02T23:33:47Z"},{"id":23,"issue_id":"orch-cli-nvl","author":"dylanconlin","text":"Phase: Complete - Implemented --issue flag for orch check and orch complete. 48/48 tests pass. Ready for review.","created_at":"2025-12-02T23:34:16Z"}]}
{"id":"orch-cli-pz2","title":"Clean up SPAWN_CONTEXT.md - remove outdated sections","description":"SPAWN_CONTEXT.md contains several outdated or unnecessary sections that bloat context and confuse agents:\n\n## Sections to Remove/Audit\n\n### 1. META-ORCHESTRATION TEMPLATE SYSTEM (~50 lines)\n```\n‚ö†Ô∏è **META-ORCHESTRATION TEMPLATE SYSTEM** (Critical if working on meta-orchestration):\n**IF task involves these files/patterns:**\n- .orch/CLAUDE.md updates\n...\n```\n**Problem:** Only relevant for orch-knowledge repo. Should NOT be in general spawn template.\n**Action:** Remove from base template, add only when spawning in orch-knowledge.\n\n### 2. AGENT MAIL COORDINATION (~30 lines)\n```\n## AGENT MAIL COORDINATION (OPTIONAL)\nAgent Mail MCP is available for inter-agent messaging...\n```\n**Problem:** Agent Mail is no longer actively used. This is dead weight.\n**Action:** Remove entirely.\n\n### 3. PRE-IMPLEMENTATION ANALYSIS (audit needed)\n```\n## Pre-Implementation Analysis\n```\n**Question:** Are workers actually filling this out? If not, remove or make optional.\n**Action:** Audit recent workspaces to check usage, then decide.\n\n## Impact\n- Reduces spawn context size (currently ~400 lines, could be ~300)\n- Removes confusing/irrelevant guidance\n- Makes SPAWN_CONTEXT more focused on actual task\n\n## Files to Edit\n- `src/orch/spawn_prompt.py` - Main prompt builder\n- `templates/` - Any template files\n- May need conditional logic for project-specific context (e.g., orch-knowledge gets template system guidance)","notes":"workspace: .orch/workspace/feat-clean-spawn-context-05dec","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-05T17:12:24.486464-08:00","updated_at":"2025-12-06T19:03:21.802107-08:00","closed_at":"2025-12-06T19:03:21.802107-08:00","close_reason":"Resolved via orch complete","labels":["P1,spawn,cleanup"],"comments":[{"id":112,"issue_id":"orch-cli-pz2","author":"dylanconlin","text":"Phase: Planning - Analyzing spawn_prompt.py to identify outdated sections for removal","created_at":"2025-12-06T01:56:40Z"},{"id":113,"issue_id":"orch-cli-pz2","author":"dylanconlin","text":"Phase: Investigation - Found all three sections: 1) META-ORCHESTRATION in SPAWN_PROMPT.md template (already has strip function), 2) AGENT MAIL in spawn_prompt.py:777-830, 3) PRE-IMPLEMENTATION in feature-impl skill phases","created_at":"2025-12-06T01:57:43Z"},{"id":114,"issue_id":"orch-cli-pz2","author":"dylanconlin","text":"Phase: Implementation - Starting with removing AGENT MAIL section, then auditing PRE-IMPLEMENTATION usage","created_at":"2025-12-06T01:57:56Z"},{"id":115,"issue_id":"orch-cli-pz2","author":"dylanconlin","text":"Milestone: Agent Mail removal complete (2/3 sections done). Starting PRE-IMPLEMENTATION ANALYSIS audit...","created_at":"2025-12-06T02:00:45Z"},{"id":116,"issue_id":"orch-cli-pz2","author":"dylanconlin","text":"QUESTION: PRE-IMPLEMENTATION section is in feature-impl skill (orch-knowledge repo, not orch-cli). I edited distribution files in ~/.claude/skills/ but need to edit source in ~/orch-knowledge/skills/src/ and rebuild. Should I:\nA) Continue in orch-cli, document cross-repo dependency\nB) Switch to orch-knowledge to edit source and rebuild\nC) Revert distribution edits, complete orch-cli work only (sections 1-2)","created_at":"2025-12-06T02:02:53Z"},{"id":117,"issue_id":"orch-cli-pz2","author":"dylanconlin","text":"Phase: Validation - Running tests for orch-cli changes (sections 1-2). Section 3 (PRE-IMPLEMENTATION) requires work in orch-knowledge repo.","created_at":"2025-12-06T02:03:34Z"},{"id":118,"issue_id":"orch-cli-pz2","author":"dylanconlin","text":"Phase: Complete - Removed Agent Mail section from spawn_prompt.py (~54 lines). All tests passing. META-ORCHESTRATION already handled by existing strip function. PRE-IMPLEMENTATION requires separate work in orch-knowledge repo to edit skill source files.","created_at":"2025-12-06T02:03:52Z"}]}
{"id":"orch-cli-qbu","title":"Store beads db path for cross-repo spawn/complete","description":"When spawning with --issue, store the absolute path to the beads database (not just the issue ID). This enables cross-repo workflows where:\n\n- Epic lives in repo A (e.g., orch-knowledge)\n- Worker spawns to repo B (e.g., skill-benchmark)\n- orch complete can close the issue in repo A's beads\n\nImplementation:\n1. On spawn: resolve beads db path (e.g., /path/to/orch-knowledge/.beads/issues.db)\n2. Store beads_db_path in registry alongside beads_id\n3. Update BeadsIntegration to accept optional db_path parameter\n4. Pass --db flag to all bd commands when db_path is set\n\nBeads already supports --db flag on all commands - orch just needs to use it.\n\nEstimated effort: ~30 minutes\n\nUnblocks: Skill Benchmark Project (ok-71c in orch-knowledge) which needs cross-repo spawning.","notes":"workspace: .orch/workspace/feat-store-beads-path-cross-06dec","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-06T07:00:45.692479-08:00","updated_at":"2025-12-06T07:19:02.768182-08:00","closed_at":"2025-12-06T07:19:02.768182-08:00","close_reason":"Completed in commit c0a1ba4 - cross-repo beads path storage implemented","comments":[{"id":119,"issue_id":"orch-cli-qbu","author":"dylanconlin","text":"Phase: Planning - Analyzing spawn.py, registry.py, and beads_integration.py for cross-repo beads path storage","created_at":"2025-12-06T15:02:17Z"},{"id":120,"issue_id":"orch-cli-qbu","author":"dylanconlin","text":"Phase: Implementing - Adding beads_db_path to SpawnConfig, registry, BeadsIntegration, and complete flow","created_at":"2025-12-06T15:03:10Z"},{"id":121,"issue_id":"orch-cli-qbu","author":"dylanconlin","text":"Phase: Validation - Implementation complete, tests passing (45 beads-related tests pass)","created_at":"2025-12-06T15:10:54Z"},{"id":122,"issue_id":"orch-cli-qbu","author":"dylanconlin","text":"Phase: Complete - Implemented beads_db_path storage for cross-repo spawn/complete. Added to SpawnConfig, registry, BeadsIntegration (_build_command with --db flag), spawn_commands (resolves db path), and complete.py (passes db_path). 45 tests pass.","created_at":"2025-12-06T15:11:18Z"}]}
{"id":"orch-cli-qge","title":"Create kb project - knowledge artifact tooling","description":"## Context\nFrom decision: .orch/decisions/2025-12-01-five-concerns-architecture.md\n\nExtract knowledge artifact management from orch-cli into dedicated kb tool.\n\n## Scope\n- kb create investigation \u003cslug\u003e\n- kb create decision \u003cslug\u003e\n- kb create pattern \u003cslug\u003e\n- kb search \u003cquery\u003e\n- kb list investigations|decisions|patterns\n- Establish .kb/ directory structure\n- Move investigation/decision templates from orch\n\n## Why\norch-cli (lifecycle) shouldn't create knowledge artifacts. Separation of concerns.\n\n## Acceptance Criteria\n- [ ] kb CLI exists with create/search/list commands\n- [ ] .kb/ directory structure documented\n- [ ] Templates moved from ~/.orch/templates/ to kb project\n- [ ] orch-cli investigations.py and decisions.py removed","notes":"workspace: .orch/workspace/feat-create-project-knowledge-03dec","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-01T21:38:50.874599-08:00","updated_at":"2025-12-03T15:19:54.415408-08:00","closed_at":"2025-12-03T15:19:54.415408-08:00","close_reason":"Scaffolding complete (commit 7323584). Remaining TDD implementation to be spawned separately.","comments":[{"id":24,"issue_id":"orch-cli-qge","author":"dylanconlin","text":"Dylan's decisions on open questions:\n1. Migration: YES to .kb/ (use AI with haiku model for migration)\n2. Deprecation: Warnings first\n3. Homebrew: Yes\n4. Interactive search: Brainstorm needed\n5. Reference counting: Agent discretion\n\nThis overrides architect recommendation to keep .orch/","created_at":"2025-12-03T00:27:09Z"},{"id":29,"issue_id":"orch-cli-qge","author":"dylanconlin","text":"Phase: Planning - Understanding scope and existing code. Need to clarify project location.","created_at":"2025-12-03T16:16:13Z"},{"id":33,"issue_id":"orch-cli-qge","author":"dylanconlin","text":"Phase: Implementing - Creating kb project at ~/Documents/personal/kb with TDD approach","created_at":"2025-12-03T16:27:15Z"},{"id":34,"issue_id":"orch-cli-qge","author":"dylanconlin","text":"CHECKPOINT: kb project created at ~/Documents/personal/kb (commit 7323584). Done: project scaffold (pyproject.toml, src/kb/, tests/). Remaining: write tests + implement kb create/list/search commands, move templates.","created_at":"2025-12-03T16:28:15Z"}]}
{"id":"orch-cli-qp6","title":"Create skills project - agent guidance tooling","description":"## Context\nFrom decision: .orch/decisions/2025-12-01-five-concerns-architecture.md\n\nExtract skill authoring/building/deployment from orch-knowledge into dedicated skills tool.\n\n## Scope\n- skills build - compile SKILL.md from phases/techniques\n- skills deploy - install to ~/.claude/skills/\n- skills list - show available skills\n- skills new \u003ccategory\u003e/\u003cname\u003e - scaffold new skill\n- Move skills/src/ from orch-knowledge\n\n## Why\nSkills (prescriptive guidance) are different from knowledge (descriptive learnings). Separate concerns.\n\n## Acceptance Criteria\n- [ ] skills CLI exists with build/deploy/list/new commands\n- [ ] skills/src/ structure documented\n- [ ] Build system extracted from orch-knowledge\n- [ ] orch-cli still consumes skills from ~/.claude/skills/ (no change needed)","notes":"workspace: .orch/workspace/feat-create-skills-project-03dec","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-01T21:38:51.713331-08:00","updated_at":"2025-12-03T12:34:58.586453-08:00","closed_at":"2025-12-03T12:34:58.586453-08:00","close_reason":"Resolved via orch complete","comments":[{"id":28,"issue_id":"orch-cli-qp6","author":"dylanconlin","text":"Phase: Planning - Agent PinkCreek starting, creating workspace","created_at":"2025-12-03T16:15:24Z"},{"id":30,"issue_id":"orch-cli-qp6","author":"dylanconlin","text":"Phase: Implementing - Analyzed existing build system. Creating separate skills CLI with build/deploy/list/new commands. TDD approach.","created_at":"2025-12-03T16:16:43Z"},{"id":31,"issue_id":"orch-cli-qp6","author":"dylanconlin","text":"Phase: Validation - Implementation complete. skills CLI with list/build/deploy/new commands created. Documentation added.","created_at":"2025-12-03T16:21:53Z"},{"id":32,"issue_id":"orch-cli-qp6","author":"dylanconlin","text":"Phase: Complete - skills CLI created with list/build/deploy/new commands. 38 tests passing. Documentation in docs/skills-structure.md. 3 commits: b31ddc9, 6f4f122, a0f6ad9","created_at":"2025-12-03T16:22:35Z"}]}
{"id":"orch-cli-slt","title":"Consolidate template sources for kb","description":"Decide whether kb templates should come from ~/meta-orchestration/templates-src/ or separate ~/.kb/templates/. Currently manually copied.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-03T15:39:25.533461-08:00","updated_at":"2025-12-03T16:04:49.956756-08:00","closed_at":"2025-12-03T16:04:49.956756-08:00","close_reason":"Decision: Keep ~/.kb/templates separate from ~/.orch/templates. Simpler to maintain independently. Revisit if sync becomes painful."}
{"id":"orch-cli-sv7","title":"E2E integration tests for orch ecosystem (worker + orchestrator)","description":"","notes":"workspace: .orch/workspace/feat-e2e-integration-tests-06dec","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-06T20:59:57.138349-08:00","updated_at":"2025-12-06T22:03:28.892365-08:00","closed_at":"2025-12-06T22:03:28.892365-08:00","close_reason":"Resolved via orch complete","comments":[{"id":151,"issue_id":"orch-cli-sv7","author":"dylanconlin","text":"Phase: Planning - Analyzing existing test structure and E2E testing requirements for orch ecosystem","created_at":"2025-12-07T05:02:47Z"},{"id":152,"issue_id":"orch-cli-sv7","author":"dylanconlin","text":"investigation_path: /Users/dylanconlin/Documents/personal/orch-cli/.kb/investigations/2025-12-06-e2e-integration-tests-orch-ecosystem.md","created_at":"2025-12-07T05:03:08Z"},{"id":153,"issue_id":"orch-cli-sv7","author":"dylanconlin","text":"Phase: Clarifying Questions - Investigation complete, moving to design. Findings: (1) E2E infrastructure exists in tests/e2e/, (2) Current tests cover orchestrator perspective only, (3) Missing: worker behavior tests, beads workflow tests, artifact creation tests","created_at":"2025-12-07T05:04:25Z"},{"id":154,"issue_id":"orch-cli-sv7","author":"dylanconlin","text":"Phase: Design - Creating design document for E2E integration tests. Key areas: (1) SPAWN_CONTEXT validation tests, (2) Beads workflow integration tests, (3) Worker perspective verification","created_at":"2025-12-07T05:04:42Z"},{"id":155,"issue_id":"orch-cli-sv7","author":"dylanconlin","text":"Design ready for review: docs/designs/2025-12-06-e2e-integration-tests.md - Three test categories: (1) SPAWN_CONTEXT validation, (2) Beads workflow integration, (3) Worker perspective. Awaiting approval to proceed with implementation.","created_at":"2025-12-07T05:05:30Z"},{"id":156,"issue_id":"orch-cli-sv7","author":"dylanconlin","text":"Phase: Implementing - Starting TDD implementation. Creating test_spawn_context.py first (RED phase - writing failing tests)","created_at":"2025-12-07T05:05:44Z"},{"id":157,"issue_id":"orch-cli-sv7","author":"dylanconlin","text":"Phase: Implementing - 36 tests passing. Created: (1) test_spawn_context.py (16 tests for SPAWN_CONTEXT validation), (2) test_beads_workflow.py (20 tests for beads integration). Updated conftest.py with SPAWN_PROMPT.md template copy and pyproject.toml with e2e/beads markers.","created_at":"2025-12-07T05:13:18Z"},{"id":158,"issue_id":"orch-cli-sv7","author":"dylanconlin","text":"Phase: Complete - 36 E2E integration tests added and passing. Deliverables: (1) tests/e2e/test_spawn_context.py (16 tests), (2) tests/e2e/test_beads_workflow.py (20 tests), (3) Investigation: .kb/investigations/2025-12-06-e2e-integration-tests-orch-ecosystem.md, (4) Design: docs/designs/2025-12-06-e2e-integration-tests.md. All tests committed to main branch.","created_at":"2025-12-07T05:16:17Z"}]}
{"id":"orch-cli-tmb","title":"P2: Remove unfilled placeholders from spawn context","description":"From audit: .orch/investigations/simple/2025-12-04-audit-spawn-context-quality.md\n\n## Problem\nSpawn contexts include placeholder text that confuses workers:\n- `[Agent to define based on task]` for SCOPE IN/OUT\n- `previous-agent/WORKSPACE.md` path that doesn't exist\n\n## Solution\nIn SPAWN_PROMPT.md and spawn_prompt.py:\n- Remove SCOPE IN/OUT placeholders if not provided\n- Remove 'Prior work' section if no actual prior work reference exists\n\n## Impact\nCleaner context, less worker confusion","notes":"workspace: .orch/workspace/feat-remove-unfilled-04dec","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-04T15:55:03.620789-08:00","updated_at":"2025-12-04T16:18:46.398325-08:00","closed_at":"2025-12-04T16:18:46.398325-08:00","close_reason":"Resolved via orch complete","comments":[{"id":77,"issue_id":"orch-cli-tmb","author":"dylanconlin","text":"Phase: Planning - Analyzing spawn_prompt.py to remove unfilled placeholder text","created_at":"2025-12-05T00:03:24Z"},{"id":81,"issue_id":"orch-cli-tmb","author":"dylanconlin","text":"Phase: Implementing - Fixing unfilled placeholders: (1) Remove SCOPE section when not provided, (2) Remove Prior work placeholder section from template","created_at":"2025-12-05T00:04:17Z"},{"id":87,"issue_id":"orch-cli-tmb","author":"dylanconlin","text":"Phase: Complete - Removed unfilled placeholders from spawn contexts: (1) Added strip_unfilled_scope_section() and strip_prior_work_placeholder() functions, (2) Updated fallback_template() to omit SCOPE section, (3) Added 3 tests. All 21 tests pass.","created_at":"2025-12-05T00:11:25Z"}]}
{"id":"orch-cli-tol","title":"Add spawn context quality validation - fail fast if context \u003c100 lines","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-30T15:47:58.953615-08:00","updated_at":"2025-11-30T16:31:58.748425-08:00","closed_at":"2025-11-30T16:31:58.748425-08:00","close_reason":"Fixed in ede9e90 - spawn context quality validation (fail fast \u003c100 lines)"}
{"id":"orch-cli-u08","title":"Document browser-use best practices to avoid context bloat","description":"browser_get_state with include_screenshot or on element-heavy pages can return 15-25k tokens, obliterating context windows.\n\nKey practices to document:\n- Never use include_screenshot: true unless absolutely necessary\n- Use browser_extract_content(query) for targeted data extraction\n- Get state once, remember element indices, don't re-poll\n- Only re-fetch state after navigation or structural page changes\n\nCreate knowledge file: .orch/knowledge/browser-use-best-practices.md","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-02T12:03:36.574851-08:00","updated_at":"2025-12-02T12:05:16.944878-08:00","closed_at":"2025-12-02T12:05:16.944878-08:00","close_reason":"Moving to orch-knowledge - this is general knowledge, not orch-cli specific"}
{"id":"orch-cli-un2","title":"Prevent workers from running bd close directly","description":"Workers are closing beads issues directly via 'bd close' which bypasses orch complete verification (Phase: Complete check, workspace verification, etc).\n\n## Problem\n- Workers running 'bd close' bypasses verification\n- Orchestrator loses visibility\n- Agent registry may still show agent as active while issue is closed\n\n## Solution (two-pronged)\n1. **Guidance fix**: Update spawn_prompt.py to explicitly warn workers never to run 'bd close'\n2. **Enforcement fix**: Add PreToolUse Claude hook that blocks 'bd close' when CLAUDE_CONTEXT=worker\n\n## Implementation notes\n- spawn_prompt.py already has partial edit (line ~528) - complete or integrate properly\n- Hook should go in ~/.orch/hooks/ or ~/.claude/hooks/\n- Register hook in ~/.claude/settings.json PreToolUse section\n- Hook returns error message guiding worker to use 'bd comment' instead","notes":"workspace: .orch/workspace/feat-prevent-workers-from-04dec","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-04T15:38:21.281286-08:00","updated_at":"2025-12-04T15:55:48.400104-08:00","closed_at":"2025-12-04T15:55:48.400104-08:00","close_reason":"Resolved via orch complete","comments":[{"id":70,"issue_id":"orch-cli-un2","author":"dylanconlin","text":"Phase: Planning - Analyzing spawn_prompt.py and hook system for bd close prevention","created_at":"2025-12-04T23:39:00Z"},{"id":71,"issue_id":"orch-cli-un2","author":"dylanconlin","text":"Phase: Implementing - Creating PreToolUse hook to block bd close in worker contexts","created_at":"2025-12-04T23:40:22Z"},{"id":72,"issue_id":"orch-cli-un2","author":"dylanconlin","text":"Phase: Complete - Implemented two-pronged solution: (1) guidance in spawn_prompt.py warning workers not to run bd close, (2) PreToolUse hook block-bd-close.py that enforces the restriction when CLAUDE_CONTEXT=worker. Includes 9 tests. Hook deployed to ~/.orch/hooks/ and registered in settings.json.","created_at":"2025-12-04T23:43:10Z"}]}
{"id":"orch-cli-vny","title":"Investigate Go vs Python vs Rust for CLI tools (beads, vc, orch-cli)","description":"Steve Yegge's beads and vc projects are both written in Go:\n- /Users/dylanconlin/Documents/personal/beads\n- /Users/dylanconlin/Documents/personal/vc\n\norch-cli is written in Python:\n- /Users/dylanconlin/Documents/personal/orch-cli\n\n**Questions to explore:**\n1. What benefits does Go provide for CLI tools like beads/vc?\n2. How does Python compare for orch-cli's use case?\n3. Would Rust be a better choice than either?\n\n**Consider:**\n- Startup time / performance\n- Distribution (single binary vs dependencies)\n- Cross-platform support\n- Developer ergonomics\n- Ecosystem for CLI tooling","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-02T10:25:24.211122-08:00","updated_at":"2025-12-02T10:31:49.336472-08:00","closed_at":"2025-12-02T10:31:49.336472-08:00","close_reason":"Research complete. Recommend Go for CLI tools - 40ms startup vs Python 108ms, single binary distribution. See .orch/investigations/feasibility/2025-12-02-go-python-rust-cli-comparison.md"}
{"id":"orch-cli-vw7","title":"Remove meta-orchestration repo (duplicate of orch-knowledge)","description":"## Context\nmeta-orchestration and orch-knowledge have become duplicates:\n- decisions/, skills/src/, beads issues, ROADMAP - all identical\n- Causes confusion about which is source of truth\n- Additionally, deployed orchestrator skill has drifted from source (32 KB vs 31 KB)\n\n## Actions\n1. Sync deployed ~/.claude/skills/policy/orchestrator/SKILL.md back to orch-knowledge/skills/src/policy/orchestrator/SKILL.md\n2. Optionally archive 3 root .txt files from meta-orchestration to orch-knowledge (session transcripts, 147 KB)\n3. Delete ~/meta-orchestration directory\n4. Verify no dangling references to meta-orchestration\n\n## Verified\n- All decisions identical (75 files each, no diff)\n- All beads issues identical (same MD5)\n- skills/src/ identical\n- ROADMAP identical\n- Deployed skill is newer (Dec 4) than source (Dec 3)","notes":"workspace: .orch/workspace/feat-remove-meta-04dec","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-04T11:51:54.63024-08:00","updated_at":"2025-12-04T12:46:08.279648-08:00","closed_at":"2025-12-04T12:46:08.279648-08:00","close_reason":"Resolved via orch complete","comments":[{"id":63,"issue_id":"orch-cli-vw7","author":"dylanconlin","text":"Phase: Planning - Analyzing meta-orchestration cleanup task. Actions: sync deployed skill, optionally archive txt files, delete meta-orchestration dir, verify no dangling refs","created_at":"2025-12-04T19:53:27Z"},{"id":64,"issue_id":"orch-cli-vw7","author":"dylanconlin","text":"Phase: Implementing - Plan: (1) sync deployed skill to orch-knowledge source, (2) remove meta-orchestration fallback code from orch-cli (init.py, spawn.py, config.py), (3) delete ~/meta-orchestration, (4) verify no dangling refs. Skipping txt archive per validation=none.","created_at":"2025-12-04T19:54:11Z"},{"id":65,"issue_id":"orch-cli-vw7","author":"dylanconlin","text":"Phase: Complete - meta-orchestration repo removed. Actions: (1) Synced deployed orchestrator skill to orch-knowledge source (+65 lines: Backlog Ownership, Code Writing Boundary), (2) Removed fallback code from orch-cli (init.py, spawn.py, config.py), (3) Deleted ~/meta-orchestration directory, (4) Updated SPAWN_PROMPT.md template. Historical doc references remain as documentation artifacts.","created_at":"2025-12-04T19:57:23Z"}]}
{"id":"orch-cli-wsn","title":"Investigate leveraging Claude Code --agent flag for skill-based spawning","description":"Claude Code 2.0.59 added --agent CLI flag and agent setting that could simplify/improve orch-cli spawning.\n\nCurrent approach:\n- Inject context via --append-system-prompt and SPAWN_CONTEXT.md\n- Skills defined as SKILL.md files, embedded in spawn prompts\n\nNew possibility:\n- Define worker agents in .claude/agents/ with pre-configured system prompts\n- Tool restrictions per skill type (read-only for investigations, full for feature-impl)\n- Model selection baked into agent config\n- Spawn with: claude --agent investigation-worker\n\nQuestions to answer:\n1. Should skills become .claude/agents/ files?\n2. How would tool restrictions work with current skill system?\n3. Can we dynamically generate agents via --agents JSON flag?\n4. What's the migration path from current SPAWN_CONTEXT.md approach?\n5. How does this interact with subagents/Task tool?\n\nSource: Claude Code docs, version 2.0.59 changelog","notes":"workspace: .orch/workspace/feat-inv-leveraging-claude-05dec","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-05T13:47:58.294073-08:00","updated_at":"2025-12-05T22:51:49.865928-08:00","closed_at":"2025-12-05T22:51:49.865928-08:00","close_reason":"Investigation complete - hybrid approach recommended. See .kb/investigations/simple/2025-12-05-claude-agent-flag-for-skills.md","comments":[{"id":99,"issue_id":"orch-cli-wsn","author":"dylanconlin","text":"Phase: Planning - Investigating Claude Code --agent flag for skill-based spawning. Will research Claude Code docs, analyze current spawn implementation, and document findings.","created_at":"2025-12-05T21:48:33Z"},{"id":100,"issue_id":"orch-cli-wsn","author":"dylanconlin","text":"Phase: Implementing - Creating investigation document with analysis of --agent flag integration","created_at":"2025-12-05T21:51:58Z"},{"id":101,"issue_id":"orch-cli-wsn","author":"dylanconlin","text":"Phase: Complete - Investigation documented in .kb/investigations/simple/2025-12-05-claude-agent-flag-for-skills.md. Recommends hybrid approach: generate .claude/agents/ files at spawn time for tool restrictions while keeping SKILL.md for procedural guidance. Includes migration path in 4 phases.","created_at":"2025-12-05T21:53:10Z"}]}
{"id":"orch-cli-wx1","title":"Remove WORKSPACE.md - use beads as only state","description":"Eliminate workspace files. All agent state tracked via beads comments. No more WORKSPACE.md creation or parsing.\n\nPart of orch-cli simplification epic.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-07T22:36:08.842877-08:00","updated_at":"2025-12-07T22:36:08.842877-08:00","dependencies":[{"issue_id":"orch-cli-wx1","depends_on_id":"orch-cli-dgy","type":"parent-child","created_at":"2025-12-07T22:36:14.673939-08:00","created_by":"daemon"}]}
{"id":"orch-cli-x7d","title":"orch work without args should show list, not interactive mode","description":"**Problem:** `orch work` without an issue ID drops into interactive picker mode. This doesn't fit orch's AI-first design - the orchestrator should decide what to work on, not navigate menus.\n\n**Current behavior:**\n```\norch work  # Shows numbered list, waits for input\n```\n\n**Expected behavior:**\n```\norch work  # Shows ready issues with inferred skills, exits\n           # Orchestrator reads output and decides what to spawn\n```\n\nSimilar to how `bd ready` works - display info, let AI decide.\n\n**Implementation:** Remove interactive picker, just print the ready issues list and exit.","notes":"workspace: .orch/workspace/feat-orch-work-without-args-08dec","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-08T19:17:52.181468-08:00","updated_at":"2025-12-08T19:23:47.832708-08:00","closed_at":"2025-12-08T19:23:47.832708-08:00","close_reason":"Resolved via orch complete","comments":[{"id":219,"issue_id":"orch-cli-x7d","author":"dylanconlin","text":"agent_metadata: {\"agent_id\": \"feat-orch-work-without-args-08dec\", \"window_id\": \"@517\", \"skill\": \"feature-impl\", \"project_dir\": \"/Users/dylanconlin/Documents/personal/orch-cli\"}","created_at":"2025-12-09T03:18:01Z"},{"id":220,"issue_id":"orch-cli-x7d","author":"dylanconlin","text":"Phase: Planning - Analyzing orch work command to remove interactive picker mode","created_at":"2025-12-09T03:18:17Z"},{"id":221,"issue_id":"orch-cli-x7d","author":"dylanconlin","text":"investigation_path: /Users/dylanconlin/Documents/personal/orch-cli/.kb/investigations/2025-12-08-inv-orch-work-without-args-show.md","created_at":"2025-12-09T03:18:39Z"},{"id":222,"issue_id":"orch-cli-x7d","author":"dylanconlin","text":"Phase: Implementing - Starting TDD cycle. Will write failing test first, then implement fix.","created_at":"2025-12-09T03:18:47Z"},{"id":223,"issue_id":"orch-cli-x7d","author":"dylanconlin","text":"Phase: Complete - Changed orch work without args from interactive picker to list-and-exit mode. Removed click.prompt() that waited for user input. Now shows ready issues with inferred skills and suggested spawn commands, then exits. Aligns with AI-first design pattern (similar to bd ready). All 13 tests passing. Pushed to main.","created_at":"2025-12-09T03:21:12Z"}]}
{"id":"orch-cli-xac","title":"orch wait shows 'Unknown' phase when agent hasn't filled workspace yet","description":"","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-11-30T15:47:58.755017-08:00","updated_at":"2025-11-30T16:31:18.968481-08:00","closed_at":"2025-11-30T16:31:18.968481-08:00","close_reason":"Fixed in 810e1af - parse_workspace now reads YAML frontmatter"}
{"id":"orch-cli-xlt","title":"Fix false positive: WORKSPACE.md missing violation on just-spawned agents","description":"## Problem\n`orch check` reports a CRITICAL violation 'WORKSPACE.md file missing' immediately after spawning an agent, before the agent has had a chance to create its workspace file.\n\n## Expected\n- Either don't check for WORKSPACE.md until agent has been running for some threshold (e.g., 30 seconds)\n- Or downgrade from CRITICAL to INFO for newly-spawned agents\n- Or only check once agent phase is known\n\n## Reproduction\n1. `orch spawn feature-impl \"any task\"`\n2. Immediately run `orch check \u003cagent-id\u003e`\n3. See CRITICAL violation for missing WORKSPACE.md\n\n## Location\nLikely in orch-cli pattern checking logic","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-04T11:53:45.754945-08:00","updated_at":"2025-12-05T12:45:45.427312-08:00","closed_at":"2025-12-05T12:45:45.427312-08:00","close_reason":"Fixed: WORKSPACE.md missing is no longer a violation when beads_id present"}
{"id":"orch-cli-xn7","title":"Add bd blocked check at spawn time","description":"Warn when spawning work that has blocking dependencies.\n\n**Behavior:**\n- At spawn time, check `bd blocked` for the target issue\n- If blocked, display warning: 'Issue ok-xyz is blocked by ok-abc'\n- Allow spawn with --force, but surface the dependency\n\n**Why:**\n- Prevents futile work on blocked issues\n- Surfaces dependency context orchestrator may have forgotten\n- Part of 'reading between the lines' improvements\n\n**Reference:** .kb/investigations/2025-12-07-orchestrator-prompt-amplification-how-orchestrator.md","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-07T23:15:49.845355-08:00","updated_at":"2025-12-07T23:15:49.845355-08:00","dependencies":[{"issue_id":"orch-cli-xn7","depends_on_id":"orch-cli-y59","type":"parent-child","created_at":"2025-12-07T23:15:56.923967-08:00","created_by":"daemon"}]}
{"id":"orch-cli-xzy","title":"Add --auto-track flag to orch spawn for automatic beads tracking","description":"","notes":"Part of Strategic Orchestrator Pattern (decision: 2025-12-04-strategic-orchestrator-pattern.md). Auto-apply tracking heuristic: create beads issue if work should be discoverable, has clear completion, spans sessions, or part of larger goal. Skip if exploratory/time-sensitive/one-off/artifact is deliverable.","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-04T11:40:33.68344-08:00","updated_at":"2025-12-04T11:40:46.583063-08:00","dependencies":[{"issue_id":"orch-cli-xzy","depends_on_id":"orch-cli-y59","type":"parent-child","created_at":"2025-12-07T22:26:29.471032-08:00","created_by":"daemon"}]}
{"id":"orch-cli-y59","title":"Epic: Beads Integration","description":"Deeper integration between orch and beads for seamless agent lifecycle.\n\n**Key features:**\n- orch work command (start work on beads issue)\n- Spawn guards (refuse closed issues, warn on blockers)\n- Status integration (convergence, labels in context)\n- Auto-tracking for ad-hoc spawns\n\n**Goal:** beads becomes single source of truth for agent state.","status":"open","priority":1,"issue_type":"epic","created_at":"2025-12-07T22:26:22.65208-08:00","updated_at":"2025-12-07T22:26:22.65208-08:00"}
{"id":"orch-cli-yno","title":"Delete obsolete modules: roadmap.py, transcript_analysis.py","description":"Delete modules replaced by beads:\n- roadmap.py (16KB)\n- roadmap_markdown.py (14KB)\n- roadmap_utils.py (6KB)\n- transcript_analysis.py (8KB)\n\nThese predate beads adoption and are no longer used.","notes":"BLOCKED: roadmap modules still wired into spawn_commands.py via --from-roadmap flag. Need to deprecate CLI flag first.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-07T22:14:25.987657-08:00","updated_at":"2025-12-08T18:34:19.332404-08:00","dependencies":[{"issue_id":"orch-cli-yno","depends_on_id":"orch-cli-dgy","type":"parent-child","created_at":"2025-12-07T22:26:16.134239-08:00","created_by":"daemon"}]}
{"id":"orch-cli-yth","title":"Remove --dangerously-skip-permissions from spawn command","description":"Once --agent flag with tool restrictions is working, remove --dangerously-skip-permissions for improved security. Workers will only have access to tools defined in their skill.","status":"in_progress","priority":2,"issue_type":"feature","created_at":"2025-12-05T22:52:02.187617-08:00","updated_at":"2025-12-08T18:44:10.245569-08:00","dependencies":[{"issue_id":"orch-cli-yth","depends_on_id":"orch-cli-5o2","type":"blocks","created_at":"2025-12-08T18:38:39.081889-08:00","created_by":"daemon"}]}
{"id":"orch-cli-zac","title":"orch create-investigation uses wrong project directory","description":"## Bug\nRunning `orch create-investigation` from ~/orch-knowledge creates files in ~/Documents/personal/orch-cli/.orch/investigations/ instead of ~/orch-knowledge/.orch/investigations/.\n\n## Expected\nShould create investigation in the current project's .orch/investigations/ directory.\n\n## Discovered\nFrom investigation: .orch/investigations/simple/2025-12-02-orch-create-investigation-fails-template.md","notes":"workspace: .orch/workspace/feat-orch-create-inv-uses-02dec","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-02T12:33:08.189752-08:00","updated_at":"2025-12-03T12:34:46.973793-08:00","closed_at":"2025-12-03T12:34:46.973793-08:00","close_reason":"Resolved via orch complete","comments":[{"id":3,"issue_id":"orch-cli-zac","author":"dylanconlin","text":"Phase: Planning - Starting investigation of create-investigation command","created_at":"2025-12-02T20:35:28Z"},{"id":4,"issue_id":"orch-cli-zac","author":"dylanconlin","text":"Phase: Implementation - Fixing detect_project_dir() to check cwd before CLAUDE_PROJECT","created_at":"2025-12-02T20:36:51Z"},{"id":5,"issue_id":"orch-cli-zac","author":"dylanconlin","text":"Phase: Validation - All tests passing (31/31). Fix committed.","created_at":"2025-12-02T20:38:44Z"},{"id":6,"issue_id":"orch-cli-zac","author":"dylanconlin","text":"Phase: Complete - Bug fixed. detect_project_dir() now checks cwd before CLAUDE_PROJECT env var. All 31 tests pass. Commit: fdf884b","created_at":"2025-12-02T20:39:25Z"}]}
{"id":"orch-cli-zr2","title":"Test real-time UI updates","description":"Testing if beads-ui updates in real-time when agent spawns and updates phase","notes":"workspace: .orch/workspace/inv-test-real-time-updates-07dec","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T00:01:05.578425-08:00","updated_at":"2025-12-07T22:37:27.595167-08:00","closed_at":"2025-12-07T22:37:27.595167-08:00","close_reason":"Closed","comments":[{"id":164,"issue_id":"orch-cli-zr2","author":"dylanconlin","text":"agent_metadata: {\"agent_id\": \"inv-test-real-time-updates-07dec\", \"window_id\": \"@336\", \"skill\": \"investigation\", \"project_dir\": \"/Users/dylanconlin/Documents/personal/orch-cli\"}","created_at":"2025-12-07T08:01:13Z"},{"id":165,"issue_id":"orch-cli-zr2","author":"dylanconlin","text":"Phase: Planning - Starting real-time UI update investigation","created_at":"2025-12-07T08:01:25Z"},{"id":166,"issue_id":"orch-cli-zr2","author":"dylanconlin","text":"investigation_path: /Users/dylanconlin/Documents/personal/orch-cli/.kb/investigations/2025-12-07-test-real-time-updates.md","created_at":"2025-12-07T08:01:36Z"},{"id":167,"issue_id":"orch-cli-zr2","author":"dylanconlin","text":"Phase: Implementing - Testing real-time updates now (timestamp: 00:04:43)","created_at":"2025-12-07T08:04:43Z"},{"id":168,"issue_id":"orch-cli-zr2","author":"dylanconlin","text":"Phase: Complete - Verified beads-ui uses file watch + WebSocket push architecture. Real-time updates work within ~325ms. See .kb/investigations/2025-12-07-test-real-time-updates.md","created_at":"2025-12-07T08:06:20Z"}]}
