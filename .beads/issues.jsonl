{"id":"orch-cli-06j","title":"Fix verification to not require WORKSPACE.md (check .kb instead)","description":"","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-05T12:39:09.530096-08:00","updated_at":"2025-12-05T12:45:45.404473-08:00","closed_at":"2025-12-05T12:45:45.404473-08:00","close_reason":"Fixed: verification now checks .kb/ first, skips WORKSPACE.md requirement"}
{"id":"orch-cli-0b2","title":"Update skill docs that still reference WORKSPACE.md","description":"Documentation cleanup. Several skills still reference WORKSPACE.md in metadata/docs:\n- ~/.claude/skills/*/SKILL.md files have deliverables mentioning WORKSPACE.md path\n- orchestrator skill says 'Spawn creates: Workspace at .orch/workspace/{name}/WORKSPACE.md'\n- Various utility skills reference WORKSPACE.md locations\n\nThese should be updated to reflect beads-first architecture (beads is source of truth, not WORKSPACE.md).\n\nSource: .kb/investigations/2025-12-05-investigate-where-workspace-files-still.md (Finding 5)","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-05T13:36:36.774176-08:00","updated_at":"2025-12-05T13:36:36.774176-08:00"}
{"id":"orch-cli-0ii","title":"Implement tail command support for OpenCode backend","description":"","notes":"workspace: .orch/workspace/inv-impl-tail-command-support-02dec","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-01T10:24:50.81262-08:00","updated_at":"2025-12-02T11:15:19.288513-08:00","closed_at":"2025-12-02T11:15:19.288513-08:00","close_reason":"Resolved via orch complete"}
{"id":"orch-cli-0kk","title":"Standardize on orch-knowledge name (replace meta-orchestration references)","description":"## Context\nAgent confusion: `~/meta-orchestration` is a symlink to `~/orch-knowledge`, but documentation uses both names inconsistently. Agents don't know which is canonical.\n\n## Scope\n- Update ~50 references in orch-cli from `meta-orchestration` to `orch-knowledge`\n- Keep symlink for backwards compatibility\n- Add note in docs: 'Legacy symlink ~/meta-orchestration may exist'\n\n## Files to update\n- src/orch/cli.py (2 refs)\n- src/orch/init.py (3 refs)\n- src/orch/spawn.py (2 refs)\n- src/orch/spawn_prompt.py (1 ref)\n- src/orch/config.py (2 refs)\n- src/orch/help.py (~15 refs)\n- tests/*.py (many refs - update or leave as test fixtures)\n- .orch/CLAUDE.md (1 ref)\n- skills/orchestrator/SKILL.md (2 refs)\n\n## Acceptance Criteria\n- [ ] All user-facing references use orch-knowledge\n- [ ] Tests still pass\n- [ ] Symlink documented as legacy alias","notes":"workspace: .orch/workspace/feat-standardize-orch-02dec","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-02T14:43:32.895575-08:00","updated_at":"2025-12-03T12:34:50.266736-08:00","closed_at":"2025-12-03T12:34:50.266736-08:00","close_reason":"Resolved via orch complete","comments":[{"id":7,"issue_id":"orch-cli-0kk","author":"dylanconlin","text":"Phase: Planning - Finding all meta-orchestration references in codebase","created_at":"2025-12-02T22:44:51Z"},{"id":8,"issue_id":"orch-cli-0kk","author":"dylanconlin","text":"Phase: Validation - All changes complete. Tests: 47 fail (baseline was 51 fail, 4 tests fixed). Ready for commit.","created_at":"2025-12-02T22:50:46Z"},{"id":10,"issue_id":"orch-cli-0kk","author":"dylanconlin","text":"Phase: Complete - All changes committed (4390c4e). 26 files updated, tests improved (4 tests fixed). Ready for merge.","created_at":"2025-12-02T22:51:27Z"}]}
{"id":"orch-cli-11o","title":"Add bd health command for backlog health summary","description":"","notes":"Part of Strategic Orchestrator Pattern (decision: 2025-12-04-strategic-orchestrator-pattern.md). Command should run: bd stats \u0026\u0026 bd ready \u0026\u0026 bd blocked. Used at session start for backlog health check.","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-04T11:40:32.199357-08:00","updated_at":"2025-12-04T11:40:44.953185-08:00"}
{"id":"orch-cli-1b5","title":"P1: Make meta-orchestration boilerplate conditional","description":"From audit: .orch/investigations/simple/2025-12-04-audit-spawn-context-quality.md\n\n## Problem\n45 lines of meta-orchestration warnings in EVERY spawn context, even for projects like price-watch that will never edit meta-orchestration templates.\n\n## Solution\nIn spawn_prompt.py, only include meta-orchestration boilerplate when project_dir contains 'meta-orchestration' or 'orch-cli':\n\n```python\nif 'meta-orchestration' in str(config.project_dir) or 'orch-cli' in str(config.project_dir):\n    # Include meta-orchestration template system warnings\n```\n\n## Impact\nRemoves 45 lines of irrelevant content from non-meta projects","notes":"workspace: .orch/workspace/feat-make-meta-orchestration-04dec","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-04T15:55:02.800518-08:00","updated_at":"2025-12-04T16:18:44.523408-08:00","closed_at":"2025-12-04T16:18:44.523408-08:00","close_reason":"Resolved via orch complete","comments":[{"id":76,"issue_id":"orch-cli-1b5","author":"dylanconlin","text":"Phase: Planning - Analyzing spawn_prompt.py to make meta-orchestration boilerplate conditional","created_at":"2025-12-05T00:03:17Z"},{"id":80,"issue_id":"orch-cli-1b5","author":"dylanconlin","text":"Phase: Implementing - Writing failing test for conditional meta-orchestration boilerplate","created_at":"2025-12-05T00:04:05Z"},{"id":83,"issue_id":"orch-cli-1b5","author":"dylanconlin","text":"Phase: Complete - Implemented conditional meta-orchestration boilerplate. The ~45 lines of META-ORCHESTRATION TEMPLATE SYSTEM warnings are now only included for orch-cli and orch-knowledge projects. Tests added and passing.","created_at":"2025-12-05T00:07:05Z"}]}
{"id":"orch-cli-1kq","title":"Fix: orch spawn --issue fails with project registry mismatch","description":"BUG: `orch spawn --issue \u003cid\u003e` fails even when in an orch project directory.\n\nREPRODUCTION:\n1. cd /Users/dylanconlin/Documents/personal/orch-cli\n2. orch projects scan  # finds orch-cli\n3. orch spawn research --issue orch-cli-vny\n4. Error: Project 'orch-cli' not found (from --project)\n\nOBSERVED:\n- `orch projects scan` finds and caches orch-cli\n- But `orch spawn --issue` says project not found\n- Available projects list shows different projects (orch-knowledge, price-watch, etc.)\n\nEXPECTED:\n- Should spawn successfully since we're in the orch-cli directory\n\nLIKELY CAUSE:\n- Two different project registries/caches being used\n- Or --issue flag triggers different project lookup logic than auto-detect","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-02T10:32:36.318002-08:00","updated_at":"2025-12-02T10:39:40.856372-08:00","closed_at":"2025-12-02T10:39:40.856372-08:00","close_reason":"Fixed: pass project_dir to spawn_with_skill to skip re-resolution when auto-detected"}
{"id":"orch-cli-2fz","title":"E2E test: verify beads-first workflow","description":"Quick test to verify:\n- spawn creates SPAWN_CONTEXT.md but NOT WORKSPACE.md\n- agent can use bd comment for phase tracking\n- orch check shows phase from beads comments\n- orch complete verifies Phase: Complete in comments","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-02T15:25:02.565357-08:00","updated_at":"2025-12-02T15:27:51.879179-08:00","closed_at":"2025-12-02T15:27:51.879179-08:00","close_reason":"E2E test completed. 2/4 passed. Found gap: orch commands require registry entry. Recommendation: support --issue flag for beads-only workflow.","comments":[{"id":16,"issue_id":"orch-cli-2fz","author":"dylanconlin","text":"Phase: Planning - Verifying beads-first workflow. Registered as ChartreuseBear.","created_at":"2025-12-02T23:25:42Z"},{"id":17,"issue_id":"orch-cli-2fz","author":"dylanconlin","text":"Phase: Implementing - Test results documented. Findings:\n1. ‚úÖ spawn creates SPAWN_CONTEXT.md but NOT WORKSPACE.md - CONFIRMED\n2. ‚úÖ bd comment for phase tracking works - CONFIRMED  \n3. ‚ùå orch check shows phase from beads - NOT WORKING (agent not in registry)\n4. üîÑ orch complete verifies Phase: Complete - CANNOT TEST (depends on 3)","created_at":"2025-12-02T23:26:46Z"},{"id":18,"issue_id":"orch-cli-2fz","author":"dylanconlin","text":"FINDINGS - E2E Test Results:\n\n**Test Case 1: spawn creates SPAWN_CONTEXT.md but NOT WORKSPACE.md**\n‚úÖ PASS - Workspace directory contains only SPAWN_CONTEXT.md (56KB)\n\n**Test Case 2: agent can use bd comment for phase tracking**\n‚úÖ PASS - Comments successfully added and visible via 'bd comments --json'\n\n**Test Case 3: orch check shows phase from beads comments**\n‚ùå FAIL - orch check requires agent in registry, but agent not registered\nRoot cause: Agent started manually (tmux window 'base'), not via 'orch spawn --issue'\nCode path exists (monitor.py:127-135) but requires beads_id in registry\n\n**Test Case 4: orch complete verifies Phase: Complete**\n‚è≠Ô∏è SKIPPED - Depends on test case 3 (agent registration)\n\n**Architectural Gap Identified:**\nBeads-first workflow assumes agents registered in registry with beads_id field.\nManual agent starts (or agents without registry entry) cannot use orch check/complete.\n\n**Recommendation:**\nConsider allowing orch check/complete to work with just beads issue ID\nwithout requiring agent in registry (enables simpler beads-first workflow)","created_at":"2025-12-02T23:27:22Z"},{"id":19,"issue_id":"orch-cli-2fz","author":"dylanconlin","text":"Phase: Complete - E2E test completed. 2/4 test cases passed, 1 failed (expected - architectural gap), 1 skipped. See detailed findings in previous comment.","created_at":"2025-12-02T23:27:29Z"}]}
{"id":"orch-cli-2j0","title":"Update skills/docs to use kb instead of orch create-*","description":"Find all references to orch create-investigation and orch create-decision in skills and docs, update to kb create investigation/decision.","notes":"workspace: .orch/workspace/feat-update-skills-docs-use-03dec","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-03T15:39:24.690405-08:00","updated_at":"2025-12-03T16:03:56.609359-08:00","closed_at":"2025-12-03T16:03:56.609359-08:00","close_reason":"Resolved via orch complete","dependencies":[{"issue_id":"orch-cli-2j0","depends_on_id":"orch-cli-cfh","type":"blocks","created_at":"2025-12-03T15:40:24.905505-08:00","created_by":"daemon"}],"comments":[{"id":43,"issue_id":"orch-cli-2j0","author":"dylanconlin","text":"Phase: Planning - Searching for all orch create-* references in skills and docs","created_at":"2025-12-03T23:57:38Z"},{"id":44,"issue_id":"orch-cli-2j0","author":"dylanconlin","text":"QUESTION: Found references in both orch-cli (spawn_prompt.py, workspace_commands.py) AND ~/.claude/skills (managed by orch-knowledge). Skills updates require orch-knowledge repo. Should I: (A) Update only orch-cli files here, (B) Update both (skills directly), or (C) Create separate beads issue for orch-knowledge skills?","created_at":"2025-12-03T23:58:32Z"},{"id":45,"issue_id":"orch-cli-2j0","author":"dylanconlin","text":"Phase: Validation - Updated spawn_prompt.py to use 'kb create investigation'. Commit: 82f9d89. Tests passing. Note: Skills at ~/.claude/skills still reference old command but are managed by orch-knowledge repo (separate task needed).","created_at":"2025-12-04T00:00:37Z"},{"id":46,"issue_id":"orch-cli-2j0","author":"dylanconlin","text":"Phase: Complete - Updated spawn_prompt.py to use 'kb create investigation' (commit 82f9d89). Tests passing. Remaining: Skills in ~/.claude/skills reference old command but are managed by orch-knowledge repo - recommend creating separate beads issue for orch-knowledge.","created_at":"2025-12-04T00:01:11Z"}]}
{"id":"orch-cli-30j","title":"Remove legacy WORKSPACE.md instructions from spawn_prompt.py","description":"spawn_prompt.py still includes WORKSPACE.md creation instructions when requires_workspace=true, even though beads is now source of truth for progress tracking.\n\n**Current state:**\n- spawn.py correctly doesn't create WORKSPACE.md (lines 1154, 1563, 2045 say 'beads is source of truth')\n- But spawn_prompt.py still tells agents to create and update WORKSPACE.md\n\n**Target state:**\n- Remove/update workspace instructions in spawn_prompt.py\n- Agents should only use bd comment for progress tracking\n- WORKSPACE.md creation should be optional/eliminated\n\n**Discovered by:** orch-knowledge meta-orchestration-do0 investigation","notes":"workspace: .orch/workspace/feat-remove-legacy-workspace-04dec","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-03T21:51:45.635472-08:00","updated_at":"2025-12-04T11:13:31.942283-08:00","closed_at":"2025-12-04T11:13:31.942283-08:00","close_reason":"Resolved via orch complete","comments":[{"id":55,"issue_id":"orch-cli-30j","author":"dylanconlin","text":"Phase: Planning - Analyzing spawn_prompt.py to identify WORKSPACE.md instructions to remove","created_at":"2025-12-04T19:06:37Z"},{"id":56,"issue_id":"orch-cli-30j","author":"dylanconlin","text":"Phase: Implementing - Starting TDD. Identified 9 areas in spawn_prompt.py to update. Key changes: remove WORKSPACE.md coordination instructions, make bd comment the sole progress tracking method.","created_at":"2025-12-04T19:07:44Z"},{"id":57,"issue_id":"orch-cli-30j","author":"dylanconlin","text":"Phase: Complete - Removed legacy WORKSPACE.md instructions from spawn_prompt.py. Now beads (bd comment) is the sole source of truth for progress tracking. Changes: fallback_template() updated, coordination instructions simplified, COORDINATION ARTIFACT POPULATION section removed, STATUS UPDATES uses beads, verification guidance uses beads. Tests: 146 spawn-related tests pass.","created_at":"2025-12-04T19:12:16Z"}]}
{"id":"orch-cli-3cs","title":"Fix Task tool vs orch spawn confusion in orchestrator skill","description":"","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-02T16:34:45.330239-08:00","updated_at":"2025-12-02T16:34:52.930473-08:00","closed_at":"2025-12-02T16:34:52.930473-08:00","close_reason":"Fixed: Added explicit disambiguation section to orchestrator skill (~/.claude/skills/policy/orchestrator/SKILL.md). New section shows table comparing Task tool subagents vs orch spawn skills, the exact failure pattern, and a simple lookup rule. Prevents orchestrators from using Task tool with skill names like systematic-debugging that only work via orch spawn."}
{"id":"orch-cli-3kr","title":"orch spawn --issue should set status to in_progress","description":"## Enhancement\nWhen spawning from a beads issue, `orch spawn --issue \u003cid\u003e` should automatically run `bd update \u003cid\u003e --status=in_progress`.\n\n## Current behavior\n- Issue stays `open` while agent is working\n- `orch complete` sets status to `closed`\n\n## Proposed\n- `orch spawn --issue` ‚Üí `in_progress`\n- `orch complete` ‚Üí `closed` (already works)\n\nThis completes the lifecycle: open ‚Üí in_progress ‚Üí closed","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-02T12:38:13.210254-08:00","updated_at":"2025-12-02T12:39:51.419156-08:00","closed_at":"2025-12-02T12:39:51.419156-08:00","close_reason":"Implemented in d21af43"}
{"id":"orch-cli-42s","title":"Cross-repo spawns should commit workspace back to spawning repo","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-30T15:48:03.367798-08:00","updated_at":"2025-11-30T16:31:57.923427-08:00","closed_at":"2025-11-30T16:31:57.923427-08:00","close_reason":"Fixed in acb0f9b - sync cross-repo workspace back to origin on completion"}
{"id":"orch-cli-439","title":"orch spawn heredoc/stdin context not incorporated into SPAWN_CONTEXT","description":"When passing additional context via heredoc to orch spawn, the content is not incorporated into SPAWN_CONTEXT.md.\n\n**Reproduction:**\n```bash\norch spawn investigation \"task name\" \u003c\u003c 'CONTEXT'\n## Investigation Question\nDetailed context here...\nCONTEXT\n```\n\n**Expected:** Heredoc content appears in SPAWN_CONTEXT.md (perhaps in a CONTEXT section)\n\n**Actual:** SPAWN_CONTEXT.md line 21 shows `CONTEXT: [See task description]` - placeholder not filled. Agent doesn't receive the detailed context.\n\n**Impact:** Agents spawn without critical context (file paths, specific questions, investigation goals). Orchestrators think they provided context but agents are flying blind.\n\n**Possible fixes:**\n1. Read stdin in spawn.py and inject into SPAWN_CONTEXT template\n2. Add explicit --context or --context-file flag\n3. Both (stdin for quick inline, --context-file for longer content)","notes":"workspace: .orch/workspace/feat-orch-spawn-heredoc-stdin-05dec","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-05T16:56:45.260904-08:00","updated_at":"2025-12-05T17:05:42.904538-08:00","closed_at":"2025-12-05T17:05:42.904538-08:00","close_reason":"Resolved via orch complete","labels":["P1,spawn,ux-bug"],"comments":[{"id":108,"issue_id":"orch-cli-439","author":"dylanconlin","text":"Phase: Planning - Reading spawn.py and spawn_prompt.py to understand current context handling","created_at":"2025-12-06T00:58:35Z"},{"id":109,"issue_id":"orch-cli-439","author":"dylanconlin","text":"Phase: Implementing - Root cause identified: stdin ignored without --from-stdin flag, and --from-stdin replaces entire prompt. Fix: auto-detect piped stdin and add to additional_context","created_at":"2025-12-06T00:59:09Z"},{"id":110,"issue_id":"orch-cli-439","author":"dylanconlin","text":"Phase: Validation - All tests passing. Fix implemented: stdin_context parameter added, --from-stdin now adds to ADDITIONAL CONTEXT instead of replacing prompt, auto-detect piped stdin","created_at":"2025-12-06T01:05:01Z"},{"id":111,"issue_id":"orch-cli-439","author":"dylanconlin","text":"Phase: Complete - Implemented stdin_context to incorporate heredoc/piped content into SPAWN_CONTEXT.md ADDITIONAL CONTEXT section. 7 new tests, all passing.","created_at":"2025-12-06T01:05:35Z"}]}
{"id":"orch-cli-57n","title":"Fix investigation path mismatch - store actual filename in registry via beads comment","description":"Root cause: Three-layer path mismatch between skill frontmatter (.orch/investigations/simple/), spawn prompt (.kb/investigations/{type}/), and kb actual output (.kb/investigations/).\n\nImplementation (Option C from investigation):\n1. Update spawn prompt to instruct agents: after kb create, capture the output path\n2. Add guidance to report path via bd comment \u003cid\u003e 'investigation_path: /path/to/file.md'\n3. Update orch complete to parse beads comments for investigation_path: prefix\n4. Store extracted path in registry as primary_artifact\n5. Verification continues to work via existing primary_artifact check\n\nSee: .kb/investigations/2025-12-06-orch-complete-verification-filename-mismatch.md","notes":"workspace: .orch/workspace/feat-fix-inv-path-mismatch-06dec","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-06T18:28:43.922715-08:00","updated_at":"2025-12-06T18:37:36.716347-08:00","closed_at":"2025-12-06T18:37:36.716347-08:00","close_reason":"Resolved via orch complete","comments":[{"id":123,"issue_id":"orch-cli-57n","author":"dylanconlin","text":"Phase: Planning - Reviewing investigation findings and identifying implementation targets","created_at":"2025-12-07T02:29:27Z"},{"id":124,"issue_id":"orch-cli-57n","author":"dylanconlin","text":"Phase: Implementing - Starting TDD cycle for investigation path extraction","created_at":"2025-12-07T02:30:15Z"},{"id":125,"issue_id":"orch-cli-57n","author":"dylanconlin","text":"investigation_path: /Users/dylanconlin/Documents/personal/orch-cli/.kb/investigations/2025-12-06-orch-complete-verification-filename-mismatch.md","created_at":"2025-12-07T02:35:49Z"},{"id":126,"issue_id":"orch-cli-57n","author":"dylanconlin","text":"Phase: Complete - Implemented investigation path extraction via beads comments. Three commits: (1) beads_integration.get_investigation_path_from_comments(), (2) complete.py extracts path and updates registry, (3) spawn_prompt.py instructs agents to report path. All 94 related tests pass.","created_at":"2025-12-07T02:35:56Z"}]}
{"id":"orch-cli-5o2","title":"Pass --agent flag to Claude Code in ClaudeBackend","description":"Update ClaudeBackend.build_command() to pass --agent {skill}-worker when agent file exists. Minor change to backends/claude.py.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-05T22:52:02.05705-08:00","updated_at":"2025-12-05T22:52:02.05705-08:00","dependencies":[{"issue_id":"orch-cli-5o2","depends_on_id":"orch-cli-yth","type":"blocks","created_at":"2025-12-05T22:52:16.733604-08:00","created_by":"daemon"}]}
{"id":"orch-cli-6tr","title":"Investigate removing .orch/workspace/ directory","description":"Now that beads handles progress tracking, the workspace directory may be redundant.\n\n**Current use:**\n- SPAWN_CONTEXT.md (spawn prompt for agent)\n- WORKSPACE.md (removed - now beads)\n\n**Options to evaluate:**\n1. Keep minimal workspace - just for SPAWN_CONTEXT.md\n2. Inline spawn context to beads issue description/attachment\n3. Use temp file for SPAWN_CONTEXT.md\n\n**Questions:**\n- Where should SPAWN_CONTEXT.md live if not in workspace?\n- Is agent isolation still valuable?\n- What breaks if we remove workspace dir?\n\n**Discovered from:** orch-cli-30j post-mortem","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-04T11:16:46.059077-08:00","updated_at":"2025-12-04T11:16:46.059077-08:00","comments":[{"id":88,"issue_id":"orch-cli-6tr","author":"dylanconlin","text":"Phase: Planning - Investigating WORKSPACE.md file creation across orch-cli, orch-knowledge, and kb-cli","created_at":"2025-12-05T20:30:44Z"},{"id":89,"issue_id":"orch-cli-6tr","author":"dylanconlin","text":"Phase: Complete - Investigation found that WORKSPACE.md files are NO LONGER being created after commit fbec053 (Dec 4). Existing files are from pre-Dec 4 spawns when spawn_prompt.py still instructed agents to create them. No urgent changes needed - fix is already in place. Low-priority cleanup: remove dead create_workspace() function, update skill docs.","created_at":"2025-12-05T20:35:56Z"}]}
{"id":"orch-cli-71q","title":"Generate .claude/agents/ files at spawn time from skill metadata","description":"Add generate_agent_file() function in spawn.py. Creates agent file with tool restrictions and model from skill frontmatter. Agent file provides restrictions, SPAWN_CONTEXT.md provides procedural guidance.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-05T22:52:01.924252-08:00","updated_at":"2025-12-05T22:52:01.924252-08:00","dependencies":[{"issue_id":"orch-cli-71q","depends_on_id":"orch-cli-5o2","type":"blocks","created_at":"2025-12-05T22:52:16.712694-08:00","created_by":"daemon"}]}
{"id":"orch-cli-766","title":"Remove ~/.orch/templates/WORKSPACE.md template","description":"Template cleanup. The WORKSPACE.md template at ~/.orch/templates/WORKSPACE.md is no longer used - beads is now source of truth for agent state. Can be removed to avoid confusion.\n\nSource: .kb/investigations/2025-12-05-investigate-where-workspace-files-still.md","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-05T13:36:37.92888-08:00","updated_at":"2025-12-05T13:36:37.92888-08:00"}
{"id":"orch-cli-81h","title":"Add reverse lint: show affected skills when CLI commands change","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-30T15:47:58.848861-08:00","updated_at":"2025-11-30T16:31:59.56239-08:00","closed_at":"2025-11-30T16:31:59.56239-08:00","close_reason":"Fixed in 6aaf654 - reverse lint shows affected skills when CLI commands change"}
{"id":"orch-cli-8yz","title":"Pass beads labels to SPAWN_CONTEXT","description":"Add labels field to BeadsIssue dataclass and include in SPAWN_CONTEXT metadata section when using --issue flag. Enables cross-repo routing (e.g., 'target:orch-cli' label signals work belongs in different repo) and categorization for agents.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-05T16:47:19.503195-08:00","updated_at":"2025-12-05T16:47:19.503195-08:00","labels":["P2,beads-integration"]}
{"id":"orch-cli-916","title":"Fix duplicate prefixes in tmux window names (inv-inv, debug-debug)","description":"Tmux window names show duplicate prefixes like 'inv-inv-tmux-ghostty-config' and 'debug-debug-sendcutsend'. The skill prefix (inv, debug, feat) is being added twice - once in the workspace name generation and once in the window naming. Should be 'inv-tmux-ghostty-config' not 'inv-inv-tmux-ghostty-config'.","notes":"workspace: .orch/workspace/debug-fix-duplicate-prefixes-05dec","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-05T12:53:24.485377-08:00","updated_at":"2025-12-05T22:49:41.14541-08:00","closed_at":"2025-12-05T22:49:41.14541-08:00","close_reason":"Closed","comments":[{"id":90,"issue_id":"orch-cli-916","author":"dylanconlin","text":"Phase: Planning - Investigating duplicate prefix issue in tmux window names","created_at":"2025-12-05T20:55:15Z"},{"id":91,"issue_id":"orch-cli-916","author":"dylanconlin","text":"Phase: Implementing - Root cause identified: ABBREVIATIONS and SKILL_PREFIXES both produce same values (investigate‚Üíinv, investigation‚Üíinv), causing duplicate when concatenated. Fix: filter words matching skill prefix before concatenation.","created_at":"2025-12-05T20:57:19Z"},{"id":92,"issue_id":"orch-cli-916","author":"dylanconlin","text":"Self-review passed - ready for completion. Changes: workspace_naming.py fix (4 lines), regression test added, investigation documented.","created_at":"2025-12-05T20:58:42Z"},{"id":93,"issue_id":"orch-cli-916","author":"dylanconlin","text":"Phase: Complete - Fixed duplicate prefix issue in workspace names. Root cause: ABBREVIATIONS and SKILL_PREFIXES both produce same values (investigate‚Üíinv, investigation‚Üíinv), causing collision. Fix: filter words matching skill prefix before concatenation. Tests passing, commit 58ccb1e.","created_at":"2025-12-05T20:59:05Z"},{"id":94,"issue_id":"orch-cli-916","author":"dylanconlin","text":"Phase: Implementing - Adding project name and beads ID to tmux window names, dropping 'worker:' prefix and date suffix","created_at":"2025-12-05T21:06:15Z"},{"id":95,"issue_id":"orch-cli-916","author":"dylanconlin","text":"Phase: Complete - Two features implemented: (1) Fixed duplicate prefix bug (58ccb1e), (2) Improved window names with project context and beads ID (5f708ed). New format: 'üîç orch-cli: 916: fix-prefixes' instead of 'üîç worker: debug-fix-duplicate-prefixes-05dec'. All 22 tests passing.","created_at":"2025-12-05T21:08:39Z"}]}
{"id":"orch-cli-97y","title":"Remove dead create_workspace() function from workspace.py","description":"Dead code cleanup. The create_workspace() function in workspace.py (line ~959) still creates WORKSPACE.md files when called, but nothing calls this function anymore - beads is now source of truth. Safe to remove.\n\nSource: .kb/investigations/2025-12-05-investigate-where-workspace-files-still.md (Finding 4)","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-05T13:36:35.207815-08:00","updated_at":"2025-12-05T13:36:35.207815-08:00"}
{"id":"orch-cli-98u","title":"Add allowed_tools/disallowed_tools/default_model to skill frontmatter schema","description":"Extend SkillMetadata in skill_discovery.py to support tool restrictions. Skills can then specify which tools they need in SKILL.md frontmatter. Part of --agent flag integration.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-05T22:52:01.796655-08:00","updated_at":"2025-12-05T22:52:01.796655-08:00","dependencies":[{"issue_id":"orch-cli-98u","depends_on_id":"orch-cli-71q","type":"blocks","created_at":"2025-12-05T22:52:16.69253-08:00","created_by":"daemon"}]}
{"id":"orch-cli-999","title":"Review and update orch init - creates outdated file structure","description":"orch init creates outdated file structure that no longer matches current patterns.\n\n**Observed:**\n- Creates .orch/CLAUDE.md (skeleton with template markers)\n- References non-existent 'orch build-orchestrator-context' command\n- May have other outdated patterns\n\n**Expected:**\n- Review current orch init behavior against actual usage patterns\n- Update to match how projects are actually structured now\n- Remove references to deprecated commands/patterns\n\n**Triggered by:** Initializing orch-cli itself and noticing the mismatch","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-30T15:57:32.291574-08:00","updated_at":"2025-11-30T16:13:07.007576-08:00","closed_at":"2025-11-30T16:13:07.007576-08:00","close_reason":"Fixed in 5db06a7 - removed deprecated build-orchestrator-context reference, added graceful template handling"}
{"id":"orch-cli-avs","title":"orch complete closes issues without verifying work was done","description":"## Problem\n\n`orch complete` closed beads issues even when:\n1. No WORKSPACE.md was created (agent never tracked work)\n2. No commits were made\n3. Actual implementation work was never done\n\n## Evidence\n\nIn price-watch project (2025-12-04):\n- pw-5mi, pw-v92, pw-cf8 all closed via `orch complete`\n- All 3 workspaces had only SPAWN_CONTEXT.md (no WORKSPACE.md)\n- Zero commits related to the work\n- Actual configs still use base parts (work never done)\n\n## Expected Behavior\n\n`orch complete` should fail or warn if:\n1. WORKSPACE.md doesn't exist (agent never started tracking)\n2. No commits since spawn time\n3. Phase is not 'Complete' in WORKSPACE.md\n\n## Current Behavior\n\n`orch complete` closes the beads issue based solely on agent-id existing in registry, without verifying deliverables.\n\n## Impact\n\nWork gets lost - issues appear done but aren't. Discovered during post-session audit when 5 configs still needed updates despite 3 'completed' issues.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-04T15:28:05.075002-08:00","updated_at":"2025-12-05T12:26:05.726433-08:00","closed_at":"2025-12-05T12:26:05.726433-08:00","close_reason":"Fixed: verify_agent_work() now runs before closing beads issues in async mode"}
{"id":"orch-cli-b3w","title":"orch complete fails for ad-hoc spawns without WORKSPACE.md","description":"When agents are spawned ad-hoc (without --issue), there's no beads_id. Verification currently requires either WORKSPACE.md OR beads_id to verify completion. Since WORKSPACE.md is no longer created (Dec 4 fix), ad-hoc spawns can't complete even when commits exist. Fix: Allow completion when commits exist since spawn time, regardless of beads_id.","notes":"workspace: .orch/workspace/feat-orch-complete-fails-0402-05dec","status":"in_progress","priority":1,"issue_type":"bug","created_at":"2025-12-05T16:06:43.345237-08:00","updated_at":"2025-12-05T16:11:07.68153-08:00","comments":[{"id":102,"issue_id":"orch-cli-b3w","author":"dylanconlin","text":"Phase: Planning - Investigating orch complete failure for ad-hoc spawns without WORKSPACE.md","created_at":"2025-12-06T00:07:49Z"},{"id":103,"issue_id":"orch-cli-b3w","author":"dylanconlin","text":"Phase: Implementation - Writing failing test for ad-hoc spawn completion verification","created_at":"2025-12-06T00:08:28Z"},{"id":104,"issue_id":"orch-cli-b3w","author":"dylanconlin","text":"Phase: Planning - Fixing orch complete failure for ad-hoc spawns without WORKSPACE.md","created_at":"2025-12-06T00:11:31Z"},{"id":105,"issue_id":"orch-cli-b3w","author":"dylanconlin","text":"Phase: Implementing - Adding commit-based verification for ad-hoc spawns without WORKSPACE.md","created_at":"2025-12-06T00:12:26Z"},{"id":106,"issue_id":"orch-cli-b3w","author":"dylanconlin","text":"Phase: Validation - Implementation complete, running full test suite","created_at":"2025-12-06T00:12:55Z"},{"id":107,"issue_id":"orch-cli-b3w","author":"dylanconlin","text":"Phase: Complete - Fix implemented and validated. All test_complete.py tests passing (21/21). Ad-hoc spawns can now complete when commits exist since spawn time, even without WORKSPACE.md or beads_id. Commit: ec25814","created_at":"2025-12-06T00:14:23Z"}]}
{"id":"orch-cli-b4x","title":"Update skills to use beads comments instead of WORKSPACE.md","description":"## Context\nPhase 2+3 removed WORKSPACE.md creation from spawn, but skill guidance still tells agents to update workspace files.\n\n## Gap\n- spawn.py no longer creates WORKSPACE.md ‚úì\n- orch check/complete read from beads ‚úì\n- Skills still reference WORKSPACE.md and tell agents to update it ‚úó\n\n## Affected Skills (10+)\n- feature-impl\n- architect\n- investigation\n- codebase-audit\n- systematic-debugging\n- and others\n\n## Scope\n- Update all spawnable skills to use `bd comment \u003cid\u003e` for progress\n- Remove WORKSPACE.md references from skill templates\n- Skills should guide agents to report phase transitions via beads\n\n## Source Location\nSkills source: ~/orch-knowledge/skills/src/\nBuild command: `orch build skills`","notes":"workspace: .orch/workspace/feat-update-skills-use-beads-02dec","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-02T16:22:26.78418-08:00","updated_at":"2025-12-03T08:13:31.240179-08:00","closed_at":"2025-12-03T08:13:31.240179-08:00","close_reason":"Resolved via orch complete","comments":[{"id":25,"issue_id":"orch-cli-b4x","author":"dylanconlin","text":"Phase: Planning - LilacLake starting work. Analyzing skill source structure in orch-knowledge.","created_at":"2025-12-03T00:27:59Z"},{"id":26,"issue_id":"orch-cli-b4x","author":"dylanconlin","text":"Phase: Implementing - Analyzed 7 skills. Changes: Remove workspace deliverables, add bd comment guidance for progress tracking. Starting with feature-impl template.","created_at":"2025-12-03T00:29:08Z"},{"id":27,"issue_id":"orch-cli-b4x","author":"dylanconlin","text":"Phase: Complete - All 7 spawnable skills updated to use bd comment for progress tracking. Removed WORKSPACE.md as required deliverable. Changes committed to orch-knowledge repo (85ab7e6).","created_at":"2025-12-03T00:40:41Z"}]}
{"id":"orch-cli-bau","title":"Set up Homebrew tap for kb-cli","description":"Create homebrew tap for easy kb-cli installation: brew install dylanconlin/tap/kb","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-03T15:39:26.400051-08:00","updated_at":"2025-12-03T15:41:19.443603-08:00","closed_at":"2025-12-03T15:41:19.443603-08:00","close_reason":"Not needed - keeping local","dependencies":[{"issue_id":"orch-cli-bau","depends_on_id":"orch-cli-jnm","type":"blocks","created_at":"2025-12-03T15:40:26.19231-08:00","created_by":"daemon"}]}
{"id":"orch-cli-bha","title":"Agents complete work but skip completion protocol (no WORKSPACE.md, no Phase: Complete)","description":"## Problem\nAgents finish their actual work (commits, tests pass) but don't follow completion protocol:\n- ‚ùå Never create WORKSPACE.md\n- ‚ùå Never mark Phase: Complete\n- ‚ùå Sit idle at prompt instead of exiting\n\nThis leaves agents in limbo - work is done but orch system can't detect completion properly.\n\n## Example\nfeat-simplify-coll-run-04dec:\n- ‚úÖ Committed work (607a142 - simplified 3 collection run configs)\n- ‚úÖ Tests passed\n- ‚ùå No WORKSPACE.md created\n- ‚ùå No Phase: Complete\n- ‚ùå Still at prompt (12% context left)\n\n## Root Cause Candidates\n1. Skill instructions not prominent enough about workspace/phase requirements\n2. Agent context exhaustion before reaching completion steps\n3. Missing enforcement in spawn context\n4. Agent confused about when to create WORKSPACE.md vs just work\n\n## Impact\n- Manual intervention required to detect and clean up\n- orch complete can't auto-verify\n- Work gets stuck in limbo state","notes":"workspace: .orch/workspace/feat-agents-complete-wor-2922-04dec","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-04T14:06:44.961496-08:00","updated_at":"2025-12-04T15:31:36.801683-08:00","closed_at":"2025-12-04T15:31:36.801683-08:00","close_reason":"Resolved via orch complete","comments":[{"id":66,"issue_id":"orch-cli-bha","author":"dylanconlin","text":"Phase: Planning - Investigating why agents skip completion protocol","created_at":"2025-12-04T22:07:17Z"},{"id":67,"issue_id":"orch-cli-bha","author":"dylanconlin","text":"Phase: Planning - Investigating why agents skip completion protocol (no WORKSPACE.md, no Phase: Complete)","created_at":"2025-12-04T22:07:57Z"},{"id":68,"issue_id":"orch-cli-bha","author":"dylanconlin","text":"Phase: Implementing - Investigation complete. Root cause: completion instructions buried 2000+ lines into SPAWN_CONTEXT. Fix: Add prominent SESSION COMPLETE PROTOCOL block early in spawn prompt (mirrors FIRST 3 ACTIONS pattern).","created_at":"2025-12-04T22:09:58Z"},{"id":69,"issue_id":"orch-cli-bha","author":"dylanconlin","text":"Phase: Complete - Added prominent SESSION COMPLETE PROTOCOL block to spawn_prompt.py. Now appears immediately after FIRST 3 ACTIONS block so agents read completion instructions early. All tests pass (8/8). Commit: bd17962","created_at":"2025-12-04T22:13:44Z"}]}
{"id":"orch-cli-btv","title":"Add Request‚ÜíBeads‚ÜíSpawn decision tree to orchestrator skill","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-02T16:42:07.91462-08:00","updated_at":"2025-12-02T16:42:14.772276-08:00","closed_at":"2025-12-02T16:42:14.772276-08:00","close_reason":"Added 'Request ‚Üí Beads ‚Üí Spawn' section to orchestrator skill. Provides decision tree for when user makes ad-hoc requests: 1) check for existing beads issue, 2) assess if substantial work, 3) create issue if needed before spawning. Includes quick reference table for common request types."}
{"id":"orch-cli-bve","title":"Phase 3: Update orch commands to read from beads","description":"## Context\nFrom investigation: .orch/investigations/design/2025-12-01-orch-cli-role-in-agent-ecosystem.md\n\nFinal phase: orch commands read/write beads instead of workspace files.\n\n## Scope\n- `orch status` reads from `bd list` instead of parsing workspace files\n- `orch complete` runs `bd close` with summary\n- `orch check` shows beads issue details\n\n## Acceptance Criteria\n- [ ] `orch status` shows agent state from beads\n- [ ] `orch complete` closes associated beads issue\n- [ ] `orch check` displays beads issue content\n- [ ] No workspace file parsing in monitoring_commands.py","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-01T11:59:25.356067-08:00","updated_at":"2025-12-02T15:21:56.266939-08:00","closed_at":"2025-12-02T15:21:56.266939-08:00","close_reason":"Implemented in commit f021e74","dependencies":[{"issue_id":"orch-cli-bve","depends_on_id":"orch-cli-csx","type":"blocks","created_at":"2025-12-01T11:59:31.373565-08:00","created_by":"daemon"}],"comments":[{"id":15,"issue_id":"orch-cli-bve","author":"dylanconlin","text":"Phase: Complete - Added beads-based phase tracking: get_phase_from_comments(), has_phase_complete(). orch complete now verifies Phase: Complete before closing. All 34 beads tests passing.","created_at":"2025-12-02T23:21:56Z"}]}
{"id":"orch-cli-cfh","title":"Deprecate orch knowledge commands in favor of kb","description":"Remove or deprecate: orch create-investigation, orch create-decision, orch search. Add deprecation warnings pointing to kb equivalents.","notes":"workspace: .orch/workspace/feat-deprecate-orch-knowledge-03dec","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-03T15:39:23.729737-08:00","updated_at":"2025-12-03T15:55:38.544374-08:00","closed_at":"2025-12-03T15:55:38.544374-08:00","close_reason":"Resolved via orch complete","dependencies":[{"issue_id":"orch-cli-cfh","depends_on_id":"orch-cli-jnm","type":"blocks","created_at":"2025-12-03T15:40:23.723769-08:00","created_by":"daemon"}],"comments":[{"id":39,"issue_id":"orch-cli-cfh","author":"dylanconlin","text":"Phase: Planning - Workspace created, beginning investigation of commands to deprecate","created_at":"2025-12-03T23:42:51Z"},{"id":40,"issue_id":"orch-cli-cfh","author":"dylanconlin","text":"Phase: Implementing (TDD) - Adding deprecation warnings to orch create-investigation, create-decision, and search commands pointing to kb equivalents","created_at":"2025-12-03T23:43:49Z"},{"id":41,"issue_id":"orch-cli-cfh","author":"dylanconlin","text":"Phase: Validation - Deprecation warnings implemented, all 7 new tests + 62 related tests passing. Commands still work, just show warnings.","created_at":"2025-12-03T23:45:33Z"},{"id":42,"issue_id":"orch-cli-cfh","author":"dylanconlin","text":"Phase: Complete - All deprecation warnings implemented and tested. Commands show yellow warning pointing to kb CLI equivalent + install instructions. 7 new tests + 69 related tests passing. Commit: 1f5a817","created_at":"2025-12-03T23:47:16Z"}]}
{"id":"orch-cli-cny","title":"Audit SPAWN_CONTEXT.md quality from price-watch workers (Dec 2-4)","description":"Audit the SPAWN_CONTEXT.md files from workers spawned Monday (Dec 2) through today (Dec 4) in the price-watch project.\n\n## Project Location\n/Users/dylanconlin/Documents/work/SendCutSend/scs-special-projects/price-watch\n\n## Audit Questions\n- Are we including too much info? (bloat, cognitive overload)\n- Just enough? (right level of context)\n- Are there outdated instructions that should be removed?\n- What's working well vs causing confusion?\n\n## Deliverables\n- List of SPAWN_CONTEXT.md files audited (with dates/agents)\n- Findings: what's excessive, what's missing, what's outdated\n- Recommendations for spawn_prompt.py / template improvements\n\n## Note\nThis is meta-work about orch system effectiveness. Findings feed back into orch-cli spawn prompt generation.","notes":"workspace: .orch/workspace/feat-audit-spawn-context-04dec","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-04T15:46:24.568279-08:00","updated_at":"2025-12-04T15:54:14.975917-08:00","closed_at":"2025-12-04T15:54:14.975917-08:00","close_reason":"Duplicate - audit already completed, see .orch/investigations/simple/2025-12-04-audit-spawn-context-quality.md","comments":[{"id":73,"issue_id":"orch-cli-cny","author":"dylanconlin","text":"Phase: Planning - Auditing SPAWN_CONTEXT.md files from price-watch workers Dec 2-4","created_at":"2025-12-04T23:47:18Z"},{"id":74,"issue_id":"orch-cli-cny","author":"dylanconlin","text":"Phase: Complete - Investigation produced findings: SPAWN_CONTEXT.md files are 4x bloated for feature-impl (1600+ lines when 400 needed). Main issues: (1) meta-orchestration boilerplate in all contexts, (2) all skill phases embedded regardless of config, (3) unfilled placeholders. Recommendations: P0=filter skill phases, P1=conditional meta-orch boilerplate, P2=remove placeholders, P3=scope-aware Agent Mail.","created_at":"2025-12-04T23:49:52Z"}]}
{"id":"orch-cli-csx","title":"Phase 2: Remove workspace file creation from spawn","description":"## Context\nFrom investigation: .orch/investigations/design/2025-12-01-orch-cli-role-in-agent-ecosystem.md\n\nAfter beads-first spawning is default, remove workspace file creation.\n\n## Scope\n- Stop creating WORKSPACE.md in spawn.py\n- SPAWN_CONTEXT.md can still exist (injected into agent, ephemeral)\n- Or move SPAWN_CONTEXT into beads issue description\n\n## Acceptance Criteria\n- [ ] spawn.py no longer creates .orch/workspace/{name}/WORKSPACE.md\n- [ ] Agents can still function without workspace file\n- [ ] All execution state flows through beads","notes":"workspace: .orch/workspace/feat-phase-remove-workspace-02dec\nCombined with orch-cli-bve (Phase 3) per Dylan's direction","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-01T11:59:24.259814-08:00","updated_at":"2025-12-03T12:34:53.268552-08:00","closed_at":"2025-12-03T12:34:53.268552-08:00","close_reason":"Resolved via orch complete","dependencies":[{"issue_id":"orch-cli-csx","depends_on_id":"orch-cli-iv6","type":"blocks","created_at":"2025-12-01T11:59:31.351404-08:00","created_by":"daemon"}],"comments":[{"id":9,"issue_id":"orch-cli-csx","author":"dylanconlin","text":"Phase: Planning - Agent GreenHill analyzing spawn.py for workspace creation code","created_at":"2025-12-02T22:51:08Z"},{"id":11,"issue_id":"orch-cli-csx","author":"dylanconlin","text":"Phase: Implementing - Removing create_workspace() calls from spawn.py","created_at":"2025-12-02T22:51:59Z"},{"id":12,"issue_id":"orch-cli-csx","author":"dylanconlin","text":"Phase: Complete - Removed create_workspace() calls from spawn.py. All tests pass.","created_at":"2025-12-02T22:57:45Z"},{"id":13,"issue_id":"orch-cli-csx","author":"dylanconlin","text":"SCOPE EXPANSION: Now includes Phase 3 (orch-cli-bve) - Update orch commands to read from beads","created_at":"2025-12-02T23:13:57Z"},{"id":14,"issue_id":"orch-cli-csx","author":"dylanconlin","text":"Phase: Complete - WORKSPACE.md creation removed from spawn.py. All calls replaced with mkdir. E2E tests updated.","created_at":"2025-12-02T23:21:49Z"}]}
{"id":"orch-cli-dal","title":"orch spawn --project fails for current directory project","description":"Running 'orch spawn -i \"task\" --project orch-cli' from within orch-cli directory fails with 'Project orch-cli not found'. But auto-detection works ('Auto-detected project: orch-cli'). The --project flag should work for the current directory's project name.","notes":"workspace: .orch/workspace/feat-orch-spawn-project-fails-03dec","status":"in_progress","priority":2,"issue_type":"bug","created_at":"2025-12-03T21:32:52.337206-08:00","updated_at":"2025-12-03T21:33:42.681236-08:00","comments":[{"id":48,"issue_id":"orch-cli-dal","author":"dylanconlin","text":"Phase: Planning - Setting up workspace, investigating --project flag handling","created_at":"2025-12-04T05:34:25Z"},{"id":50,"issue_id":"orch-cli-dal","author":"dylanconlin","text":"Phase: Implementing - Root cause identified: get_project_dir() doesn't have fallback for cwd like detect_project_from_cwd() does. Writing failing test first.","created_at":"2025-12-04T05:35:22Z"},{"id":52,"issue_id":"orch-cli-dal","author":"dylanconlin","text":"Phase: Validation - Implementation complete. 4 new tests added, all 143 spawn tests pass. Beginning self-review.","created_at":"2025-12-04T05:37:58Z"},{"id":53,"issue_id":"orch-cli-dal","author":"dylanconlin","text":"Phase: Complete - Fixed get_project_dir() to fall back to cwd when project name matches directory name with .orch/.\n\nCommits:\n- 16484a2 test: add failing tests for get_project_dir() cwd fallback\n- 1b024a9 feat: add cwd fallback to get_project_dir() for unlisted projects\n\nTests: 143 spawn tests passing (4 new tests for this fix)","created_at":"2025-12-04T05:38:57Z"}]}
{"id":"orch-cli-djf","title":"Implement kb CLI commands (TDD)","description":"","notes":"workspace: .orch/workspace/feat-impl-cli-commands-tdd-03dec","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-03T15:19:59.17821-08:00","updated_at":"2025-12-03T15:33:28.526318-08:00","closed_at":"2025-12-03T15:33:28.526318-08:00","close_reason":"Resolved via orch complete","comments":[{"id":35,"issue_id":"orch-cli-djf","author":"dylanconlin","text":"Phase: Planning - Read design doc. QUESTION: Design recommends standalone Go kb-cli repo, but spawned in Python orch-cli. Should I: (A) Add Python kb commands to orch-cli temporarily, (B) Create separate Go kb-cli repo, or (C) Other approach?","created_at":"2025-12-03T23:21:59Z"},{"id":36,"issue_id":"orch-cli-djf","author":"dylanconlin","text":"Clarification received: Go standalone repo. Planning kb-cli implementation following design document.","created_at":"2025-12-03T23:25:37Z"},{"id":37,"issue_id":"orch-cli-djf","author":"dylanconlin","text":"Phase: Implementing - Creating Go project structure at ~/Documents/personal/kb-cli","created_at":"2025-12-03T23:26:11Z"},{"id":38,"issue_id":"orch-cli-djf","author":"dylanconlin","text":"Phase: Complete - kb-cli Go repo created at ~/Documents/personal/kb-cli with 16 passing tests. Commands: kb create, kb list, kb search, kb templates. TDD approach, follows design doc recommendations.","created_at":"2025-12-03T23:31:57Z"}]}
{"id":"orch-cli-eae","title":"Migrate artifact paths from .orch/ to .kb/ with fallback","description":"Migrate from .orch/investigations/ and .orch/decisions/ to .kb/ as canonical location.\n\nRequirements:\n1. .kb/ is the NEW canonical location for investigations and decisions\n2. Support both paths - check .kb/ first, fall back to .orch/ for legacy\n3. Update spawn_prompt.py to tell agents to create files in .kb/\n4. Update complete.py verification to check .kb/ first, then .orch/\n5. Update tests to use new paths\n6. Leave .orch/workspace/ alone (still in use for spawn prompts)\n\nFiles to change:\n- src/orch/complete.py (lines 162-166, 250-251)\n- src/orch/spawn_prompt.py (lines 261, 695, 914)\n- tests/test_backlog_resolution.py (~20 refs)\n- tests/test_skill_discovery.py (4 refs)\n- tests/test_context_ref_loading.py (5 refs)\n- tests/test_spawn_preview.py (2 refs)\n- tests/test_spawn_tmux.py (1 ref)","notes":"workspace: .orch/workspace/feat-migrate-artifact-paths-05dec","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-05T13:31:04.522123-08:00","updated_at":"2025-12-05T13:48:28.832721-08:00","closed_at":"2025-12-05T13:48:28.832721-08:00","close_reason":"Resolved via orch complete","comments":[{"id":96,"issue_id":"orch-cli-eae","author":"dylanconlin","text":"Phase: Planning - Analyzing codebase for .orch/ to .kb/ artifact path migration","created_at":"2025-12-05T21:32:29Z"},{"id":97,"issue_id":"orch-cli-eae","author":"dylanconlin","text":"Phase: Implementing - Starting TDD cycle. Plan: 1) Update complete.py (is_investigation_ref + find_investigation_file), 2) Update spawn_prompt.py (3 locations), 3) Update tests. Note: verification.py already has .kb/ fallback support.","created_at":"2025-12-05T21:33:17Z"},{"id":98,"issue_id":"orch-cli-eae","author":"dylanconlin","text":"Phase: Complete - Migrated artifact paths from .orch/ to .kb/ with fallback. Changes: complete.py (is_investigation_ref, find_investigation_file, surface_investigation_recommendations), spawn_prompt.py (2 locations). Added 12 new tests for .kb/ path support. All 66 related tests pass.","created_at":"2025-12-05T21:37:39Z"}]}
{"id":"orch-cli-fyp","title":"Show convergence status in orch status for parent issues","description":"Add discovered_from_children field to BeadsIssue dataclass. When agent was spawned from a parent issue, show convergence status in orch status output. Format: 'Issue ok-xyz has 2/5 children complete'. Helps orchestrators track multi-issue initiatives without manual bd tree calls.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-05T16:47:24.229981-08:00","updated_at":"2025-12-05T16:47:24.229981-08:00","labels":["P3,beads-integration"]}
{"id":"orch-cli-gmy","title":"Remove /exit from worker spawn prompt instructions","description":"Workers cannot execute /exit - it's a slash command that requires prompt-level input, but workers can only output text. The instruction 'Run: /exit' in spawn prompts is architecturally impossible. See investigation: .kb/investigations/2025-12-05-investigate-worker-shutdown-exit-process.md\n\nImplementation:\n1. Update spawn_prompt.py:617-634 to remove /exit instruction\n2. Update SESSION COMPLETE PROTOCOL to clarify orchestrator handles closure\n3. Update tests/test_spawn_prompt.py - remove /exit assertions\n4. Search for other /exit references in skill templates","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-05T13:16:37.169695-08:00","updated_at":"2025-12-05T13:16:46.605332-08:00"}
{"id":"orch-cli-ibc","title":"P3: Make Agent Mail section scope-aware","description":"From audit: .orch/investigations/simple/2025-12-04-audit-spawn-context-quality.md\n\n## Problem\nAgent Mail section (35 lines) added to ALL contexts, even for quick debugging tasks or simple investigations that complete in \u003c1 hour without needing coordination.\n\n## Solution\nOnly include Agent Mail section when:\n- Session scope is Medium or Large\n- Task involves multi-agent coordination\n- Explicitly requested via flag\n\n## Impact\nReduces overhead for simple tasks, cleaner context for short-lived agents","notes":"workspace: .orch/workspace/feat-make-agent-mail-section-04dec","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-04T15:55:04.520258-08:00","updated_at":"2025-12-04T16:18:48.470451-08:00","closed_at":"2025-12-04T16:18:48.470451-08:00","close_reason":"Resolved via orch complete","comments":[{"id":78,"issue_id":"orch-cli-ibc","author":"dylanconlin","text":"Phase: Planning - Analyzing spawn_prompt.py to make Agent Mail section scope-aware","created_at":"2025-12-05T00:03:33Z"},{"id":82,"issue_id":"orch-cli-ibc","author":"dylanconlin","text":"Phase: Implementing - Adding --agent-mail flag to spawn command and conditionally including Agent Mail section based on scope/flag","created_at":"2025-12-05T00:06:06Z"},{"id":86,"issue_id":"orch-cli-ibc","author":"dylanconlin","text":"Phase: Complete - Implemented scope-aware Agent Mail section. Added --agent-mail flag and auto-include for 3+ phases. 6 tests pass.","created_at":"2025-12-05T00:10:48Z"}]}
{"id":"orch-cli-iv6","title":"Phase 1: Make beads-first spawning the default","description":"## Context\nFrom investigation: .orch/investigations/design/2025-12-01-orch-cli-role-in-agent-ecosystem.md\n\nWorkspaces duplicate beads functionality. Converging workspace state into beads issues.\n\n## Scope\n- `orch spawn --issue bd-xxx` already works\n- Make it the default/primary path\n- Update agent guidance to write progress to beads comments instead of workspace\n\n## Acceptance Criteria\n- [ ] Spawning from beads issue is documented as preferred approach\n- [ ] Agent skill guidance updated to use `bd comment` for progress\n- [ ] SPAWN_CONTEXT template updated to reference beads issue","notes":"workspace: .orch/workspace/feat-phase-make-beads-first-02dec","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-01T11:59:13.391732-08:00","updated_at":"2025-12-03T12:34:41.078146-08:00","closed_at":"2025-12-03T12:34:41.078146-08:00","close_reason":"Resolved via orch complete","comments":[{"id":1,"issue_id":"orch-cli-iv6","author":"dylanconlin","text":"Phase: Implementing - spawn_prompt.py updated with BEADS PROGRESS TRACKING section. feature-impl skill template updated with Progress Tracking (Beads-First) section. All spawn tests passing.","created_at":"2025-12-02T20:17:34Z"},{"id":2,"issue_id":"orch-cli-iv6","author":"dylanconlin","text":"Phase: Complete - All acceptance criteria met. Commits: orch-cli@62e89a9 (spawn_prompt.py), meta-orchestration@45cc53e (feature-impl skill)","created_at":"2025-12-02T20:18:32Z"}]}
{"id":"orch-cli-j6o","title":"orch spawn: 'interactive' should be recognized as -i alias","description":"Running 'orch spawn interactive \"task\"' fails with 'Skill interactive not found'. Users expect 'interactive' to work like '-i' flag. Either add as skill alias or improve error message to suggest '-i'.","notes":"workspace: .orch/workspace/feat-orch-spawn-interactive-03dec","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-03T21:32:50.45037-08:00","updated_at":"2025-12-03T21:39:40.93458-08:00","closed_at":"2025-12-03T21:39:40.93458-08:00","close_reason":"Implemented 'interactive' as alias for -i flag in orch spawn. Users can now run 'orch spawn interactive task'. Commit 4fac01a.","comments":[{"id":47,"issue_id":"orch-cli-j6o","author":"dylanconlin","text":"Phase: Planning - RedLake starting work. Investigating spawn command structure.","created_at":"2025-12-04T05:34:22Z"},{"id":49,"issue_id":"orch-cli-j6o","author":"dylanconlin","text":"Phase: Implementing - Found skill lookup at spawn.py:1926-1928. Solution: treat 'interactive' as alias for -i flag in spawn_commands.py. TDD approach.","created_at":"2025-12-04T05:35:00Z"},{"id":51,"issue_id":"orch-cli-j6o","author":"dylanconlin","text":"Phase: Validation - Implementation complete. Added Mode 3b to spawn_commands.py to handle 'interactive' as alias. 8 new tests passing. Running validation.","created_at":"2025-12-04T05:37:49Z"},{"id":54,"issue_id":"orch-cli-j6o","author":"dylanconlin","text":"Phase: Complete - Commit 4fac01a. Added 'interactive' alias for -i flag. 8 new tests passing.","created_at":"2025-12-04T05:39:07Z"}]}
{"id":"orch-cli-jg8","title":"Test: verify beads-only tracking works","description":"","notes":"workspace: .orch/workspace/feat-test-verify-beads-only-04dec","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-04T11:13:57.00235-08:00","updated_at":"2025-12-04T11:45:17.500666-08:00","closed_at":"2025-12-04T11:45:17.500666-08:00","close_reason":"Resolved via orch complete","comments":[{"id":58,"issue_id":"orch-cli-jg8","author":"dylanconlin","text":"Phase: Planning - Understanding task scope for beads-only tracking verification","created_at":"2025-12-04T19:14:22Z"},{"id":59,"issue_id":"orch-cli-jg8","author":"dylanconlin","text":"Planning: Analyzing existing beads tests - found test_beads_integration.py and test_complete_beads_close.py","created_at":"2025-12-04T19:14:47Z"},{"id":60,"issue_id":"orch-cli-jg8","author":"dylanconlin","text":"Phase: Implementing - Tests pass (34/34). Identified gap: update_issue_status method has no test coverage","created_at":"2025-12-04T19:15:20Z"},{"id":61,"issue_id":"orch-cli-jg8","author":"dylanconlin","text":"Phase: Validation - Tests committed. Running final validation.","created_at":"2025-12-04T19:17:05Z"},{"id":62,"issue_id":"orch-cli-jg8","author":"dylanconlin","text":"Phase: Complete - Added 4 tests for update_issue_status method. All 38 beads tests pass. Commit: 7301501","created_at":"2025-12-04T19:17:23Z"}]}
{"id":"orch-cli-jjb","title":"P0: Filter skill phases to only configured ones in spawn prompt","description":"From audit: .orch/investigations/simple/2025-12-04-audit-spawn-context-quality.md\n\n## Problem\nfeature-impl embeds ALL 8 phases (~1490 lines) even when only 2 are configured via --phases.\n51% of skill content is for phases the agent won't use.\n\n## Solution\nIn spawn_prompt.py, after loading skill content, filter to only include configured phases:\n\n```python\ndef filter_skill_phases(skill_content: str, phases: List[str]) -\u003e str:\n    # Parse SKILL-TEMPLATE markers\n    # Keep only sections matching configured phases\n    # Return filtered content\n```\n\n## Impact\nReduces feature-impl contexts from 1600+ lines to ~600 lines (62% reduction)","notes":"workspace: .orch/workspace/feat-filter-skill-phases-only-04dec","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-04T15:55:01.296281-08:00","updated_at":"2025-12-04T16:18:42.423288-08:00","closed_at":"2025-12-04T16:18:42.423288-08:00","close_reason":"Resolved via orch complete","comments":[{"id":75,"issue_id":"orch-cli-jjb","author":"dylanconlin","text":"Phase: Planning - Analyzing spawn_prompt.py for skill phase filtering implementation","created_at":"2025-12-05T00:03:12Z"},{"id":79,"issue_id":"orch-cli-jjb","author":"dylanconlin","text":"Phase: Implementing - Starting TDD cycle for filter_skill_phases function. Markers found: investigation, clarifying-questions, design, implementation-tdd, implementation-direct, validation, self-review, integration","created_at":"2025-12-05T00:03:55Z"},{"id":84,"issue_id":"orch-cli-jjb","author":"dylanconlin","text":"Phase: Validation - Tests passing. Implementation complete: 65.7% context reduction achieved (1418‚Üí486 lines)","created_at":"2025-12-05T00:08:11Z"},{"id":85,"issue_id":"orch-cli-jjb","author":"dylanconlin","text":"Phase: Complete - Implemented filter_skill_phases() to reduce feature-impl contexts from 1418 to 486 lines (65.7% reduction). All 25 tests passing. Commits: 1ed7b51 (implementation), b6d9352 (tests)","created_at":"2025-12-05T00:09:49Z"}]}
{"id":"orch-cli-jnm","title":"Push kb-cli to GitHub","description":"Create GitHub repo and push kb-cli. Run: cd ~/Documents/personal/kb-cli \u0026\u0026 gh repo create kb-cli --public --push","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-03T15:39:22.937836-08:00","updated_at":"2025-12-03T15:41:19.41675-08:00","closed_at":"2025-12-03T15:41:19.41675-08:00","close_reason":"Keeping local for now"}
{"id":"orch-cli-k90","title":"Add blocker warning to orch spawn --issue","description":"When spawning from a beads issue, check dependencies field and warn if open blockers exist. Non-blocking warning - orchestrator can proceed anyway. Example: '‚ö†Ô∏è This issue has 2 open blockers: ok-abc, ok-def'. Requires expanding BeadsIssue dataclass to include dependencies field.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-05T16:47:14.460596-08:00","updated_at":"2025-12-05T16:47:14.460596-08:00","labels":["P1,beads-integration"]}
{"id":"orch-cli-l7w","title":"Install missing beads git hooks (pre-push, post-checkout)","description":"Currently only pre-commit and post-merge hooks are installed. Missing:\n- pre-push: Prevents pushing stale JSONL\n- post-checkout: Imports JSONL after branch switches\n\nFix: Run 'bd hooks install' to install all four hooks.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-03T08:20:50.47503-08:00","updated_at":"2025-12-03T08:23:50.615718-08:00","closed_at":"2025-12-03T08:23:50.615718-08:00","close_reason":"Decided not to install - existing hooks (pre-commit, post-merge) cover common cases. Session close protocol handles the rest."}
{"id":"orch-cli-mtm","title":"Add bd stale command for detecting old issues","description":"","notes":"Part of Strategic Orchestrator Pattern (decision: 2025-12-04-strategic-orchestrator-pattern.md). Detect issues open longer than N days (default 14?). Helps orchestrator identify stale work during session start backlog review.","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-04T11:40:34.428891-08:00","updated_at":"2025-12-04T11:40:47.8258-08:00"}
{"id":"orch-cli-n9m","title":"orch complete: parse 'Areas needing investigation' section and prompt for follow-up issues","description":"","status":"in_progress","priority":2,"issue_type":"feature","created_at":"2025-12-06T18:42:19.38174-08:00","updated_at":"2025-12-06T18:42:26.477883-08:00","comments":[{"id":127,"issue_id":"orch-cli-n9m","author":"dylanconlin","text":"Phase: Planning - Reading complete_commands.py to understand current parsing logic","created_at":"2025-12-07T02:42:26Z"},{"id":128,"issue_id":"orch-cli-n9m","author":"dylanconlin","text":"investigation_path: /Users/dylanconlin/Documents/personal/orch-cli/.kb/investigations/2025-12-06-orch-complete-parse-areas-needing.md","created_at":"2025-12-07T02:43:00Z"},{"id":129,"issue_id":"orch-cli-n9m","author":"dylanconlin","text":"Phase: Implementation - Writing failing tests for extract_areas_needing_investigation()","created_at":"2025-12-07T02:43:35Z"},{"id":130,"issue_id":"orch-cli-n9m","author":"dylanconlin","text":"Phase: Complete - Implemented extract_areas_needing_investigation() and surface_areas_needing_investigation() functions. 13 new tests pass. Integrated into both sync/async complete paths. Defense-in-depth pattern now surfaces follow-up work items from investigation files.","created_at":"2025-12-07T02:46:31Z"}]}
{"id":"orch-cli-nvl","title":"orch check/complete should support --issue flag for beads-only workflow","description":"## Context\nE2E test (orch-cli-2fz) revealed that orch check/complete require agent in registry.\nIf spawn times out or agent starts manually, these commands don't work.\n\n## Scope\n- Add --issue flag to orch check to inspect beads issue directly\n- Add --issue flag to orch complete to close beads issue without registry lookup\n- Enables simpler beads-first workflow without registry dependency\n\n## Acceptance Criteria\n- [ ] orch check --issue \u003cbeads-id\u003e shows issue details + phase from comments\n- [ ] orch complete --issue \u003cbeads-id\u003e closes issue after verifying Phase: Complete\n- [ ] Works even when agent not in registry","notes":"workspace: .orch/workspace/feat-orch-check-complete-02dec","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-02T15:27:52.989872-08:00","updated_at":"2025-12-03T12:34:55.751847-08:00","closed_at":"2025-12-03T12:34:55.751847-08:00","close_reason":"Resolved via orch complete","comments":[{"id":20,"issue_id":"orch-cli-nvl","author":"dylanconlin","text":"Phase: Planning - Analyzing existing orch check/complete implementation to understand registry dependencies","created_at":"2025-12-02T23:29:19Z"},{"id":21,"issue_id":"orch-cli-nvl","author":"dylanconlin","text":"Phase: Implementing - Starting TDD cycle for --issue flag on check/complete commands","created_at":"2025-12-02T23:30:15Z"},{"id":22,"issue_id":"orch-cli-nvl","author":"dylanconlin","text":"Phase: Validating - All 48 related tests pass (14 new tests, 34 existing), verifying no regressions","created_at":"2025-12-02T23:33:47Z"},{"id":23,"issue_id":"orch-cli-nvl","author":"dylanconlin","text":"Phase: Complete - Implemented --issue flag for orch check and orch complete. 48/48 tests pass. Ready for review.","created_at":"2025-12-02T23:34:16Z"}]}
{"id":"orch-cli-pz2","title":"Clean up SPAWN_CONTEXT.md - remove outdated sections","description":"SPAWN_CONTEXT.md contains several outdated or unnecessary sections that bloat context and confuse agents:\n\n## Sections to Remove/Audit\n\n### 1. META-ORCHESTRATION TEMPLATE SYSTEM (~50 lines)\n```\n‚ö†Ô∏è **META-ORCHESTRATION TEMPLATE SYSTEM** (Critical if working on meta-orchestration):\n**IF task involves these files/patterns:**\n- .orch/CLAUDE.md updates\n...\n```\n**Problem:** Only relevant for orch-knowledge repo. Should NOT be in general spawn template.\n**Action:** Remove from base template, add only when spawning in orch-knowledge.\n\n### 2. AGENT MAIL COORDINATION (~30 lines)\n```\n## AGENT MAIL COORDINATION (OPTIONAL)\nAgent Mail MCP is available for inter-agent messaging...\n```\n**Problem:** Agent Mail is no longer actively used. This is dead weight.\n**Action:** Remove entirely.\n\n### 3. PRE-IMPLEMENTATION ANALYSIS (audit needed)\n```\n## Pre-Implementation Analysis\n```\n**Question:** Are workers actually filling this out? If not, remove or make optional.\n**Action:** Audit recent workspaces to check usage, then decide.\n\n## Impact\n- Reduces spawn context size (currently ~400 lines, could be ~300)\n- Removes confusing/irrelevant guidance\n- Makes SPAWN_CONTEXT more focused on actual task\n\n## Files to Edit\n- `src/orch/spawn_prompt.py` - Main prompt builder\n- `templates/` - Any template files\n- May need conditional logic for project-specific context (e.g., orch-knowledge gets template system guidance)","notes":"workspace: .orch/workspace/feat-clean-spawn-context-05dec","status":"in_progress","priority":2,"issue_type":"task","created_at":"2025-12-05T17:12:24.486464-08:00","updated_at":"2025-12-05T17:56:19.897582-08:00","labels":["P1,spawn,cleanup"],"comments":[{"id":112,"issue_id":"orch-cli-pz2","author":"dylanconlin","text":"Phase: Planning - Analyzing spawn_prompt.py to identify outdated sections for removal","created_at":"2025-12-06T01:56:40Z"},{"id":113,"issue_id":"orch-cli-pz2","author":"dylanconlin","text":"Phase: Investigation - Found all three sections: 1) META-ORCHESTRATION in SPAWN_PROMPT.md template (already has strip function), 2) AGENT MAIL in spawn_prompt.py:777-830, 3) PRE-IMPLEMENTATION in feature-impl skill phases","created_at":"2025-12-06T01:57:43Z"},{"id":114,"issue_id":"orch-cli-pz2","author":"dylanconlin","text":"Phase: Implementation - Starting with removing AGENT MAIL section, then auditing PRE-IMPLEMENTATION usage","created_at":"2025-12-06T01:57:56Z"},{"id":115,"issue_id":"orch-cli-pz2","author":"dylanconlin","text":"Milestone: Agent Mail removal complete (2/3 sections done). Starting PRE-IMPLEMENTATION ANALYSIS audit...","created_at":"2025-12-06T02:00:45Z"},{"id":116,"issue_id":"orch-cli-pz2","author":"dylanconlin","text":"QUESTION: PRE-IMPLEMENTATION section is in feature-impl skill (orch-knowledge repo, not orch-cli). I edited distribution files in ~/.claude/skills/ but need to edit source in ~/orch-knowledge/skills/src/ and rebuild. Should I:\nA) Continue in orch-cli, document cross-repo dependency\nB) Switch to orch-knowledge to edit source and rebuild\nC) Revert distribution edits, complete orch-cli work only (sections 1-2)","created_at":"2025-12-06T02:02:53Z"},{"id":117,"issue_id":"orch-cli-pz2","author":"dylanconlin","text":"Phase: Validation - Running tests for orch-cli changes (sections 1-2). Section 3 (PRE-IMPLEMENTATION) requires work in orch-knowledge repo.","created_at":"2025-12-06T02:03:34Z"},{"id":118,"issue_id":"orch-cli-pz2","author":"dylanconlin","text":"Phase: Complete - Removed Agent Mail section from spawn_prompt.py (~54 lines). All tests passing. META-ORCHESTRATION already handled by existing strip function. PRE-IMPLEMENTATION requires separate work in orch-knowledge repo to edit skill source files.","created_at":"2025-12-06T02:03:52Z"}]}
{"id":"orch-cli-qbu","title":"Store beads db path for cross-repo spawn/complete","description":"When spawning with --issue, store the absolute path to the beads database (not just the issue ID). This enables cross-repo workflows where:\n\n- Epic lives in repo A (e.g., orch-knowledge)\n- Worker spawns to repo B (e.g., skill-benchmark)\n- orch complete can close the issue in repo A's beads\n\nImplementation:\n1. On spawn: resolve beads db path (e.g., /path/to/orch-knowledge/.beads/issues.db)\n2. Store beads_db_path in registry alongside beads_id\n3. Update BeadsIntegration to accept optional db_path parameter\n4. Pass --db flag to all bd commands when db_path is set\n\nBeads already supports --db flag on all commands - orch just needs to use it.\n\nEstimated effort: ~30 minutes\n\nUnblocks: Skill Benchmark Project (ok-71c in orch-knowledge) which needs cross-repo spawning.","notes":"workspace: .orch/workspace/feat-store-beads-path-cross-06dec","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-06T07:00:45.692479-08:00","updated_at":"2025-12-06T07:19:02.768182-08:00","closed_at":"2025-12-06T07:19:02.768182-08:00","close_reason":"Completed in commit c0a1ba4 - cross-repo beads path storage implemented","comments":[{"id":119,"issue_id":"orch-cli-qbu","author":"dylanconlin","text":"Phase: Planning - Analyzing spawn.py, registry.py, and beads_integration.py for cross-repo beads path storage","created_at":"2025-12-06T15:02:17Z"},{"id":120,"issue_id":"orch-cli-qbu","author":"dylanconlin","text":"Phase: Implementing - Adding beads_db_path to SpawnConfig, registry, BeadsIntegration, and complete flow","created_at":"2025-12-06T15:03:10Z"},{"id":121,"issue_id":"orch-cli-qbu","author":"dylanconlin","text":"Phase: Validation - Implementation complete, tests passing (45 beads-related tests pass)","created_at":"2025-12-06T15:10:54Z"},{"id":122,"issue_id":"orch-cli-qbu","author":"dylanconlin","text":"Phase: Complete - Implemented beads_db_path storage for cross-repo spawn/complete. Added to SpawnConfig, registry, BeadsIntegration (_build_command with --db flag), spawn_commands (resolves db path), and complete.py (passes db_path). 45 tests pass.","created_at":"2025-12-06T15:11:18Z"}]}
{"id":"orch-cli-qge","title":"Create kb project - knowledge artifact tooling","description":"## Context\nFrom decision: .orch/decisions/2025-12-01-five-concerns-architecture.md\n\nExtract knowledge artifact management from orch-cli into dedicated kb tool.\n\n## Scope\n- kb create investigation \u003cslug\u003e\n- kb create decision \u003cslug\u003e\n- kb create pattern \u003cslug\u003e\n- kb search \u003cquery\u003e\n- kb list investigations|decisions|patterns\n- Establish .kb/ directory structure\n- Move investigation/decision templates from orch\n\n## Why\norch-cli (lifecycle) shouldn't create knowledge artifacts. Separation of concerns.\n\n## Acceptance Criteria\n- [ ] kb CLI exists with create/search/list commands\n- [ ] .kb/ directory structure documented\n- [ ] Templates moved from ~/.orch/templates/ to kb project\n- [ ] orch-cli investigations.py and decisions.py removed","notes":"workspace: .orch/workspace/feat-create-project-knowledge-03dec","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-01T21:38:50.874599-08:00","updated_at":"2025-12-03T15:19:54.415408-08:00","closed_at":"2025-12-03T15:19:54.415408-08:00","close_reason":"Scaffolding complete (commit 7323584). Remaining TDD implementation to be spawned separately.","comments":[{"id":24,"issue_id":"orch-cli-qge","author":"dylanconlin","text":"Dylan's decisions on open questions:\n1. Migration: YES to .kb/ (use AI with haiku model for migration)\n2. Deprecation: Warnings first\n3. Homebrew: Yes\n4. Interactive search: Brainstorm needed\n5. Reference counting: Agent discretion\n\nThis overrides architect recommendation to keep .orch/","created_at":"2025-12-03T00:27:09Z"},{"id":29,"issue_id":"orch-cli-qge","author":"dylanconlin","text":"Phase: Planning - Understanding scope and existing code. Need to clarify project location.","created_at":"2025-12-03T16:16:13Z"},{"id":33,"issue_id":"orch-cli-qge","author":"dylanconlin","text":"Phase: Implementing - Creating kb project at ~/Documents/personal/kb with TDD approach","created_at":"2025-12-03T16:27:15Z"},{"id":34,"issue_id":"orch-cli-qge","author":"dylanconlin","text":"CHECKPOINT: kb project created at ~/Documents/personal/kb (commit 7323584). Done: project scaffold (pyproject.toml, src/kb/, tests/). Remaining: write tests + implement kb create/list/search commands, move templates.","created_at":"2025-12-03T16:28:15Z"}]}
{"id":"orch-cli-qp6","title":"Create skills project - agent guidance tooling","description":"## Context\nFrom decision: .orch/decisions/2025-12-01-five-concerns-architecture.md\n\nExtract skill authoring/building/deployment from orch-knowledge into dedicated skills tool.\n\n## Scope\n- skills build - compile SKILL.md from phases/techniques\n- skills deploy - install to ~/.claude/skills/\n- skills list - show available skills\n- skills new \u003ccategory\u003e/\u003cname\u003e - scaffold new skill\n- Move skills/src/ from orch-knowledge\n\n## Why\nSkills (prescriptive guidance) are different from knowledge (descriptive learnings). Separate concerns.\n\n## Acceptance Criteria\n- [ ] skills CLI exists with build/deploy/list/new commands\n- [ ] skills/src/ structure documented\n- [ ] Build system extracted from orch-knowledge\n- [ ] orch-cli still consumes skills from ~/.claude/skills/ (no change needed)","notes":"workspace: .orch/workspace/feat-create-skills-project-03dec","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-01T21:38:51.713331-08:00","updated_at":"2025-12-03T12:34:58.586453-08:00","closed_at":"2025-12-03T12:34:58.586453-08:00","close_reason":"Resolved via orch complete","comments":[{"id":28,"issue_id":"orch-cli-qp6","author":"dylanconlin","text":"Phase: Planning - Agent PinkCreek starting, creating workspace","created_at":"2025-12-03T16:15:24Z"},{"id":30,"issue_id":"orch-cli-qp6","author":"dylanconlin","text":"Phase: Implementing - Analyzed existing build system. Creating separate skills CLI with build/deploy/list/new commands. TDD approach.","created_at":"2025-12-03T16:16:43Z"},{"id":31,"issue_id":"orch-cli-qp6","author":"dylanconlin","text":"Phase: Validation - Implementation complete. skills CLI with list/build/deploy/new commands created. Documentation added.","created_at":"2025-12-03T16:21:53Z"},{"id":32,"issue_id":"orch-cli-qp6","author":"dylanconlin","text":"Phase: Complete - skills CLI created with list/build/deploy/new commands. 38 tests passing. Documentation in docs/skills-structure.md. 3 commits: b31ddc9, 6f4f122, a0f6ad9","created_at":"2025-12-03T16:22:35Z"}]}
{"id":"orch-cli-slt","title":"Consolidate template sources for kb","description":"Decide whether kb templates should come from ~/meta-orchestration/templates-src/ or separate ~/.kb/templates/. Currently manually copied.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-03T15:39:25.533461-08:00","updated_at":"2025-12-03T16:04:49.956756-08:00","closed_at":"2025-12-03T16:04:49.956756-08:00","close_reason":"Decision: Keep ~/.kb/templates separate from ~/.orch/templates. Simpler to maintain independently. Revisit if sync becomes painful."}
{"id":"orch-cli-tmb","title":"P2: Remove unfilled placeholders from spawn context","description":"From audit: .orch/investigations/simple/2025-12-04-audit-spawn-context-quality.md\n\n## Problem\nSpawn contexts include placeholder text that confuses workers:\n- `[Agent to define based on task]` for SCOPE IN/OUT\n- `previous-agent/WORKSPACE.md` path that doesn't exist\n\n## Solution\nIn SPAWN_PROMPT.md and spawn_prompt.py:\n- Remove SCOPE IN/OUT placeholders if not provided\n- Remove 'Prior work' section if no actual prior work reference exists\n\n## Impact\nCleaner context, less worker confusion","notes":"workspace: .orch/workspace/feat-remove-unfilled-04dec","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-04T15:55:03.620789-08:00","updated_at":"2025-12-04T16:18:46.398325-08:00","closed_at":"2025-12-04T16:18:46.398325-08:00","close_reason":"Resolved via orch complete","comments":[{"id":77,"issue_id":"orch-cli-tmb","author":"dylanconlin","text":"Phase: Planning - Analyzing spawn_prompt.py to remove unfilled placeholder text","created_at":"2025-12-05T00:03:24Z"},{"id":81,"issue_id":"orch-cli-tmb","author":"dylanconlin","text":"Phase: Implementing - Fixing unfilled placeholders: (1) Remove SCOPE section when not provided, (2) Remove Prior work placeholder section from template","created_at":"2025-12-05T00:04:17Z"},{"id":87,"issue_id":"orch-cli-tmb","author":"dylanconlin","text":"Phase: Complete - Removed unfilled placeholders from spawn contexts: (1) Added strip_unfilled_scope_section() and strip_prior_work_placeholder() functions, (2) Updated fallback_template() to omit SCOPE section, (3) Added 3 tests. All 21 tests pass.","created_at":"2025-12-05T00:11:25Z"}]}
{"id":"orch-cli-tol","title":"Add spawn context quality validation - fail fast if context \u003c100 lines","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-30T15:47:58.953615-08:00","updated_at":"2025-11-30T16:31:58.748425-08:00","closed_at":"2025-11-30T16:31:58.748425-08:00","close_reason":"Fixed in ede9e90 - spawn context quality validation (fail fast \u003c100 lines)"}
{"id":"orch-cli-u08","title":"Document browser-use best practices to avoid context bloat","description":"browser_get_state with include_screenshot or on element-heavy pages can return 15-25k tokens, obliterating context windows.\n\nKey practices to document:\n- Never use include_screenshot: true unless absolutely necessary\n- Use browser_extract_content(query) for targeted data extraction\n- Get state once, remember element indices, don't re-poll\n- Only re-fetch state after navigation or structural page changes\n\nCreate knowledge file: .orch/knowledge/browser-use-best-practices.md","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-02T12:03:36.574851-08:00","updated_at":"2025-12-02T12:05:16.944878-08:00","closed_at":"2025-12-02T12:05:16.944878-08:00","close_reason":"Moving to orch-knowledge - this is general knowledge, not orch-cli specific"}
{"id":"orch-cli-un2","title":"Prevent workers from running bd close directly","description":"Workers are closing beads issues directly via 'bd close' which bypasses orch complete verification (Phase: Complete check, workspace verification, etc).\n\n## Problem\n- Workers running 'bd close' bypasses verification\n- Orchestrator loses visibility\n- Agent registry may still show agent as active while issue is closed\n\n## Solution (two-pronged)\n1. **Guidance fix**: Update spawn_prompt.py to explicitly warn workers never to run 'bd close'\n2. **Enforcement fix**: Add PreToolUse Claude hook that blocks 'bd close' when CLAUDE_CONTEXT=worker\n\n## Implementation notes\n- spawn_prompt.py already has partial edit (line ~528) - complete or integrate properly\n- Hook should go in ~/.orch/hooks/ or ~/.claude/hooks/\n- Register hook in ~/.claude/settings.json PreToolUse section\n- Hook returns error message guiding worker to use 'bd comment' instead","notes":"workspace: .orch/workspace/feat-prevent-workers-from-04dec","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-04T15:38:21.281286-08:00","updated_at":"2025-12-04T15:55:48.400104-08:00","closed_at":"2025-12-04T15:55:48.400104-08:00","close_reason":"Resolved via orch complete","comments":[{"id":70,"issue_id":"orch-cli-un2","author":"dylanconlin","text":"Phase: Planning - Analyzing spawn_prompt.py and hook system for bd close prevention","created_at":"2025-12-04T23:39:00Z"},{"id":71,"issue_id":"orch-cli-un2","author":"dylanconlin","text":"Phase: Implementing - Creating PreToolUse hook to block bd close in worker contexts","created_at":"2025-12-04T23:40:22Z"},{"id":72,"issue_id":"orch-cli-un2","author":"dylanconlin","text":"Phase: Complete - Implemented two-pronged solution: (1) guidance in spawn_prompt.py warning workers not to run bd close, (2) PreToolUse hook block-bd-close.py that enforces the restriction when CLAUDE_CONTEXT=worker. Includes 9 tests. Hook deployed to ~/.orch/hooks/ and registered in settings.json.","created_at":"2025-12-04T23:43:10Z"}]}
{"id":"orch-cli-vny","title":"Investigate Go vs Python vs Rust for CLI tools (beads, vc, orch-cli)","description":"Steve Yegge's beads and vc projects are both written in Go:\n- /Users/dylanconlin/Documents/personal/beads\n- /Users/dylanconlin/Documents/personal/vc\n\norch-cli is written in Python:\n- /Users/dylanconlin/Documents/personal/orch-cli\n\n**Questions to explore:**\n1. What benefits does Go provide for CLI tools like beads/vc?\n2. How does Python compare for orch-cli's use case?\n3. Would Rust be a better choice than either?\n\n**Consider:**\n- Startup time / performance\n- Distribution (single binary vs dependencies)\n- Cross-platform support\n- Developer ergonomics\n- Ecosystem for CLI tooling","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-02T10:25:24.211122-08:00","updated_at":"2025-12-02T10:31:49.336472-08:00","closed_at":"2025-12-02T10:31:49.336472-08:00","close_reason":"Research complete. Recommend Go for CLI tools - 40ms startup vs Python 108ms, single binary distribution. See .orch/investigations/feasibility/2025-12-02-go-python-rust-cli-comparison.md"}
{"id":"orch-cli-vw7","title":"Remove meta-orchestration repo (duplicate of orch-knowledge)","description":"## Context\nmeta-orchestration and orch-knowledge have become duplicates:\n- decisions/, skills/src/, beads issues, ROADMAP - all identical\n- Causes confusion about which is source of truth\n- Additionally, deployed orchestrator skill has drifted from source (32 KB vs 31 KB)\n\n## Actions\n1. Sync deployed ~/.claude/skills/policy/orchestrator/SKILL.md back to orch-knowledge/skills/src/policy/orchestrator/SKILL.md\n2. Optionally archive 3 root .txt files from meta-orchestration to orch-knowledge (session transcripts, 147 KB)\n3. Delete ~/meta-orchestration directory\n4. Verify no dangling references to meta-orchestration\n\n## Verified\n- All decisions identical (75 files each, no diff)\n- All beads issues identical (same MD5)\n- skills/src/ identical\n- ROADMAP identical\n- Deployed skill is newer (Dec 4) than source (Dec 3)","notes":"workspace: .orch/workspace/feat-remove-meta-04dec","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-04T11:51:54.63024-08:00","updated_at":"2025-12-04T12:46:08.279648-08:00","closed_at":"2025-12-04T12:46:08.279648-08:00","close_reason":"Resolved via orch complete","comments":[{"id":63,"issue_id":"orch-cli-vw7","author":"dylanconlin","text":"Phase: Planning - Analyzing meta-orchestration cleanup task. Actions: sync deployed skill, optionally archive txt files, delete meta-orchestration dir, verify no dangling refs","created_at":"2025-12-04T19:53:27Z"},{"id":64,"issue_id":"orch-cli-vw7","author":"dylanconlin","text":"Phase: Implementing - Plan: (1) sync deployed skill to orch-knowledge source, (2) remove meta-orchestration fallback code from orch-cli (init.py, spawn.py, config.py), (3) delete ~/meta-orchestration, (4) verify no dangling refs. Skipping txt archive per validation=none.","created_at":"2025-12-04T19:54:11Z"},{"id":65,"issue_id":"orch-cli-vw7","author":"dylanconlin","text":"Phase: Complete - meta-orchestration repo removed. Actions: (1) Synced deployed orchestrator skill to orch-knowledge source (+65 lines: Backlog Ownership, Code Writing Boundary), (2) Removed fallback code from orch-cli (init.py, spawn.py, config.py), (3) Deleted ~/meta-orchestration directory, (4) Updated SPAWN_PROMPT.md template. Historical doc references remain as documentation artifacts.","created_at":"2025-12-04T19:57:23Z"}]}
{"id":"orch-cli-wsn","title":"Investigate leveraging Claude Code --agent flag for skill-based spawning","description":"Claude Code 2.0.59 added --agent CLI flag and agent setting that could simplify/improve orch-cli spawning.\n\nCurrent approach:\n- Inject context via --append-system-prompt and SPAWN_CONTEXT.md\n- Skills defined as SKILL.md files, embedded in spawn prompts\n\nNew possibility:\n- Define worker agents in .claude/agents/ with pre-configured system prompts\n- Tool restrictions per skill type (read-only for investigations, full for feature-impl)\n- Model selection baked into agent config\n- Spawn with: claude --agent investigation-worker\n\nQuestions to answer:\n1. Should skills become .claude/agents/ files?\n2. How would tool restrictions work with current skill system?\n3. Can we dynamically generate agents via --agents JSON flag?\n4. What's the migration path from current SPAWN_CONTEXT.md approach?\n5. How does this interact with subagents/Task tool?\n\nSource: Claude Code docs, version 2.0.59 changelog","notes":"workspace: .orch/workspace/feat-inv-leveraging-claude-05dec","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-05T13:47:58.294073-08:00","updated_at":"2025-12-05T22:51:49.865928-08:00","closed_at":"2025-12-05T22:51:49.865928-08:00","close_reason":"Investigation complete - hybrid approach recommended. See .kb/investigations/simple/2025-12-05-claude-agent-flag-for-skills.md","comments":[{"id":99,"issue_id":"orch-cli-wsn","author":"dylanconlin","text":"Phase: Planning - Investigating Claude Code --agent flag for skill-based spawning. Will research Claude Code docs, analyze current spawn implementation, and document findings.","created_at":"2025-12-05T21:48:33Z"},{"id":100,"issue_id":"orch-cli-wsn","author":"dylanconlin","text":"Phase: Implementing - Creating investigation document with analysis of --agent flag integration","created_at":"2025-12-05T21:51:58Z"},{"id":101,"issue_id":"orch-cli-wsn","author":"dylanconlin","text":"Phase: Complete - Investigation documented in .kb/investigations/simple/2025-12-05-claude-agent-flag-for-skills.md. Recommends hybrid approach: generate .claude/agents/ files at spawn time for tool restrictions while keeping SKILL.md for procedural guidance. Includes migration path in 4 phases.","created_at":"2025-12-05T21:53:10Z"}]}
{"id":"orch-cli-xac","title":"orch wait shows 'Unknown' phase when agent hasn't filled workspace yet","description":"","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-11-30T15:47:58.755017-08:00","updated_at":"2025-11-30T16:31:18.968481-08:00","closed_at":"2025-11-30T16:31:18.968481-08:00","close_reason":"Fixed in 810e1af - parse_workspace now reads YAML frontmatter"}
{"id":"orch-cli-xlt","title":"Fix false positive: WORKSPACE.md missing violation on just-spawned agents","description":"## Problem\n`orch check` reports a CRITICAL violation 'WORKSPACE.md file missing' immediately after spawning an agent, before the agent has had a chance to create its workspace file.\n\n## Expected\n- Either don't check for WORKSPACE.md until agent has been running for some threshold (e.g., 30 seconds)\n- Or downgrade from CRITICAL to INFO for newly-spawned agents\n- Or only check once agent phase is known\n\n## Reproduction\n1. `orch spawn feature-impl \"any task\"`\n2. Immediately run `orch check \u003cagent-id\u003e`\n3. See CRITICAL violation for missing WORKSPACE.md\n\n## Location\nLikely in orch-cli pattern checking logic","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-04T11:53:45.754945-08:00","updated_at":"2025-12-05T12:45:45.427312-08:00","closed_at":"2025-12-05T12:45:45.427312-08:00","close_reason":"Fixed: WORKSPACE.md missing is no longer a violation when beads_id present"}
{"id":"orch-cli-xzy","title":"Add --auto-track flag to orch spawn for automatic beads tracking","description":"","notes":"Part of Strategic Orchestrator Pattern (decision: 2025-12-04-strategic-orchestrator-pattern.md). Auto-apply tracking heuristic: create beads issue if work should be discoverable, has clear completion, spans sessions, or part of larger goal. Skip if exploratory/time-sensitive/one-off/artifact is deliverable.","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-04T11:40:33.68344-08:00","updated_at":"2025-12-04T11:40:46.583063-08:00"}
{"id":"orch-cli-yth","title":"Remove --dangerously-skip-permissions from spawn command","description":"Once --agent flag with tool restrictions is working, remove --dangerously-skip-permissions for improved security. Workers will only have access to tools defined in their skill.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-05T22:52:02.187617-08:00","updated_at":"2025-12-05T22:52:02.187617-08:00"}
{"id":"orch-cli-zac","title":"orch create-investigation uses wrong project directory","description":"## Bug\nRunning `orch create-investigation` from ~/orch-knowledge creates files in ~/Documents/personal/orch-cli/.orch/investigations/ instead of ~/orch-knowledge/.orch/investigations/.\n\n## Expected\nShould create investigation in the current project's .orch/investigations/ directory.\n\n## Discovered\nFrom investigation: .orch/investigations/simple/2025-12-02-orch-create-investigation-fails-template.md","notes":"workspace: .orch/workspace/feat-orch-create-inv-uses-02dec","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-02T12:33:08.189752-08:00","updated_at":"2025-12-03T12:34:46.973793-08:00","closed_at":"2025-12-03T12:34:46.973793-08:00","close_reason":"Resolved via orch complete","comments":[{"id":3,"issue_id":"orch-cli-zac","author":"dylanconlin","text":"Phase: Planning - Starting investigation of create-investigation command","created_at":"2025-12-02T20:35:28Z"},{"id":4,"issue_id":"orch-cli-zac","author":"dylanconlin","text":"Phase: Implementation - Fixing detect_project_dir() to check cwd before CLAUDE_PROJECT","created_at":"2025-12-02T20:36:51Z"},{"id":5,"issue_id":"orch-cli-zac","author":"dylanconlin","text":"Phase: Validation - All tests passing (31/31). Fix committed.","created_at":"2025-12-02T20:38:44Z"},{"id":6,"issue_id":"orch-cli-zac","author":"dylanconlin","text":"Phase: Complete - Bug fixed. detect_project_dir() now checks cwd before CLAUDE_PROJECT env var. All 31 tests pass. Commit: fdf884b","created_at":"2025-12-02T20:39:25Z"}]}
