{"id":"kn-912663","type":"decision","content":"testing orch end","status":"active","created_at":"2025-12-09T15:56:36.627827-08:00","updated_at":"2025-12-09T15:56:36.627827-08:00","reason":"validating the new command","ref_count":0,"last_ref":"0001-01-01T00:00:00Z"}
{"id":"kn-e2292b","type":"decision","content":"orch complete failures are 74% git validation races from parallel agents modifying .beads/issues.jsonl","status":"active","created_at":"2025-12-09T21:33:59.164555-08:00","updated_at":"2025-12-09T21:33:59.164555-08:00","reason":"Analyzed 110 errors in errors.jsonl. 81/110 are UNEXPECTED_ERROR with git validation failures. Root cause: exclude_files=['.beads/'] exists but TOCTOU race occurs because git validation runs before beads operations complete. Fix: expand exclude list to ['.beads/', '.kn/'] and add gitignore-based exclusion.","ref_count":0,"last_ref":"0001-01-01T00:00:00Z"}
{"id":"kn-600670","type":"constraint","content":"exclude_files parameter in git validation doesn't prevent all parallel completion races","status":"active","created_at":"2025-12-09T21:34:07.530228-08:00","updated_at":"2025-12-09T21:34:07.530228-08:00","reason":"Code at git_utils.py:268-292 implements exclusion filtering but TOCTOU race still occurs when multiple agents complete within seconds. Validation runs before beads sync completes, creating race window where one agent's beads changes appear as uncommitted in another agent's validation.","authority":"high","source":"internal","ref_count":0,"last_ref":"0001-01-01T00:00:00Z"}
{"id":"kn-ffa27e","type":"decision","content":"file-based signals for agent-to-orchestrator completion notification over tmux send-keys","status":"active","created_at":"2025-12-10T09:43:37.305383-08:00","updated_at":"2025-12-10T09:43:37.305383-08:00","reason":"tmux send-keys has race conditions when orchestrator is mid-input (acknowledged in src/orch/send.py:97-99 sleep). File-based signals via fswatch are non-intrusive, avoid complex orchestrator window targeting, and integrate naturally with existing beads workflow.","ref_count":0,"last_ref":"0001-01-01T00:00:00Z"}
